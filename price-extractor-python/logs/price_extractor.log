2025-04-16 11:26:27 | INFO     | services.database:__init__:19 - Database service initialized
2025-04-16 11:26:27 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:26:27 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:26:27 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 11:28:28 | INFO     | api.routes:get_batch_results:101 - Fetching batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:28:28 | INFO     | services.price_service:get_batch_results:193 - Retrieving batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:28:28 | ERROR    | services.database:get_batch_results:290 - Error retrieving batch results for batch_id 7aa83653-9fde-423a-83d5-42559502ea80: [Errno 8] nodename nor servname provided, or not known
2025-04-16 11:28:28 | WARNING  | services.price_service:get_batch_results:200 - No batch data found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:28:28 | WARNING  | api.routes:get_batch_results:108 - No batch results found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:28:28 | INFO     | api.routes:get_batch_results:101 - Fetching batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:28:28 | INFO     | services.price_service:get_batch_results:193 - Retrieving batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:28:28 | ERROR    | services.database:get_batch_results:290 - Error retrieving batch results for batch_id 7aa83653-9fde-423a-83d5-42559502ea80: [Errno 8] nodename nor servname provided, or not known
2025-04-16 11:28:28 | WARNING  | services.price_service:get_batch_results:200 - No batch data found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:28:28 | WARNING  | api.routes:get_batch_results:108 - No batch results found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | INFO     | api.routes:get_batch_results:101 - Fetching batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | INFO     | services.price_service:get_batch_results:193 - Retrieving batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | ERROR    | services.database:get_batch_results:290 - Error retrieving batch results for batch_id 7aa83653-9fde-423a-83d5-42559502ea80: [Errno 8] nodename nor servname provided, or not known
2025-04-16 11:30:08 | WARNING  | services.price_service:get_batch_results:200 - No batch data found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | WARNING  | api.routes:get_batch_results:108 - No batch results found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | INFO     | api.routes:get_batch_results:101 - Fetching batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | INFO     | services.price_service:get_batch_results:193 - Retrieving batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | ERROR    | services.database:get_batch_results:290 - Error retrieving batch results for batch_id 7aa83653-9fde-423a-83d5-42559502ea80: [Errno 8] nodename nor servname provided, or not known
2025-04-16 11:30:08 | WARNING  | services.price_service:get_batch_results:200 - No batch data found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:30:08 | WARNING  | api.routes:get_batch_results:108 - No batch results found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:31:06 | INFO     | services.database:__init__:19 - Database service initialized
2025-04-16 11:31:06 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:31:06 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:31:06 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 11:31:28 | INFO     | api.routes:update_machine_price:38 - Received price update request for machine 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-16 11:31:28 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-16 11:31:28 | ERROR    | services.price_service:update_machine_price:41 - Invalid or missing URL for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: None
2025-04-16 11:31:28 | ERROR    | api.routes:update_machine_price:43 - Price update failed for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: Invalid or missing URL for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: None
2025-04-16 11:31:28 | ERROR    | api.routes:update_machine_price:48 - Error updating price for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: 400: Invalid or missing URL for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: None
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x1113e7560>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10575b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x1057b8540>
    └ <uvicorn.server.Server object at 0x1113fb490>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1057b85e0>
           │       │   └ <uvicorn.server.Server object at 0x1113fb490>
           │       └ <function run at 0x104fa8e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1113967a0>
           │      └ <function Runner.run at 0x105010720>
           └ <asyncio.runners.Runner object at 0x1116284d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1116325a0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1116284d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111667e50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e6010>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1116c6ed0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111667e50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e6010>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e6010>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1116e4450>
          └ <fastapi.applications.FastAPI object at 0x1116c6ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1116d36a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1116e4450>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1116d36a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x107495760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11161fb10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1116e5110>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1116c7490>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11161fb10>
          └ <function wrap_app_handling_exceptions at 0x1073e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1116c7490>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1116c7490>>
          └ <fastapi.routing.APIRouter object at 0x1116c7490>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1073e1da0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1116d2980>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1116e4dd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1116d3920>
          └ <function wrap_app_handling_exceptions at 0x1073e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e60...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1116d3920>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1116e4dd0>
                     └ <function get_request_handler.<locals>.app at 0x1116d27a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1073e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': MachineUpdateRequest(machine_id='163b26bb-b096-4473-9a17-569c1cfb4f18')}
                 │         └ <function update_machine_price at 0x1113e68e0>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 44, in update_machine_price
    raise HTTPException(status_code=400, detail=result.get("error", "Price update failed"))
          │                                     │      └ <method 'get' of 'dict' objects>
          │                                     └ {'success': False, 'error': 'Invalid or missing URL for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: None'}
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 400: Invalid or missing URL for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: None
2025-04-16 11:33:25 | INFO     | api.routes:update_machine_price:38 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:33:25 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:33:26 | ERROR    | services.price_service:update_machine_price:41 - Invalid or missing URL for machine 8054eeb8-504f-4791-9f48-a99fe0669664: None
2025-04-16 11:33:26 | ERROR    | api.routes:update_machine_price:43 - Price update failed for machine 8054eeb8-504f-4791-9f48-a99fe0669664: Invalid or missing URL for machine 8054eeb8-504f-4791-9f48-a99fe0669664: None
2025-04-16 11:33:26 | ERROR    | api.routes:update_machine_price:48 - Error updating price for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 400: Invalid or missing URL for machine 8054eeb8-504f-4791-9f48-a99fe0669664: None
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x1113e7560>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10575b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x1057b8540>
    └ <uvicorn.server.Server object at 0x1113fb490>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1057b85e0>
           │       │   └ <uvicorn.server.Server object at 0x1113fb490>
           │       └ <function run at 0x104fa8e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1113967a0>
           │      └ <function Runner.run at 0x105010720>
           └ <asyncio.runners.Runner object at 0x1116284d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1116325a0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1116284d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111667e50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1116c6ed0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111667e50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1116e4450>
          └ <fastapi.applications.FastAPI object at 0x1116c6ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1116d37e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1116e4450>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1116d37e0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x107495760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11161fb10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1116dbb10>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1116e5410>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1116c7490>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11161fb10>
          └ <function wrap_app_handling_exceptions at 0x1073e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1116c7490>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1116c7490>>
          └ <fastapi.routing.APIRouter object at 0x1116c7490>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1073e1da0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1116d2980>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3880>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1116e8d50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1116d3920>
          └ <function wrap_app_handling_exceptions at 0x1073e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1116d3a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1116e4f...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1116d3920>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1116e8d50>
                     └ <function get_request_handler.<locals>.app at 0x1116d27a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1073e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': MachineUpdateRequest(machine_id='8054eeb8-504f-4791-9f48-a99fe0669664')}
                 │         └ <function update_machine_price at 0x1113e68e0>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 44, in update_machine_price
    raise HTTPException(status_code=400, detail=result.get("error", "Price update failed"))
          │                                     │      └ <method 'get' of 'dict' objects>
          │                                     └ {'success': False, 'error': 'Invalid or missing URL for machine 8054eeb8-504f-4791-9f48-a99fe0669664: None'}
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 400: Invalid or missing URL for machine 8054eeb8-504f-4791-9f48-a99fe0669664: None
2025-04-16 11:34:52 | INFO     | services.database:__init__:19 - Database service initialized
2025-04-16 11:34:52 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:34:52 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:34:52 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 11:35:03 | INFO     | api.routes:update_machine_price:38 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:35:03 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:35:04 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-16 11:35:05 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.81 seconds
2025-04-16 11:35:05 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 1199.0 using JSON-LD
2025-04-16 11:35:07 | WARNING  | services.database:update_machine_price:74 - No machine found with ID 8054eeb8-504f-4791-9f48-a99fe0669664 to update
2025-04-16 11:35:07 | ERROR    | services.price_service:update_machine_price:102 - Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:35:07 | ERROR    | api.routes:update_machine_price:43 - Price update failed for machine 8054eeb8-504f-4791-9f48-a99fe0669664: Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:35:07 | ERROR    | api.routes:update_machine_price:48 - Error updating price for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 400: Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x1138f3560>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1067632e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x107368540>
    └ <uvicorn.server.Server object at 0x113a288d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1073685e0>
           │       │   └ <uvicorn.server.Server object at 0x113a288d0>
           │       └ <function run at 0x106420e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1138967a0>
           │      └ <function Runner.run at 0x10648c720>
           └ <asyncio.runners.Runner object at 0x113a28990>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x113a32670>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x113a28990>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x113a80250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x113abf410>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x113a80250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113ae8650>
          └ <fastapi.applications.FastAPI object at 0x113abf410>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x113ad7740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x113a1a410>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x113ae8650>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x113ad7740>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x110d95760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x113a1a410>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x113a1a410>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113a18e10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x113a1a410>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x113a1a410>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x113ae9010>
          │                            │    └ <fastapi.routing.APIRouter object at 0x113abf950>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x113a18e10>
          └ <function wrap_app_handling_exceptions at 0x110ce07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x113ad7880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x113abf950>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x113ad7880>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x113abf950>>
          └ <fastapi.routing.APIRouter object at 0x113abf950>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x113ad7880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x110ce1da0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x113ad7880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x113ad6980>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x113ad7880>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x113ae8fd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x113ad7920>
          └ <function wrap_app_handling_exceptions at 0x110ce07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x113ad7a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x113ae9e...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x113ad7920>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x113ae8fd0>
                     └ <function get_request_handler.<locals>.app at 0x113ad67a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x110ce18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': MachineUpdateRequest(machine_id='8054eeb8-504f-4791-9f48-a99fe0669664')}
                 │         └ <function update_machine_price at 0x1138f28e0>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 44, in update_machine_price
    raise HTTPException(status_code=400, detail=result.get("error", "Price update failed"))
          │                                     │      └ <method 'get' of 'dict' objects>
          │                                     └ {'success': False, 'error': 'Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664'}
          └ <class 'fastapi.exceptions.HTTPException'>

fastapi.exceptions.HTTPException: 400: Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:38:45 | INFO     | services.database:__init__:19 - Database service initialized
2025-04-16 11:38:45 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:38:45 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:38:45 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 11:38:54 | INFO     | services.database:__init__:19 - Database service initialized
2025-04-16 11:38:54 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:38:54 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:38:54 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 11:39:23 | INFO     | api.routes:update_machine_price:43 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:39:23 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:39:23 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-16 11:39:24 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.44 seconds
2025-04-16 11:39:24 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 1199.0 using JSON-LD
2025-04-16 11:39:24 | INFO     | services.price_service:update_machine_price:85 - Price unchanged for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-16 11:39:24 | ERROR    | services.database:add_price_history:139 - Error adding price history for machine 8054eeb8-504f-4791-9f48-a99fe0669664: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'new_price' column of 'price_history' in the schema cache"}
2025-04-16 11:41:13 | INFO     | services.database:__init__:19 - Database service initialized
2025-04-16 11:41:13 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:41:13 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:41:13 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 11:41:35 | INFO     | api.routes:update_machine_price:43 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:41:35 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:41:36 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-16 11:41:36 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.42 seconds
2025-04-16 11:41:36 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 1199.0 using JSON-LD
2025-04-16 11:41:36 | INFO     | services.price_service:update_machine_price:85 - Price unchanged for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-16 11:41:36 | INFO     | services.database:add_price_history:155 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 11:45:29 | INFO     | api.routes:get_batch_results:168 - Fetching batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:45:29 | INFO     | services.price_service:get_batch_results:204 - Retrieving batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:45:29 | ERROR    | services.database:get_batch_results:282 - Error retrieving batch results for batch_id 7aa83653-9fde-423a-83d5-42559502ea80: {'code': '42P01', 'details': None, 'hint': None, 'message': 'relation "public.batch_results" does not exist'}
2025-04-16 11:45:29 | WARNING  | services.price_service:get_batch_results:211 - No batch data found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:45:29 | WARNING  | api.routes:get_batch_results:175 - No batch results found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:45:29 | INFO     | api.routes:get_batch_results:168 - Fetching batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:45:29 | INFO     | services.price_service:get_batch_results:204 - Retrieving batch results for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:45:29 | ERROR    | services.database:get_batch_results:282 - Error retrieving batch results for batch_id 7aa83653-9fde-423a-83d5-42559502ea80: {'code': '42P01', 'details': None, 'hint': None, 'message': 'relation "public.batch_results" does not exist'}
2025-04-16 11:45:29 | WARNING  | services.price_service:get_batch_results:211 - No batch data found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:45:29 | WARNING  | api.routes:get_batch_results:175 - No batch results found for batch_id: 7aa83653-9fde-423a-83d5-42559502ea80
2025-04-16 11:49:49 | INFO     | services.database:__init__:20 - Database service initialized
2025-04-16 11:49:49 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:49:49 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:49:49 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 11:51:14 | INFO     | services.price_service:batch_update_machines:205 - Starting batch update for machines with threshold of 0 days
2025-04-16 11:51:21 | INFO     | services.database:get_machines_needing_update:220 - Found 150 machines needing price updates
2025-04-16 11:51:21 | ERROR    | services.database:create_batch:294 - Error creating batch: {'code': '42501', 'details': None, 'hint': None, 'message': 'new row violates row-level security policy for table "batches"'}
2025-04-16 11:51:21 | ERROR    | services.price_service:batch_update_machines:224 - Failed to create batch record
2025-04-16 11:54:18 | INFO     | services.database:__init__:20 - Database service initialized
2025-04-16 11:54:18 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 11:54:18 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 11:54:18 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:01:29 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:01:29 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:01:29 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:01:29 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:11:27 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:11:27 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:11:27 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:11:27 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:11:32 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:11:32 | ERROR    | services.database:get_machines_needing_update:227 - Error in get_machines_needing_update: type object 'datetime.datetime' has no attribute 'datetime'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x111a34b80>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x104b3f2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x104b9c540>
    └ <uvicorn.server.Server object at 0x111a4c110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x104b9c5e0>
           │       │   └ <uvicorn.server.Server object at 0x111a4c110>
           │       └ <function run at 0x10438ce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x111996890>
           │      └ <function Runner.run at 0x1043f4720>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x111a528e0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37610>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111a3bd10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37610>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37610>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
          └ <fastapi.applications.FastAPI object at 0x111a3bd10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af5440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af5440>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x106795760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x111f36b10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x111ae7250>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x111ae7250>>
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1066e1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x111af4900>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x111f36a10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x111af5620>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5760>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f376...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x111af5620>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x111f36a10>
                     └ <function get_request_handler.<locals>.app at 0x111af4a40>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1066e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 7, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1119f7420>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 7
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x107ccb420>
                     │             └ <services.database.DatabaseService object at 0x106902c90>
                     └ <services.price_service.PriceService object at 0x1069023d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 192, in get_machines_needing_update
    today = datetime.datetime.now()
            └ <class 'datetime.datetime'>

AttributeError: type object 'datetime.datetime' has no attribute 'datetime'
2025-04-16 12:11:48 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:11:48 | ERROR    | services.database:get_machines_needing_update:227 - Error in get_machines_needing_update: type object 'datetime.datetime' has no attribute 'datetime'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x111a34b80>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x104b3f2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x104b9c540>
    └ <uvicorn.server.Server object at 0x111a4c110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x104b9c5e0>
           │       │   └ <uvicorn.server.Server object at 0x111a4c110>
           │       └ <function run at 0x10438ce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x111996890>
           │      └ <function Runner.run at 0x1043f4720>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x111a528e0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37510>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111a3bd10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37510>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37510>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
          └ <fastapi.applications.FastAPI object at 0x111a3bd10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af53a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af53a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x106795760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x111f37850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x111ae7250>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x111ae7250>>
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1066e1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x111af4900>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x111f377d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x111af5620>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5760>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f375...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x111af5620>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x111f377d0>
                     └ <function get_request_handler.<locals>.app at 0x111af4a40>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1066e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 7, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1119f7420>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 7
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x107ccb420>
                     │             └ <services.database.DatabaseService object at 0x106902c90>
                     └ <services.price_service.PriceService object at 0x1069023d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 192, in get_machines_needing_update
    today = datetime.datetime.now()
            └ <class 'datetime.datetime'>

AttributeError: type object 'datetime.datetime' has no attribute 'datetime'
2025-04-16 12:11:52 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:11:52 | ERROR    | services.database:get_machines_needing_update:227 - Error in get_machines_needing_update: object APIResponse[~_ReturnT] can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x111a34b80>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x104b3f2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x104b9c540>
    └ <uvicorn.server.Server object at 0x111a4c110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x104b9c5e0>
           │       │   └ <uvicorn.server.Server object at 0x111a4c110>
           │       └ <function run at 0x10438ce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x111996890>
           │      └ <function Runner.run at 0x1043f4720>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x111a528e0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37790>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111a3bd10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37790>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f37790>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
          └ <fastapi.applications.FastAPI object at 0x111a3bd10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af53a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af53a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x106795760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x111f36e10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x111ae7250>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x111ae7250>>
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1066e1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x111af4900>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5580>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x111f367d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x111af5620>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af5760>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111f377...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x111af5620>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x111f367d0>
                     └ <function get_request_handler.<locals>.app at 0x111af4a40>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1066e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 0, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1119f7420>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 0
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x107ccb420>
                     │             └ <services.database.DatabaseService object at 0x106902c90>
                     └ <services.price_service.PriceService object at 0x1069023d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 211, in get_machines_needing_update
    response = await query.execute()
                     │     └ <function SyncQueryRequestBuilder.execute at 0x107b90220>
                     └ <postgrest._sync.request_builder.SyncSelectRequestBuilder object at 0x112230ed0>

TypeError: object APIResponse[~_ReturnT] can't be used in 'await' expression
2025-04-16 12:11:52 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:11:53 | ERROR    | services.database:get_machines_needing_update:227 - Error in get_machines_needing_update: object APIResponse[~_ReturnT] can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x111a34b80>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x104b3f2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x104b9c540>
    └ <uvicorn.server.Server object at 0x111a4c110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x104b9c5e0>
           │       │   └ <uvicorn.server.Server object at 0x111a4c110>
           │       └ <function run at 0x10438ce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x111996890>
           │      └ <function Runner.run at 0x1043f4720>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x111a528e0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x111a4c310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x111a3bd10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111a7fd50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
          └ <fastapi.applications.FastAPI object at 0x111a3bd10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af5580>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111abe110>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111af5580>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x106795760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111a1a810>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x112232cd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x111ae7250>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111a32290>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af56c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af56c0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x111ae7250>>
          └ <fastapi.routing.APIRouter object at 0x111ae7250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af56c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1066e1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af56c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x111af4900>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111af56c0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x112233c50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x111af5760>
          └ <function wrap_app_handling_exceptions at 0x1066e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111fe16c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112231c...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x111af5760>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x112233c50>
                     └ <function get_request_handler.<locals>.app at 0x111af4a40>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1066e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 0, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1119f7420>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 0
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x107ccb420>
                     │             └ <services.database.DatabaseService object at 0x106902c90>
                     └ <services.price_service.PriceService object at 0x1069023d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 211, in get_machines_needing_update
    response = await query.execute()
                     │     └ <function SyncQueryRequestBuilder.execute at 0x107b90220>
                     └ <postgrest._sync.request_builder.SyncSelectRequestBuilder object at 0x111f36a50>

TypeError: object APIResponse[~_ReturnT] can't be used in 'await' expression
2025-04-16 12:15:10 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:15:10 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:15:10 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:15:10 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:15:18 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:15:18 | ERROR    | services.database:get_machines_needing_update:227 - Error in get_machines_needing_update: type object 'datetime.datetime' has no attribute 'timedelta'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x107438ae0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x103f4b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x103fa8540>
    └ <uvicorn.server.Server object at 0x1074484d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x103fa85e0>
           │       │   └ <uvicorn.server.Server object at 0x1074484d0>
           │       └ <function run at 0x103794e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1073967a0>
           │      └ <function Runner.run at 0x103800720>
           └ <asyncio.runners.Runner object at 0x1074485d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x107452810>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1074485d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10747fd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f650>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x107448250>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10747fd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f650>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f650>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11891e210>
          └ <fastapi.applications.FastAPI object at 0x107448250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1074f93a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11891e210>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1074f93a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x105395760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10741fc50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11891eb50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1074e7290>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10741fc50>
          └ <function wrap_app_handling_exceptions at 0x1052e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1074e7290>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1074e7290>>
          └ <fastapi.routing.APIRouter object at 0x1074e7290>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1052e1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1074f8860>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11891ef90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1074f9580>
          └ <function wrap_app_handling_exceptions at 0x1052e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f96c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11891f6...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1074f9580>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11891ef90>
                     └ <function get_request_handler.<locals>.app at 0x1074f89a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1052e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 7, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1073f7380>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 7
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x1067cf380>
                     │             └ <services.database.DatabaseService object at 0x105403d50>
                     └ <services.price_service.PriceService object at 0x105403c90>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 195, in get_machines_needing_update
    threshold_date = today - datetime.timedelta(days=days_threshold)
                     │       │                       └ 7
                     │       └ <class 'datetime.datetime'>
                     └ datetime.datetime(2025, 4, 16, 12, 15, 18, 193218)

AttributeError: type object 'datetime.datetime' has no attribute 'timedelta'
2025-04-16 12:15:39 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:15:39 | ERROR    | services.database:get_machines_needing_update:227 - Error in get_machines_needing_update: type object 'datetime.datetime' has no attribute 'timedelta'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x107438ae0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x103f4b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x103fa8540>
    └ <uvicorn.server.Server object at 0x1074484d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x103fa85e0>
           │       │   └ <uvicorn.server.Server object at 0x1074484d0>
           │       └ <function run at 0x103794e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1073967a0>
           │      └ <function Runner.run at 0x103800720>
           └ <asyncio.runners.Runner object at 0x1074485d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x107452810>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1074485d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10747fd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x118928610>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x107448250>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10747fd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x118928610>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x118928610>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11891e210>
          └ <fastapi.applications.FastAPI object at 0x107448250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1074f9440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11891e210>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1074f9440>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x105395760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10741fc50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10742f210>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11891f690>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1074e7290>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10741fc50>
          └ <function wrap_app_handling_exceptions at 0x1052e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1074e7290>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1074e7290>>
          └ <fastapi.routing.APIRouter object at 0x1074e7290>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1052e1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1074f8860>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f94e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11891f810>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1074f9580>
          └ <function wrap_app_handling_exceptions at 0x1052e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1074f96c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189286...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1074f9580>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11891f810>
                     └ <function get_request_handler.<locals>.app at 0x1074f89a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1052e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 7, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1073f7380>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 7
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x1067cf380>
                     │             └ <services.database.DatabaseService object at 0x105403d50>
                     └ <services.price_service.PriceService object at 0x105403c90>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 195, in get_machines_needing_update
    threshold_date = today - datetime.timedelta(days=days_threshold)
                     │       │                       └ 7
                     │       └ <class 'datetime.datetime'>
                     └ datetime.datetime(2025, 4, 16, 12, 15, 39, 14076)

AttributeError: type object 'datetime.datetime' has no attribute 'timedelta'
2025-04-16 12:15:48 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6
2025-04-16 12:15:48 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6
2025-04-16 12:15:48 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://store.creality.com/products/falcon2-22w-laser-engraver-cutter
2025-04-16 12:15:50 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://store.creality.com/products/falcon2-22w-laser-engraver-cutter in 1.96 seconds
2025-04-16 12:15:50 | INFO     | scrapers.price_extractor:_extract_from_structured_data:91 - Extracted price 719.0 using JSON-LD offers array
2025-04-16 12:15:50 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6: 719.0
2025-04-16 12:15:51 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6
2025-04-16 12:17:42 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:17:42 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:17:42 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:17:42 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:17:45 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:17:45 | ERROR    | services.database:get_machines_needing_update:227 - Error in get_machines_needing_update: {'code': 'PGRST108', 'details': None, 'hint': "Verify that 'html_timestamp' is included in the 'select' query parameter.", 'message': "'html_timestamp' is not an embedded resource in this request"}
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x110d34ae0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10590b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x105968540>
    └ <uvicorn.server.Server object at 0x110d4c290>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1059685e0>
           │       │   └ <uvicorn.server.Server object at 0x110d4c290>
           │       └ <function run at 0x105154e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x110c967a0>
           │      └ <function Runner.run at 0x1051c0720>
           └ <asyncio.runners.Runner object at 0x110d09610>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x110d52810>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x110d09610>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x110d7fad0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111003410>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x110de6a10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x110d7fad0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111003410>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x111003410>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x110d2d150>
          └ <fastapi.applications.FastAPI object at 0x110de6a10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x110df93a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x110712050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x110d2d150>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x110df93a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x106c95760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x110712050>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x110712050>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x110d27cd0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x110712050>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x110712050>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x111002750>
          │                            │    └ <fastapi.routing.APIRouter object at 0x110de6fd0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x110d27cd0>
          └ <function wrap_app_handling_exceptions at 0x106ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x110df94e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x110de6fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x110df94e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x110de6fd0>>
          └ <fastapi.routing.APIRouter object at 0x110de6fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x110df94e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x106ae1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x110df94e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x110df8860>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x110df94e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1110033d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x110df9580>
          └ <function wrap_app_handling_exceptions at 0x106ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x110df96c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110034...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x110df9580>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1110033d0>
                     └ <function get_request_handler.<locals>.app at 0x110df89a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x106ae18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 7, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x110cf7380>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 7
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x1100cf380>
                     │             └ <services.database.DatabaseService object at 0x106d03b10>
                     └ <services.price_service.PriceService object at 0x106d03bd0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 211, in get_machines_needing_update
    response = query.execute()
               │     └ <function SyncQueryRequestBuilder.execute at 0x107e8c180>
               └ <postgrest._sync.request_builder.SyncSelectRequestBuilder object at 0x11100c550>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/postgrest/_sync/request_builder.py", line 78, in execute
    raise APIError(r.json())
          │        │ └ <function Response.json at 0x1071bb600>
          │        └ <Response [400 Bad Request]>
          └ <class 'postgrest.exceptions.APIError'>

postgrest.exceptions.APIError: {'code': 'PGRST108', 'details': None, 'hint': "Verify that 'html_timestamp' is included in the 'select' query parameter.", 'message': "'html_timestamp' is not an embedded resource in this request"}
2025-04-16 12:20:21 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:20:21 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:20:21 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:20:21 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:20:38 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:20:38 | ERROR    | services.database:get_machines_needing_update:267 - Error in get_machines_needing_update: 'APIResponse[~_ReturnT]' object has no attribute 'error'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x11113cae0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10386b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x103a00540>
    └ <uvicorn.server.Server object at 0x1038619d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x103a005e0>
           │       │   └ <uvicorn.server.Server object at 0x1038619d0>
           │       └ <function run at 0x1030b4e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1110967a0>
           │      └ <function Runner.run at 0x103120720>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x11112e9b0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1111e6d10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
          └ <fastapi.applications.FastAPI object at 0x1111e6d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11113e200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11113e200>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x104c95760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x112436dd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1111e72d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1111e72d0>>
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x104ae1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1111f8860>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x112436e10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f96c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437a...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x112436e10>
                     └ <function get_request_handler.<locals>.app at 0x1111f89a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x104ae18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 7, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1110f7380>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 7
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x1072cf380>
                     │             └ <services.database.DatabaseService object at 0x104ec78d0>
                     └ <services.price_service.PriceService object at 0x104ec7950>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 217, in get_machines_needing_update
    if response1.error:
       └ APIResponse[~_ReturnT](data=[], count=None)

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'APIResponse[~_ReturnT]' object has no attribute 'error'
2025-04-16 12:21:04 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:21:05 | ERROR    | services.database:get_machines_needing_update:267 - Error in get_machines_needing_update: 'APIResponse[~_ReturnT]' object has no attribute 'error'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x11113cae0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10386b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x103a00540>
    └ <uvicorn.server.Server object at 0x1038619d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x103a005e0>
           │       │   └ <uvicorn.server.Server object at 0x1038619d0>
           │       └ <function run at 0x1030b4e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1110967a0>
           │      └ <function Runner.run at 0x103120720>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x11112e9b0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1111e6d10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
          └ <fastapi.applications.FastAPI object at 0x1111e6d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1111f9440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1111f9440>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x104c95760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11111e050>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1111e72d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1111e72d0>>
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x104ae1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1111f8860>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11111ee90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f96c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437c...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x11111ee90>
                     └ <function get_request_handler.<locals>.app at 0x1111f89a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x104ae18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 7, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1110f7380>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 7
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x1072cf380>
                     │             └ <services.database.DatabaseService object at 0x104ec78d0>
                     └ <services.price_service.PriceService object at 0x104ec7950>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 217, in get_machines_needing_update
    if response1.error:
       └ APIResponse[~_ReturnT](data=[], count=None)

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'APIResponse[~_ReturnT]' object has no attribute 'error'
2025-04-16 12:21:08 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:21:08 | ERROR    | services.database:get_machines_needing_update:267 - Error in get_machines_needing_update: 'APIResponse[~_ReturnT]' object has no attribute 'error'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x11113cae0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10386b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x103a00540>
    └ <uvicorn.server.Server object at 0x1038619d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x103a005e0>
           │       │   └ <uvicorn.server.Server object at 0x1038619d0>
           │       └ <function run at 0x1030b4e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1110967a0>
           │      └ <function Runner.run at 0x103120720>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x11112e9b0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1111e6d10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
          └ <fastapi.applications.FastAPI object at 0x1111e6d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1111f9440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1111f9440>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x104c95760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x112436dd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1111e72d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1111e72d0>>
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x104ae1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1111f8860>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x112437a50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f96c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1110fb2...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x112437a50>
                     └ <function get_request_handler.<locals>.app at 0x1111f89a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x104ae18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 0, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1110f7380>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 0
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x1072cf380>
                     │             └ <services.database.DatabaseService object at 0x104ec78d0>
                     └ <services.price_service.PriceService object at 0x104ec7950>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 253, in get_machines_needing_update
    if response.error:
       └ APIResponse[~_ReturnT](data=[{'id': 'c23808f6-1760-4cad-b031-3c5eb3556d98', 'Machine Name': 'AlgoLaser Delta 40W Laser', 'Com...

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'APIResponse[~_ReturnT]' object has no attribute 'error'
2025-04-16 12:21:08 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:21:08 | ERROR    | services.database:get_machines_needing_update:267 - Error in get_machines_needing_update: 'APIResponse[~_ReturnT]' object has no attribute 'error'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x11113cae0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10386b2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x103a00540>
    └ <uvicorn.server.Server object at 0x1038619d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x103a005e0>
           │       │   └ <uvicorn.server.Server object at 0x1038619d0>
           │       └ <function run at 0x1030b4e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1110967a0>
           │      └ <function Runner.run at 0x103120720>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x11112e9b0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x11114c6d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1111e6d10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11117fdd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
          └ <fastapi.applications.FastAPI object at 0x1111e6d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11113e200>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1111306d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '31', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x11113e200>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x104c95760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x111130250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x111130250>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x112436b50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1111e72d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x111125ed0>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1111e72d0>>
          └ <fastapi.routing.APIRouter object at 0x1111e72d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x104ae1da0>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1111f8860>
          └ APIRoute(path='/api/v1/batch-configure', name='configure_batch_update', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f94e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x112437b10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
          └ <function wrap_app_handling_exceptions at 0x104ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1111f96c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x112437d...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1111f9580>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x112437b10>
                     └ <function get_request_handler.<locals>.app at 0x1111f89a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x104ae18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'days_threshold': 0, 'limit': 10}}
                 │         └ <function configure_batch_update at 0x1110f7380>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 227, in configure_batch_update
    machines = await price_service.db_service.get_machines_needing_update(days_threshold)
                     │             │          │                           └ 0
                     │             │          └ <function DatabaseService.get_machines_needing_update at 0x1072cf380>
                     │             └ <services.database.DatabaseService object at 0x104ec78d0>
                     └ <services.price_service.PriceService object at 0x104ec7950>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 253, in get_machines_needing_update
    if response.error:
       └ APIResponse[~_ReturnT](data=[{'id': 'c23808f6-1760-4cad-b031-3c5eb3556d98', 'Machine Name': 'AlgoLaser Delta 40W Laser', 'Com...

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'APIResponse[~_ReturnT]' object has no attribute 'error'
2025-04-16 12:22:52 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:22:52 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:22:52 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:22:52 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:22:55 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:22:56 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:23:02 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:23:02 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:23:05 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:23:05 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:23:08 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:23:08 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:23:08 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:23:08 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:23:12 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=100
2025-04-16 12:23:12 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:23:12 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=100
2025-04-16 12:23:12 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:23:14 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:23:15 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:23:15 | INFO     | api.routes:configure_batch_update:224 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:23:15 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:23:18 | INFO     | services.price_service:batch_update_machines:208 - Starting batch update for machines with threshold of 7 days and limit of none
2025-04-16 12:23:19 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:23:19 | INFO     | services.price_service:batch_update_machines:214 - No machines need price updates at this time
2025-04-16 12:26:27 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:26:27 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:26:27 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:26:27 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:26:35 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:26:35 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:26:37 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:26:38 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:26:41 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:26:41 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:26:42 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:26:42 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:26:49 | INFO     | api.routes:batch_update_machines:115 - Batch update request with days=0, limit=10, machine_ids=['c23808f6-1760-4cad-b031-3c5eb3556d98', 'ff1f2676-9e67-47bf-9bb0-7152bace66b5', 'ef4f7a07-a068-4afc-b550-22d101c6e68b', 'e4093bf6-7a1c-4325-9094-8c572a307459', 'b2956e47-a9da-4359-8c88-42ca9a8740e7']
2025-04-16 12:26:49 | INFO     | services.price_service:batch_update_machines:210 - Starting batch update with days_threshold=0, limit=10, machine_ids=10
2025-04-16 12:26:49 | INFO     | services.price_service:batch_update_machines:214 - Using 10 provided machine IDs for batch update
2025-04-16 12:26:49 | INFO     | services.database:get_machines_needing_update:252 - Found 10 machines for price update
2025-04-16 12:26:49 | INFO     | services.price_service:batch_update_machines:225 - Starting batch update for 10 machines
2025-04-16 12:26:49 | ERROR    | services.database:create_batch:327 - Error creating batch: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'completed_at' column of 'batches' in the schema cache"}
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x110030b80>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1041cb2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x104228540>
    └ <uvicorn.server.Server object at 0x110037ad0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1042285e0>
           │       │   └ <uvicorn.server.Server object at 0x110037ad0>
           │       └ <function run at 0x103a14e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x107ef25c0>
           │      └ <function Runner.run at 0x103a80720>
           └ <asyncio.runners.Runner object at 0x110037bd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x11004e8e0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x110037bd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11007b750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c650>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1100e2790>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11007b750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c650>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c650>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1100e3410>
          └ <fastapi.applications.FastAPI object at 0x1100e2790>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1100f9260>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1100e3950>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1100e3410>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '437', 'sec-ch-ua-platform': '"macOS"', 'use...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1100f9260>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x1050f5760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1100e3950>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1100e3950>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10753c290>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1100e3950>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1100e3950>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x11030cbd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1100e2d50>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10753c290>
          └ <function wrap_app_handling_exceptions at 0x1050407c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1100f9440>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1100e2d50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1100f9440>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1100e2d50>>
          └ <fastapi.routing.APIRouter object at 0x1100e2d50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1100f9440>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x105041da0>
          └ APIRoute(path='/api/v1/batch-update', name='batch_update_machines', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1100f9440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1100f82c0>
          └ APIRoute(path='/api/v1/batch-update', name='batch_update_machines', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1100f9440>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x11030ccd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1100f94e0>
          └ <function wrap_app_handling_exceptions at 0x1050407c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1100f9620>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1100f94e0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 74, in app
    await response(scope, receive, send)
          │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1100f9620>
          │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x11030c6...
          │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.responses.JSONResponse object at 0x11030d810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/responses.py", line 159, in __call__
    await self.background()
          │    └ <fastapi.background.BackgroundTasks object at 0x11030fb10>
          └ <starlette.responses.JSONResponse object at 0x11030d810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/background.py", line 41, in __call__
    await task()
          └ <starlette.background.BackgroundTask object at 0x11030e5d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/background.py", line 26, in __call__
    await self.func(*self.args, **self.kwargs)
          │    │     │    │       │    └ {}
          │    │     │    │       └ <starlette.background.BackgroundTask object at 0x11030e5d0>
          │    │     │    └ (0, 10, ['c23808f6-1760-4cad-b031-3c5eb3556d98', 'ff1f2676-9e67-47bf-9bb0-7152bace66b5', 'ef4f7a07-a068-4afc-b550-22d101c6e68...
          │    │     └ <starlette.background.BackgroundTask object at 0x11030e5d0>
          │    └ <function _process_batch_update at 0x107f56ac0>
          └ <starlette.background.BackgroundTask object at 0x11030e5d0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 218, in _process_batch_update
    await price_service.batch_update_machines(days_threshold, limit=limit, machine_ids=machine_ids)
          │             │                     │                     │                  └ ['c23808f6-1760-4cad-b031-3c5eb3556d98', 'ff1f2676-9e67-47bf-9bb0-7152bace66b5', 'ef4f7a07-a068-4afc-b550-22d101c6e68b', 'e40...
          │             │                     │                     └ 10
          │             │                     └ 0
          │             └ <function PriceService.batch_update_machines at 0x107f55b20>
          └ <services.price_service.PriceService object at 0x105226ed0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 228, in batch_update_machines
    batch_id = await self.db_service.create_batch(
                     │    │          └ <function DatabaseService.create_batch at 0x106bdb4c0>
                     │    └ <services.database.DatabaseService object at 0x105226c90>
                     └ <services.price_service.PriceService object at 0x105226ed0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 318, in create_batch
    }).execute()

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/postgrest/_sync/request_builder.py", line 78, in execute
    raise APIError(r.json())
          │        │ └ <function Response.json at 0x1056db600>
          │        └ <Response [400 Bad Request]>
          └ <class 'postgrest.exceptions.APIError'>

postgrest.exceptions.APIError: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'completed_at' column of 'batches' in the schema cache"}
2025-04-16 12:26:49 | ERROR    | services.price_service:batch_update_machines:237 - Failed to create batch record
2025-04-16 12:31:50 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:31:50 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:31:50 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:31:50 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:31:54 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:31:55 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:31:56 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:31:56 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:31:59 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:31:59 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:31:59 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:31:59 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:32:01 | INFO     | api.routes:batch_update_machines:115 - Batch update request with days=0, limit=10, machine_ids=['c23808f6-1760-4cad-b031-3c5eb3556d98', 'ff1f2676-9e67-47bf-9bb0-7152bace66b5', 'ef4f7a07-a068-4afc-b550-22d101c6e68b', 'e4093bf6-7a1c-4325-9094-8c572a307459', 'b2956e47-a9da-4359-8c88-42ca9a8740e7']
2025-04-16 12:32:01 | INFO     | services.price_service:batch_update_machines:210 - Starting batch update with days_threshold=0, limit=10, machine_ids=10
2025-04-16 12:32:01 | INFO     | services.price_service:batch_update_machines:214 - Using 10 provided machine IDs for batch update
2025-04-16 12:32:01 | INFO     | services.database:get_machines_needing_update:252 - Found 10 machines for price update
2025-04-16 12:32:01 | INFO     | services.price_service:batch_update_machines:225 - Starting batch update for 10 machines
2025-04-16 12:32:02 | INFO     | services.database:create_batch:322 - Created batch record with ID b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 12:32:02 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-16 12:32:02 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742
2025-04-16 12:32:02 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742 in 0.83 seconds
2025-04-16 12:32:03 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 169.0 using JSON-LD
2025-04-16 12:32:03 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: 169.0
2025-04-16 12:32:03 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-16 12:32:03 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:03 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-16 12:32:03 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/mira-s
2025-04-16 12:32:03 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/mira-s in 0.53 seconds
2025-04-16 12:32:03 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 6995.0 using JSON-LD
2025-04-16 12:32:03 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836: 6995.0
2025-04-16 12:32:04 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-16 12:32:04 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:04 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-16 12:32:04 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area
2025-04-16 12:32:05 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area in 0.85 seconds
2025-04-16 12:32:05 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:157 - Extracted price 259900.0 using selector '[data-price]'
2025-04-16 12:32:05 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403: 259900.0
2025-04-16 12:32:05 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-16 12:32:05 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:05 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-16 12:32:05 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-16 12:32:06 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum in 0.91 seconds
2025-04-16 12:32:06 | INFO     | scrapers.price_extractor:_extract_from_structured_data:91 - Extracted price 2199.99 using JSON-LD offers array
2025-04-16 12:32:06 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine b2956e47-a9da-4359-8c88-42ca9a8740e7: 2199.99
2025-04-16 12:32:07 | INFO     | services.database:add_price_history:159 - Added price history entry for machine b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-16 12:32:07 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine b2956e47-a9da-4359-8c88-42ca9a8740e7: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:07 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 12:32:07 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 12:32:08 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.61 seconds
2025-04-16 12:32:08 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 1299.0 using JSON-LD
2025-04-16 12:32:08 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine c23808f6-1760-4cad-b031-3c5eb3556d98: 1299.0
2025-04-16 12:32:08 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 12:32:08 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine c23808f6-1760-4cad-b031-3c5eb3556d98: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:08 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-16 12:32:08 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/nova-s
2025-04-16 12:32:08 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/nova-s in 0.06 seconds
2025-04-16 12:32:08 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 17995.0 using JSON-LD
2025-04-16 12:32:08 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: 17995.0
2025-04-16 12:32:08 | INFO     | services.database:add_price_history:159 - Added price history entry for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-16 12:32:09 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:09 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-16 12:32:09 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-16 12:32:10 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 in 1.18 seconds
2025-04-16 12:32:10 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 339.0 using JSON-LD
2025-04-16 12:32:10 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine e4093bf6-7a1c-4325-9094-8c572a307459: 339.0
2025-04-16 12:32:10 | INFO     | services.database:add_price_history:159 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-16 12:32:11 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine e4093bf6-7a1c-4325-9094-8c572a307459: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:11 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-16 12:32:11 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/supernova-s
2025-04-16 12:32:11 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/supernova-s in 0.09 seconds
2025-04-16 12:32:11 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 25495.0 using JSON-LD
2025-04-16 12:32:11 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine ef4f7a07-a068-4afc-b550-22d101c6e68b: 25495.0
2025-04-16 12:32:11 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-16 12:32:11 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine ef4f7a07-a068-4afc-b550-22d101c6e68b: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:11 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 12:32:11 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-16 12:32:12 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser in 0.53 seconds
2025-04-16 12:32:12 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 649.0 using JSON-LD
2025-04-16 12:32:12 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16: 649.0
2025-04-16 12:32:12 | INFO     | services.database:add_price_history:159 - Added price history entry for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 12:32:12 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:12 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-16 12:32:12 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/mira-s
2025-04-16 12:32:13 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/mira-s in 0.06 seconds
2025-04-16 12:32:13 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 6995.0 using JSON-LD
2025-04-16 12:32:13 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5: 6995.0
2025-04-16 12:32:13 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-16 12:32:13 | ERROR    | services.database:add_batch_result:427 - Error adding batch result for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'created_at' column of 'batch_results' in the schema cache"}
2025-04-16 12:32:13 | INFO     | services.database:complete_batch:353 - Marked batch b3cc1c8c-7375-4d37-b16d-8040a807c969 as completed
2025-04-16 12:32:13 | INFO     | services.price_service:batch_update_machines:274 - Batch update completed. Results: 10 successful, 0 failed
2025-04-16 12:34:27 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:34:27 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:34:27 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:34:27 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:34:32 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:34:32 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:34:34 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:34:35 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:34:37 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:34:38 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:34:38 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:34:38 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:34:38 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 12:34:38 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 12:34:40 | INFO     | api.routes:batch_update_machines:115 - Batch update request with days=0, limit=10, machine_ids=['c23808f6-1760-4cad-b031-3c5eb3556d98', 'ff1f2676-9e67-47bf-9bb0-7152bace66b5', 'ef4f7a07-a068-4afc-b550-22d101c6e68b', 'e4093bf6-7a1c-4325-9094-8c572a307459', 'b2956e47-a9da-4359-8c88-42ca9a8740e7']
2025-04-16 12:34:40 | INFO     | services.price_service:batch_update_machines:210 - Starting batch update with days_threshold=0, limit=10, machine_ids=10
2025-04-16 12:34:40 | INFO     | services.price_service:batch_update_machines:214 - Using 10 provided machine IDs for batch update
2025-04-16 12:34:40 | INFO     | services.database:get_machines_needing_update:252 - Found 10 machines for price update
2025-04-16 12:34:40 | INFO     | services.price_service:batch_update_machines:225 - Starting batch update for 10 machines
2025-04-16 12:34:40 | INFO     | services.database:create_batch:322 - Created batch record with ID 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:40 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-16 12:34:41 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742
2025-04-16 12:34:41 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742 in 0.76 seconds
2025-04-16 12:34:41 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 169.0 using JSON-LD
2025-04-16 12:34:41 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: 169.0
2025-04-16 12:34:41 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-16 12:34:42 | INFO     | services.database:add_batch_result:424 - Added result for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:42 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-16 12:34:42 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/mira-s
2025-04-16 12:34:42 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/mira-s in 0.20 seconds
2025-04-16 12:34:42 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 6995.0 using JSON-LD
2025-04-16 12:34:42 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836: 6995.0
2025-04-16 12:34:42 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-16 12:34:42 | INFO     | services.database:add_batch_result:424 - Added result for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836 to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:42 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-16 12:34:43 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area
2025-04-16 12:34:43 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area in 0.57 seconds
2025-04-16 12:34:43 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:157 - Extracted price 259900.0 using selector '[data-price]'
2025-04-16 12:34:43 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403: 259900.0
2025-04-16 12:34:43 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-16 12:34:44 | INFO     | services.database:add_batch_result:424 - Added result for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403 to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:44 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-16 12:34:44 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-16 12:34:44 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum in 0.17 seconds
2025-04-16 12:34:44 | INFO     | scrapers.price_extractor:_extract_from_structured_data:91 - Extracted price 2199.99 using JSON-LD offers array
2025-04-16 12:34:44 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine b2956e47-a9da-4359-8c88-42ca9a8740e7: 2199.99
2025-04-16 12:34:44 | INFO     | services.database:add_price_history:159 - Added price history entry for machine b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-16 12:34:45 | INFO     | services.database:add_batch_result:424 - Added result for machine b2956e47-a9da-4359-8c88-42ca9a8740e7 to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:45 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 12:34:45 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 12:34:45 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.17 seconds
2025-04-16 12:34:45 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 1299.0 using JSON-LD
2025-04-16 12:34:45 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine c23808f6-1760-4cad-b031-3c5eb3556d98: 1299.0
2025-04-16 12:34:45 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 12:34:46 | INFO     | services.database:add_batch_result:424 - Added result for machine c23808f6-1760-4cad-b031-3c5eb3556d98 to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:46 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-16 12:34:46 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/nova-s
2025-04-16 12:34:46 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/nova-s in 0.06 seconds
2025-04-16 12:34:46 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 17995.0 using JSON-LD
2025-04-16 12:34:46 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: 17995.0
2025-04-16 12:34:46 | INFO     | services.database:add_price_history:159 - Added price history entry for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-16 12:34:46 | INFO     | services.database:add_batch_result:424 - Added result for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:46 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-16 12:34:47 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-16 12:34:47 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 in 0.15 seconds
2025-04-16 12:34:47 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 339.0 using JSON-LD
2025-04-16 12:34:47 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine e4093bf6-7a1c-4325-9094-8c572a307459: 339.0
2025-04-16 12:34:47 | INFO     | services.database:add_price_history:159 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-16 12:34:47 | INFO     | services.database:add_batch_result:424 - Added result for machine e4093bf6-7a1c-4325-9094-8c572a307459 to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:47 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-16 12:34:47 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/supernova-s
2025-04-16 12:34:47 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/supernova-s in 0.11 seconds
2025-04-16 12:34:47 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 25495.0 using JSON-LD
2025-04-16 12:34:47 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine ef4f7a07-a068-4afc-b550-22d101c6e68b: 25495.0
2025-04-16 12:34:48 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-16 12:34:48 | INFO     | services.database:add_batch_result:424 - Added result for machine ef4f7a07-a068-4afc-b550-22d101c6e68b to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:48 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 12:34:48 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-16 12:34:49 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser in 0.82 seconds
2025-04-16 12:34:49 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 649.0 using JSON-LD
2025-04-16 12:34:49 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16: 649.0
2025-04-16 12:34:49 | INFO     | services.database:add_price_history:159 - Added price history entry for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 12:34:49 | INFO     | services.database:add_batch_result:424 - Added result for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16 to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:49 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-16 12:34:50 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/mira-s
2025-04-16 12:34:50 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/mira-s in 0.06 seconds
2025-04-16 12:34:50 | INFO     | scrapers.price_extractor:_extract_from_structured_data:82 - Extracted price 6995.0 using JSON-LD
2025-04-16 12:34:50 | INFO     | services.price_service:update_machine_price:116 - Price unchanged for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5: 6995.0
2025-04-16 12:34:50 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-16 12:34:50 | INFO     | services.database:add_batch_result:424 - Added result for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5 to batch 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:34:50 | INFO     | services.database:complete_batch:353 - Marked batch 1fcd5523-b602-40ec-a4fd-19a177a5721c as completed
2025-04-16 12:34:50 | INFO     | services.price_service:batch_update_machines:274 - Batch update completed. Results: 10 successful, 0 failed
2025-04-16 12:40:21 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:40:22 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:40:29 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:40:29 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:40:47 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:40:47 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:40:47 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:40:47 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:40:57 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:40:58 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:40:58 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 12:40:58 | ERROR    | api.routes:get_batches:308 - Error fetching batch jobs: object APIResponse[~_ReturnT] can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x108321080>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1059cb2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x105a28540>
    └ <uvicorn.server.Server object at 0x1083313d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x105a285e0>
           │       │   └ <uvicorn.server.Server object at 0x1083313d0>
           │       └ <function run at 0x105214e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10827a6b0>
           │      └ <function Runner.run at 0x105280720>
           └ <asyncio.runners.Runner object at 0x108313090>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x10833e810>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x108313090>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x108374ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a6310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x107e07d10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x108374ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a6310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a6310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10831a1d0>
          └ <fastapi.applications.FastAPI object at 0x107e07d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1083e5b20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x108310250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10831a1d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'user-agent': 'Mozilla/5.0 (M...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1083e5b20>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x1068f5760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x108310250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x108310250>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1083331d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x108310250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x108310250>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x107e2cc10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1083e0550>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1083331d0>
          └ <function wrap_app_handling_exceptions at 0x1068407c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1083e0550>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1083e0550>>
          └ <fastapi.routing.APIRouter object at 0x1083e0550>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x106841da0>
          └ APIRoute(path='/api/v1/batches', name='get_batches', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1083e4f40>
          └ APIRoute(path='/api/v1/batches', name='get_batches', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1082f4b50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1083e5d00>
          └ <function wrap_app_handling_exceptions at 0x1068407c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e65c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1084a63...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1083e5d00>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1082f4b50>
                     └ <function get_request_handler.<locals>.app at 0x1083e4ea0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1068418a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {}
                 │         └ <function get_batches at 0x1082e76a0>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[], dependencies=[], security_requ...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 284, in get_batches
    response = await price_service.db_service.supabase.table("batches") \
                     │             │          │        └ <function SyncClient.table at 0x107abe7a0>
                     │             │          └ <supabase._sync.client.SyncClient object at 0x106a275d0>
                     │             └ <services.database.DatabaseService object at 0x106a27650>
                     └ <services.price_service.PriceService object at 0x106a27590>

TypeError: object APIResponse[~_ReturnT] can't be used in 'await' expression
2025-04-16 12:44:21 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:44:21 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:44:21 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 12:44:21 | ERROR    | api.routes:get_batches:308 - Error fetching batch jobs: object APIResponse[~_ReturnT] can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x108321080>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1059cb2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x105a28540>
    └ <uvicorn.server.Server object at 0x1083313d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x105a285e0>
           │       │   └ <uvicorn.server.Server object at 0x1083313d0>
           │       └ <function run at 0x105214e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10827a6b0>
           │      └ <function Runner.run at 0x105280720>
           └ <asyncio.runners.Runner object at 0x108313090>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x10833e810>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x108313090>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x108374ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x107e07d10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x108374ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10831a1d0>
          └ <fastapi.applications.FastAPI object at 0x107e07d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1083e68e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x108310250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10831a1d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'user-agent': 'Mozilla/5.0 (M...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1083e68e0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x1068f5760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x108310250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x108310250>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1083331d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x108310250>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x108310250>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1084b3e50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1083e0550>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1083331d0>
          └ <function wrap_app_handling_exceptions at 0x1068407c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1083e0550>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1083e0550>>
          └ <fastapi.routing.APIRouter object at 0x1083e0550>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x106841da0>
          └ APIRoute(path='/api/v1/batches', name='get_batches', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1083e4f40>
          └ APIRoute(path='/api/v1/batches', name='get_batches', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e5c60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1084b3610>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1083e5d00>
          └ <function wrap_app_handling_exceptions at 0x1068407c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1083e6480>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1085bfc...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1083e5d00>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1084b3610>
                     └ <function get_request_handler.<locals>.app at 0x1083e4ea0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1068418a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {}
                 │         └ <function get_batches at 0x1082e76a0>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[], dependencies=[], security_requ...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 284, in get_batches
    response = await price_service.db_service.supabase.table("batches") \
                     │             │          │        └ <function SyncClient.table at 0x107abe7a0>
                     │             │          └ <supabase._sync.client.SyncClient object at 0x106a275d0>
                     │             └ <services.database.DatabaseService object at 0x106a27650>
                     └ <services.price_service.PriceService object at 0x106a27590>

TypeError: object APIResponse[~_ReturnT] can't be used in 'await' expression
2025-04-16 12:44:36 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:44:36 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:44:36 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:44:36 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:44:43 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 12:44:44 | INFO     | api.routes:get_batches:298 - Found 2 batch jobs
2025-04-16 12:44:44 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '1fcd5523-b602-40ec-a4fd-19a177a5721c', 'status': 'completed', 'start_time': '2025-04-16T12:34:40.860273+00:00', 'end_time': '2025-04-16T12:34:50.497817+00:00', 'total_machines': 10, 'days_threshold': 0}
2025-04-16 12:44:44 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 12:44:44 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 12:44:56 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:44:56 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:44:56 | ERROR    | services.database:get_batch_stats:571 - Error getting batch stats for batch 1fcd5523-b602-40ec-a4fd-19a177a5721c: 'SyncSelectRequestBuilder' object has no attribute 'group'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x111031080>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x104ca32e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x104e00540>
    └ <uvicorn.server.Server object at 0x11035bf90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x104e005e0>
           │       │   └ <uvicorn.server.Server object at 0x11035bf90>
           │       └ <function run at 0x104388e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x110f8a6b0>
           │      └ <function Runner.run at 0x1043f0720>
           └ <asyncio.runners.Runner object at 0x111044fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x11104e810>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x111044fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111084fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a5350>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1110cffd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111084fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a5350>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a5350>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11101ab90>
          └ <fastapi.applications.FastAPI object at 0x1110cffd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1110f59e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11101ab90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'user-agent': 'Mozilla/5.0 (M...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1110f59e0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x107195760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11101bc10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1123a4dd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1110f05d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11101bc10>
          └ <function wrap_app_handling_exceptions at 0x1070e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1110f05d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1110f05d0>>
          └ <fastapi.routing.APIRouter object at 0x1110f05d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1070e1da0>
          └ APIRoute(path='/api/v1/batch-results/{batch_id}', name='get_batch_results', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1110f4b80>
          └ APIRoute(path='/api/v1/batch-results/{batch_id}', name='get_batch_results', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1123a5590>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1110f5b20>
          └ <function wrap_app_handling_exceptions at 0x1070e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5d00>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123a53...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1110f5b20>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1123a5590>
                     └ <function get_request_handler.<locals>.app at 0x1110f4c20>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1070e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'batch_id': '1fcd5523-b602-40ec-a4fd-19a177a5721c'}
                 │         └ <function get_batch_results at 0x110ff6020>
                 └ Dependant(path_params=[ModelField(field_info=Path(PydanticUndefined), name='batch_id', mode='validation')], query_params=[], ...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 195, in get_batch_results
    batch_data = await price_service.get_batch_results(batch_id)
                       │             │                 └ '1fcd5523-b602-40ec-a4fd-19a177a5721c'
                       │             └ <function PriceService.get_batch_results at 0x110ff5c60>
                       └ <services.price_service.PriceService object at 0x1072038d0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 304, in get_batch_results
    stats = await self.db_service.get_batch_stats(batch_id)
                  │    │          │               └ '1fcd5523-b602-40ec-a4fd-19a177a5721c'
                  │    │          └ <function DatabaseService.get_batch_stats at 0x1104cf740>
                  │    └ <services.database.DatabaseService object at 0x107203990>
                  └ <services.price_service.PriceService object at 0x1072038d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 518, in get_batch_stats
    .group("success") \

AttributeError: 'SyncSelectRequestBuilder' object has no attribute 'group'
2025-04-16 12:44:56 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:44:56 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:44:56 | ERROR    | services.database:get_batch_stats:571 - Error getting batch stats for batch 1fcd5523-b602-40ec-a4fd-19a177a5721c: 'SyncSelectRequestBuilder' object has no attribute 'group'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x111031080>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x104ca32e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x104e00540>
    └ <uvicorn.server.Server object at 0x11035bf90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x104e005e0>
           │       │   └ <uvicorn.server.Server object at 0x11035bf90>
           │       └ <function run at 0x104388e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x110f8a6b0>
           │      └ <function Runner.run at 0x1043f0720>
           └ <asyncio.runners.Runner object at 0x111044fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x11104e810>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x111044fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111084fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c2610>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1110cffd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x111084fd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c2610>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c2610>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11101ab90>
          └ <fastapi.applications.FastAPI object at 0x1110cffd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1110f5b20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x11101ab90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'user-agent': 'Mozilla/5.0 (M...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1110f5b20>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x107195760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11101bc10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x11101bd90>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1123c2290>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1110f05d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11101bc10>
          └ <function wrap_app_handling_exceptions at 0x1070e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5d00>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1110f05d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5d00>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1110f05d0>>
          └ <fastapi.routing.APIRouter object at 0x1110f05d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5d00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1070e1da0>
          └ APIRoute(path='/api/v1/batch-results/{batch_id}', name='get_batch_results', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1110f4b80>
          └ APIRoute(path='/api/v1/batch-results/{batch_id}', name='get_batch_results', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1110f5d00>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1123c38d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1110f6a20>
          └ <function wrap_app_handling_exceptions at 0x1070e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x11245a7a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1123c26...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1110f6a20>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1123c38d0>
                     └ <function get_request_handler.<locals>.app at 0x1110f4c20>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1070e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'batch_id': '1fcd5523-b602-40ec-a4fd-19a177a5721c'}
                 │         └ <function get_batch_results at 0x110ff6020>
                 └ Dependant(path_params=[ModelField(field_info=Path(PydanticUndefined), name='batch_id', mode='validation')], query_params=[], ...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 195, in get_batch_results
    batch_data = await price_service.get_batch_results(batch_id)
                       │             │                 └ '1fcd5523-b602-40ec-a4fd-19a177a5721c'
                       │             └ <function PriceService.get_batch_results at 0x110ff5c60>
                       └ <services.price_service.PriceService object at 0x1072038d0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 304, in get_batch_results
    stats = await self.db_service.get_batch_stats(batch_id)
                  │    │          │               └ '1fcd5523-b602-40ec-a4fd-19a177a5721c'
                  │    │          └ <function DatabaseService.get_batch_stats at 0x1104cf740>
                  │    └ <services.database.DatabaseService object at 0x107203990>
                  └ <services.price_service.PriceService object at 0x1072038d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/database.py", line 518, in get_batch_stats
    .group("success") \

AttributeError: 'SyncSelectRequestBuilder' object has no attribute 'group'
2025-04-16 12:48:39 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 12:48:39 | INFO     | scrapers.price_extractor:__init__:16 - Price extractor initialized
2025-04-16 12:48:39 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 12:48:39 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 12:48:50 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:48:50 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:48:51 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 12:48:51 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 15:29:50 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 15:29:50 | INFO     | api.routes:get_batches:298 - Found 2 batch jobs
2025-04-16 15:29:50 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '1fcd5523-b602-40ec-a4fd-19a177a5721c', 'status': 'completed', 'start_time': '2025-04-16T12:34:40.860273+00:00', 'end_time': '2025-04-16T12:34:50.497817+00:00', 'total_machines': 10, 'days_threshold': 0}
2025-04-16 15:29:50 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 15:29:51 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 15:29:59 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:29:59 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:29:59 | WARNING  | services.database:get_batch_results:476 - No results found for batch b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:29:59 | WARNING  | services.price_service:get_batch_results:300 - No batch data found for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:29:59 | WARNING  | api.routes:get_batch_results:198 - No batch results found for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:29:59 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:29:59 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:30:00 | WARNING  | services.database:get_batch_results:476 - No results found for batch b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:30:00 | WARNING  | services.price_service:get_batch_results:300 - No batch data found for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:30:00 | WARNING  | api.routes:get_batch_results:198 - No batch results found for batch_id: b3cc1c8c-7375-4d37-b16d-8040a807c969
2025-04-16 15:30:07 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 15:30:07 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 15:30:08 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 15:30:08 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 1fcd5523-b602-40ec-a4fd-19a177a5721c
2025-04-16 15:40:22 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 15:40:22 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 15:40:22 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 15:40:22 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 15:43:19 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 15:43:20 | INFO     | api.routes:get_batches:292 - No batch jobs found in database
2025-04-16 15:43:20 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 15:43:20 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 15:43:36 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 15:43:36 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 15:43:40 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 15:43:41 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 15:43:41 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=10
2025-04-16 15:43:41 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 15:44:01 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=25
2025-04-16 15:44:01 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 15:44:01 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=25
2025-04-16 15:44:01 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 15:44:03 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=50
2025-04-16 15:44:03 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 15:44:04 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=0, limit=50
2025-04-16 15:44:04 | INFO     | services.database:get_machines_needing_update:252 - Found 150 machines for price update
2025-04-16 15:44:08 | INFO     | api.routes:batch_update_machines:115 - Batch update request with days=0, limit=50, machine_ids=['c23808f6-1760-4cad-b031-3c5eb3556d98', 'ff1f2676-9e67-47bf-9bb0-7152bace66b5', 'ef4f7a07-a068-4afc-b550-22d101c6e68b', 'e4093bf6-7a1c-4325-9094-8c572a307459', 'b2956e47-a9da-4359-8c88-42ca9a8740e7']
2025-04-16 15:44:08 | INFO     | services.price_service:batch_update_machines:210 - Starting batch update with days_threshold=0, limit=50, machine_ids=50
2025-04-16 15:44:08 | INFO     | services.price_service:batch_update_machines:214 - Using 50 provided machine IDs for batch update
2025-04-16 15:44:08 | INFO     | services.database:get_machines_needing_update:252 - Found 50 machines for price update
2025-04-16 15:44:08 | INFO     | services.price_service:batch_update_machines:225 - Starting batch update for 50 machines
2025-04-16 15:44:08 | INFO     | services.database:create_batch:303 - Creating new batch with ID 2e001700-5ff3-4f7f-a8da-59e2dd133d43 for 50 machines
2025-04-16 15:44:08 | INFO     | services.database:create_batch:333 - Successfully created batch record with ID 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:08 | INFO     | services.database:create_batch:343 - Verified batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43 exists in database
2025-04-16 15:44:08 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:44:08 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:44:09 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.89 seconds
2025-04-16 15:44:09 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:44:10 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:10 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:44:10 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:44:10 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:44:10 | INFO     | services.database:add_batch_result:448 - Added result for machine c23808f6-1760-4cad-b031-3c5eb3556d98 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:10 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-16 15:44:10 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/mira-s
2025-04-16 15:44:11 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/mira-s in 0.31 seconds
2025-04-16 15:44:11 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/mira-s
2025-04-16 15:44:11 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:11 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/mira-s using any method
2025-04-16 15:44:11 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5 at URL: https://aeonlaser.us/mira-s
2025-04-16 15:44:11 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-16 15:44:11 | INFO     | services.database:add_batch_result:448 - Added result for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:11 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-16 15:44:11 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/supernova-s
2025-04-16 15:44:11 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/supernova-s in 0.07 seconds
2025-04-16 15:44:11 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/supernova-s
2025-04-16 15:44:12 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:12 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/supernova-s using any method
2025-04-16 15:44:12 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine ef4f7a07-a068-4afc-b550-22d101c6e68b at URL: https://aeonlaser.us/supernova-s
2025-04-16 15:44:12 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-16 15:44:12 | INFO     | services.database:add_batch_result:448 - Added result for machine ef4f7a07-a068-4afc-b550-22d101c6e68b to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:12 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-16 15:44:12 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-16 15:44:13 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 in 0.55 seconds
2025-04-16 15:44:13 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-16 15:44:13 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:13 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 using any method
2025-04-16 15:44:13 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine e4093bf6-7a1c-4325-9094-8c572a307459 at URL: https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-16 15:44:13 | INFO     | services.database:add_price_history:159 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-16 15:44:14 | INFO     | services.database:add_batch_result:448 - Added result for machine e4093bf6-7a1c-4325-9094-8c572a307459 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:14 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-16 15:44:14 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-16 15:44:15 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum in 0.87 seconds
2025-04-16 15:44:15 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-16 15:44:15 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:15 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum using any method
2025-04-16 15:44:15 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine b2956e47-a9da-4359-8c88-42ca9a8740e7 at URL: https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-16 15:44:15 | INFO     | services.database:add_price_history:159 - Added price history entry for machine b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-16 15:44:15 | INFO     | services.database:add_batch_result:448 - Added result for machine b2956e47-a9da-4359-8c88-42ca9a8740e7 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:15 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 15:44:16 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-16 15:44:16 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser in 0.66 seconds
2025-04-16 15:44:16 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-16 15:44:17 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:17 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser using any method
2025-04-16 15:44:17 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16 at URL: https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-16 15:44:17 | INFO     | services.database:add_price_history:159 - Added price history entry for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 15:44:17 | INFO     | services.database:add_batch_result:448 - Added result for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:17 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-16 15:44:17 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742
2025-04-16 15:44:18 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742 in 0.63 seconds
2025-04-16 15:44:18 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742
2025-04-16 15:44:18 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:18 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742 using any method
2025-04-16 15:44:18 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c at URL: https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742
2025-04-16 15:44:18 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-16 15:44:19 | INFO     | services.database:add_batch_result:448 - Added result for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:19 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-16 15:44:19 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/mira-s
2025-04-16 15:44:19 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/mira-s in 0.06 seconds
2025-04-16 15:44:19 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/mira-s
2025-04-16 15:44:19 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:19 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/mira-s using any method
2025-04-16 15:44:19 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836 at URL: https://aeonlaser.us/mira-s
2025-04-16 15:44:19 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-16 15:44:19 | INFO     | services.database:add_batch_result:448 - Added result for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:19 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-16 15:44:19 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/nova-s
2025-04-16 15:44:19 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/nova-s in 0.06 seconds
2025-04-16 15:44:19 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/nova-s
2025-04-16 15:44:19 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:19 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/nova-s using any method
2025-04-16 15:44:19 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f at URL: https://aeonlaser.us/nova-s
2025-04-16 15:44:20 | INFO     | services.database:add_price_history:159 - Added price history entry for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-16 15:44:20 | INFO     | services.database:add_batch_result:448 - Added result for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:20 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-16 15:44:20 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area
2025-04-16 15:44:21 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area in 0.88 seconds
2025-04-16 15:44:21 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area
2025-04-16 15:44:21 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:21 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area using any method
2025-04-16 15:44:21 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403 at URL: https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area
2025-04-16 15:44:21 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-16 15:44:22 | INFO     | services.database:add_batch_result:448 - Added result for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:22 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-16 15:44:22 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:22 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc in 0.45 seconds
2025-04-16 15:44:22 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:22 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:22 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc using any method
2025-04-16 15:44:22 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93 at URL: https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:23 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-16 15:44:23 | INFO     | services.database:add_batch_result:448 - Added result for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:23 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 103db02f-7852-41f8-b297-162d479eaa39
2025-04-16 15:44:23 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc
2025-04-16 15:44:23 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc in 0.11 seconds
2025-04-16 15:44:23 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc
2025-04-16 15:44:23 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:23 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc using any method
2025-04-16 15:44:23 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 103db02f-7852-41f8-b297-162d479eaa39 at URL: https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc
2025-04-16 15:44:23 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 103db02f-7852-41f8-b297-162d479eaa39
2025-04-16 15:44:24 | INFO     | services.database:add_batch_result:448 - Added result for machine 103db02f-7852-41f8-b297-162d479eaa39 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:24 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-16 15:44:24 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver
2025-04-16 15:44:25 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver in 0.77 seconds
2025-04-16 15:44:25 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver
2025-04-16 15:44:25 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:25 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver using any method
2025-04-16 15:44:25 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine ebd7976d-9fa0-4142-84cf-065d7adcb870 at URL: https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver
2025-04-16 15:44:25 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-16 15:44:25 | INFO     | services.database:add_batch_result:448 - Added result for machine ebd7976d-9fa0-4142-84cf-065d7adcb870 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:25 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 58673ae1-b44e-4bc0-8d01-ce4878a44c86
2025-04-16 15:44:25 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/g6-split-30w-60w-100w-fiber-laser-marking-engraving-machine-1?ref=NMV3sU0i
2025-04-16 15:44:26 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/g6-split-30w-60w-100w-fiber-laser-marking-engraving-machine-1?ref=NMV3sU0i in 0.61 seconds
2025-04-16 15:44:26 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/g6-split-30w-60w-100w-fiber-laser-marking-engraving-machine-1?ref=NMV3sU0i
2025-04-16 15:44:26 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:26 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/g6-split-30w-60w-100w-fiber-laser-marking-engraving-machine-1?ref=NMV3sU0i using any method
2025-04-16 15:44:26 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 58673ae1-b44e-4bc0-8d01-ce4878a44c86 at URL: https://www.gweikecloud.com/products/g6-split-30w-60w-100w-fiber-laser-marking-engraving-machine-1?ref=NMV3sU0i
2025-04-16 15:44:26 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 58673ae1-b44e-4bc0-8d01-ce4878a44c86
2025-04-16 15:44:27 | INFO     | services.database:add_batch_result:448 - Added result for machine 58673ae1-b44e-4bc0-8d01-ce4878a44c86 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:27 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-16 15:44:27 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-16 15:44:27 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area in 0.45 seconds
2025-04-16 15:44:28 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-16 15:44:28 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:28 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area using any method
2025-04-16 15:44:28 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine d3707433-2475-4b6c-8007-1e7126afd86c at URL: https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-16 15:44:28 | INFO     | services.database:add_price_history:159 - Added price history entry for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-16 15:44:28 | INFO     | services.database:add_batch_result:448 - Added result for machine d3707433-2475-4b6c-8007-1e7126afd86c to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:28 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 839e1b00-8496-478a-96c4-6248ce74ce74
2025-04-16 15:44:28 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/b4-30w-laser-engraver-machine/?ref=snlyaljc
2025-04-16 15:44:28 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/b4-30w-laser-engraver-machine/?ref=snlyaljc in 0.11 seconds
2025-04-16 15:44:29 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/b4-30w-laser-engraver-machine/?ref=snlyaljc
2025-04-16 15:44:29 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:29 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/b4-30w-laser-engraver-machine/?ref=snlyaljc using any method
2025-04-16 15:44:29 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 839e1b00-8496-478a-96c4-6248ce74ce74 at URL: https://commarker.com/product/b4-30w-laser-engraver-machine/?ref=snlyaljc
2025-04-16 15:44:29 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 839e1b00-8496-478a-96c4-6248ce74ce74
2025-04-16 15:44:29 | INFO     | services.database:add_batch_result:448 - Added result for machine 839e1b00-8496-478a-96c4-6248ce74ce74 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:29 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 3809e3cd-9d7b-473a-9d68-2beea84c3da5
2025-04-16 15:44:29 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://omtechlaser.com/products/60w-co2-laser-engraver-with-16-x-24-working-area?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate
2025-04-16 15:44:30 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://omtechlaser.com/products/60w-co2-laser-engraver-with-16-x-24-working-area?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate in 0.47 seconds
2025-04-16 15:44:30 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://omtechlaser.com/products/60w-co2-laser-engraver-with-16-x-24-working-area?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate
2025-04-16 15:44:30 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:30 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://omtechlaser.com/products/60w-co2-laser-engraver-with-16-x-24-working-area?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate using any method
2025-04-16 15:44:30 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 3809e3cd-9d7b-473a-9d68-2beea84c3da5 at URL: https://omtechlaser.com/products/60w-co2-laser-engraver-with-16-x-24-working-area?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate
2025-04-16 15:44:30 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 3809e3cd-9d7b-473a-9d68-2beea84c3da5
2025-04-16 15:44:30 | INFO     | services.database:add_batch_result:448 - Added result for machine 3809e3cd-9d7b-473a-9d68-2beea84c3da5 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:30 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-16 15:44:31 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-16 15:44:31 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.10 seconds
2025-04-16 15:44:31 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-16 15:44:31 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:31 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/commarker-b6/?ref=snlyaljc using any method
2025-04-16 15:44:31 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine af474938-178d-4797-ac32-4426e73e43b2 at URL: https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-16 15:44:31 | INFO     | services.database:add_price_history:159 - Added price history entry for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-16 15:44:31 | INFO     | services.database:add_batch_result:448 - Added result for machine af474938-178d-4797-ac32-4426e73e43b2 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:31 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-16 15:44:32 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:32 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc in 0.10 seconds
2025-04-16 15:44:32 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:32 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:32 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc using any method
2025-04-16 15:44:32 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c at URL: https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:32 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-16 15:44:32 | INFO     | services.database:add_batch_result:448 - Added result for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:32 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine d94ed1c2-9dba-47e4-9600-5af55564afaa
2025-04-16 15:44:33 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:33 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc in 0.10 seconds
2025-04-16 15:44:33 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:33 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:33 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc using any method
2025-04-16 15:44:33 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine d94ed1c2-9dba-47e4-9600-5af55564afaa at URL: https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:33 | INFO     | services.database:add_price_history:159 - Added price history entry for machine d94ed1c2-9dba-47e4-9600-5af55564afaa
2025-04-16 15:44:34 | INFO     | services.database:add_batch_result:448 - Added result for machine d94ed1c2-9dba-47e4-9600-5af55564afaa to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:34 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6
2025-04-16 15:44:34 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://store.creality.com/products/falcon2-22w-laser-engraver-cutter
2025-04-16 15:44:36 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://store.creality.com/products/falcon2-22w-laser-engraver-cutter in 2.15 seconds
2025-04-16 15:44:36 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://store.creality.com/products/falcon2-22w-laser-engraver-cutter
2025-04-16 15:44:36 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:36 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://store.creality.com/products/falcon2-22w-laser-engraver-cutter using any method
2025-04-16 15:44:36 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6 at URL: https://store.creality.com/products/falcon2-22w-laser-engraver-cutter
2025-04-16 15:44:36 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6
2025-04-16 15:44:36 | INFO     | services.database:add_batch_result:448 - Added result for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:36 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine d910f7fc-a8e0-48ad-8a62-78c9e4259b8b
2025-04-16 15:44:37 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-16 15:44:37 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.12 seconds
2025-04-16 15:44:37 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-16 15:44:37 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:37 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/commarker-b6/?ref=snlyaljc using any method
2025-04-16 15:44:37 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine d910f7fc-a8e0-48ad-8a62-78c9e4259b8b at URL: https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-16 15:44:37 | INFO     | services.database:add_price_history:159 - Added price history entry for machine d910f7fc-a8e0-48ad-8a62-78c9e4259b8b
2025-04-16 15:44:37 | INFO     | services.database:add_batch_result:448 - Added result for machine d910f7fc-a8e0-48ad-8a62-78c9e4259b8b to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:37 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04
2025-04-16 15:44:38 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/b4-50w-fiber-laser-engraver/?ref=snlyaljc
2025-04-16 15:44:38 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/b4-50w-fiber-laser-engraver/?ref=snlyaljc in 0.10 seconds
2025-04-16 15:44:38 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/b4-50w-fiber-laser-engraver/?ref=snlyaljc
2025-04-16 15:44:38 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:38 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/b4-50w-fiber-laser-engraver/?ref=snlyaljc using any method
2025-04-16 15:44:38 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04 at URL: https://commarker.com/product/b4-50w-fiber-laser-engraver/?ref=snlyaljc
2025-04-16 15:44:38 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04
2025-04-16 15:44:38 | INFO     | services.database:add_batch_result:448 - Added result for machine 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:38 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine b6824b08-7270-464c-82f3-3d31c439fbe3
2025-04-16 15:44:39 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:39 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc in 0.14 seconds
2025-04-16 15:44:39 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:39 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:39 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc using any method
2025-04-16 15:44:39 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine b6824b08-7270-464c-82f3-3d31c439fbe3 at URL: https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-16 15:44:39 | INFO     | services.database:add_price_history:159 - Added price history entry for machine b6824b08-7270-464c-82f3-3d31c439fbe3
2025-04-16 15:44:39 | INFO     | services.database:add_batch_result:448 - Added result for machine b6824b08-7270-464c-82f3-3d31c439fbe3 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:39 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 7d78d48e-932c-44c9-8f29-970ca508629f
2025-04-16 15:44:40 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.1laser.com/products/onelaser-xt-desktop-laser-machine
2025-04-16 15:44:41 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.1laser.com/products/onelaser-xt-desktop-laser-machine in 1.63 seconds
2025-04-16 15:44:41 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.1laser.com/products/onelaser-xt-desktop-laser-machine
2025-04-16 15:44:41 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:41 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.1laser.com/products/onelaser-xt-desktop-laser-machine using any method
2025-04-16 15:44:41 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 7d78d48e-932c-44c9-8f29-970ca508629f at URL: https://www.1laser.com/products/onelaser-xt-desktop-laser-machine
2025-04-16 15:44:41 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 7d78d48e-932c-44c9-8f29-970ca508629f
2025-04-16 15:44:42 | INFO     | services.database:add_batch_result:448 - Added result for machine 7d78d48e-932c-44c9-8f29-970ca508629f to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:42 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine e353d187-82db-4fe4-bbf3-2bd859516b4c
2025-04-16 15:44:42 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://shop.epiloglaser.com/products/fusion-maker-12
2025-04-16 15:44:42 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://shop.epiloglaser.com/products/fusion-maker-12 in 0.36 seconds
2025-04-16 15:44:42 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://shop.epiloglaser.com/products/fusion-maker-12
2025-04-16 15:44:42 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:42 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://shop.epiloglaser.com/products/fusion-maker-12 using any method
2025-04-16 15:44:42 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine e353d187-82db-4fe4-bbf3-2bd859516b4c at URL: https://shop.epiloglaser.com/products/fusion-maker-12
2025-04-16 15:44:43 | INFO     | services.database:add_price_history:159 - Added price history entry for machine e353d187-82db-4fe4-bbf3-2bd859516b4c
2025-04-16 15:44:43 | INFO     | services.database:add_batch_result:448 - Added result for machine e353d187-82db-4fe4-bbf3-2bd859516b4c to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:43 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c279ded1-1f68-4492-9f3d-5e07e07eb023
2025-04-16 15:44:43 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/emp-laser
2025-04-16 15:44:43 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/emp-laser in 0.22 seconds
2025-04-16 15:44:43 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/emp-laser
2025-04-16 15:44:43 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:43 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/emp-laser using any method
2025-04-16 15:44:43 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c279ded1-1f68-4492-9f3d-5e07e07eb023 at URL: https://aeonlaser.us/emp-laser
2025-04-16 15:44:43 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c279ded1-1f68-4492-9f3d-5e07e07eb023
2025-04-16 15:44:44 | INFO     | services.database:add_batch_result:448 - Added result for machine c279ded1-1f68-4492-9f3d-5e07e07eb023 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:44 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 01cedfc4-fc89-4930-b258-90bb778e528e
2025-04-16 15:44:44 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://em-smart.com/collections/super/products/em-smart-super-30w-50w-fiber-laser-engraver-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01
2025-04-16 15:44:45 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://em-smart.com/collections/super/products/em-smart-super-30w-50w-fiber-laser-engraver-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01 in 1.52 seconds
2025-04-16 15:44:45 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://em-smart.com/collections/super/products/em-smart-super-30w-50w-fiber-laser-engraver-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01
2025-04-16 15:44:45 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:45 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://em-smart.com/collections/super/products/em-smart-super-30w-50w-fiber-laser-engraver-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01 using any method
2025-04-16 15:44:45 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 01cedfc4-fc89-4930-b258-90bb778e528e at URL: https://em-smart.com/collections/super/products/em-smart-super-30w-50w-fiber-laser-engraver-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01
2025-04-16 15:44:46 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 01cedfc4-fc89-4930-b258-90bb778e528e
2025-04-16 15:44:46 | INFO     | services.database:add_batch_result:448 - Added result for machine 01cedfc4-fc89-4930-b258-90bb778e528e to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:46 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 533f1772-4dc1-4239-8eb3-38cc598933b3
2025-04-16 15:44:46 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24
2025-04-16 15:44:46 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24 in 0.22 seconds
2025-04-16 15:44:46 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24
2025-04-16 15:44:46 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:46 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24 using any method
2025-04-16 15:44:46 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 533f1772-4dc1-4239-8eb3-38cc598933b3 at URL: https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24
2025-04-16 15:44:46 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 533f1772-4dc1-4239-8eb3-38cc598933b3
2025-04-16 15:44:47 | INFO     | services.database:add_batch_result:448 - Added result for machine 533f1772-4dc1-4239-8eb3-38cc598933b3 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:47 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715
2025-04-16 15:44:47 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36
2025-04-16 15:44:47 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36 in 0.27 seconds
2025-04-16 15:44:47 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36
2025-04-16 15:44:47 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:47 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36 using any method
2025-04-16 15:44:47 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715 at URL: https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36
2025-04-16 15:44:47 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715
2025-04-16 15:44:47 | INFO     | services.database:add_batch_result:448 - Added result for machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:47 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8a7e16be-397e-43fe-8b5c-75a3f6f504fb
2025-04-16 15:44:48 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/emp-laser
2025-04-16 15:44:48 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/emp-laser in 0.07 seconds
2025-04-16 15:44:48 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/emp-laser
2025-04-16 15:44:48 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:48 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/emp-laser using any method
2025-04-16 15:44:48 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 8a7e16be-397e-43fe-8b5c-75a3f6f504fb at URL: https://aeonlaser.us/emp-laser
2025-04-16 15:44:48 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 8a7e16be-397e-43fe-8b5c-75a3f6f504fb
2025-04-16 15:44:48 | INFO     | services.database:add_batch_result:448 - Added result for machine 8a7e16be-397e-43fe-8b5c-75a3f6f504fb to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:48 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine d14d3459-7c00-4a82-aa26-4e6df27f1aa1
2025-04-16 15:44:48 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/emp-laser
2025-04-16 15:44:48 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/emp-laser in 0.06 seconds
2025-04-16 15:44:48 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/emp-laser
2025-04-16 15:44:48 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:48 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/emp-laser using any method
2025-04-16 15:44:48 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine d14d3459-7c00-4a82-aa26-4e6df27f1aa1 at URL: https://aeonlaser.us/emp-laser
2025-04-16 15:44:49 | INFO     | services.database:add_price_history:159 - Added price history entry for machine d14d3459-7c00-4a82-aa26-4e6df27f1aa1
2025-04-16 15:44:49 | INFO     | services.database:add_batch_result:448 - Added result for machine d14d3459-7c00-4a82-aa26-4e6df27f1aa1 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:49 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 4efe1038-29b8-47c8-972d-5591370964ec
2025-04-16 15:44:49 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://aeonlaser.us/emp-laser
2025-04-16 15:44:49 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://aeonlaser.us/emp-laser in 0.07 seconds
2025-04-16 15:44:49 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://aeonlaser.us/emp-laser
2025-04-16 15:44:49 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:49 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://aeonlaser.us/emp-laser using any method
2025-04-16 15:44:49 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 4efe1038-29b8-47c8-972d-5591370964ec at URL: https://aeonlaser.us/emp-laser
2025-04-16 15:44:49 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 4efe1038-29b8-47c8-972d-5591370964ec
2025-04-16 15:44:49 | INFO     | services.database:add_batch_result:448 - Added result for machine 4efe1038-29b8-47c8-972d-5591370964ec to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:49 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 4923b2ee-8a9e-4743-9643-af7c91feb806
2025-04-16 15:44:49 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.thunderlaserusa.com/aurora-8-mopa/
2025-04-16 15:44:50 | ERROR    | scrapers.web_scraper:get_page_content:54 - HTTP error when fetching https://www.thunderlaserusa.com/aurora-8-mopa/: 403 Client Error: Forbidden for url: https://www.thunderlaserusa.com/aurora-8-mopa/
2025-04-16 15:44:50 | ERROR    | services.price_service:update_machine_price:72 - Failed to scrape page for machine 4923b2ee-8a9e-4743-9643-af7c91feb806 at URL: https://www.thunderlaserusa.com/aurora-8-mopa/
2025-04-16 15:44:50 | INFO     | services.database:add_batch_result:448 - Added result for machine 4923b2ee-8a9e-4743-9643-af7c91feb806 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:50 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 785d8c3b-3d74-4755-b78b-98345c443b63
2025-04-16 15:44:50 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://rolyautomation.com/products/lasermatic-mk2-diode-laser-engraver?bg_ref=rZxaOxidn5
2025-04-16 15:44:51 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://rolyautomation.com/products/lasermatic-mk2-diode-laser-engraver?bg_ref=rZxaOxidn5 in 0.66 seconds
2025-04-16 15:44:51 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://rolyautomation.com/products/lasermatic-mk2-diode-laser-engraver?bg_ref=rZxaOxidn5
2025-04-16 15:44:51 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:51 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://rolyautomation.com/products/lasermatic-mk2-diode-laser-engraver?bg_ref=rZxaOxidn5 using any method
2025-04-16 15:44:51 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 785d8c3b-3d74-4755-b78b-98345c443b63 at URL: https://rolyautomation.com/products/lasermatic-mk2-diode-laser-engraver?bg_ref=rZxaOxidn5
2025-04-16 15:44:51 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 785d8c3b-3d74-4755-b78b-98345c443b63
2025-04-16 15:44:51 | INFO     | services.database:add_batch_result:448 - Added result for machine 785d8c3b-3d74-4755-b78b-98345c443b63 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:51 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 6f02d540-d04a-4873-905e-450ec42615f7
2025-04-16 15:44:51 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6
2025-04-16 15:44:52 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6 in 0.42 seconds
2025-04-16 15:44:52 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6
2025-04-16 15:44:52 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:52 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6 using any method
2025-04-16 15:44:52 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 6f02d540-d04a-4873-905e-450ec42615f7 at URL: https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6
2025-04-16 15:44:52 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 6f02d540-d04a-4873-905e-450ec42615f7
2025-04-16 15:44:52 | INFO     | services.database:add_batch_result:448 - Added result for machine 6f02d540-d04a-4873-905e-450ec42615f7 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:52 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine ba985fae-8f77-439a-a631-f66f1c8af245
2025-04-16 15:44:52 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://glowforge.com/b/pro
2025-04-16 15:44:56 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://glowforge.com/b/pro in 3.26 seconds
2025-04-16 15:44:56 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://glowforge.com/b/pro
2025-04-16 15:44:56 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:56 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://glowforge.com/b/pro using any method
2025-04-16 15:44:56 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine ba985fae-8f77-439a-a631-f66f1c8af245 at URL: https://glowforge.com/b/pro
2025-04-16 15:44:56 | INFO     | services.database:add_price_history:159 - Added price history entry for machine ba985fae-8f77-439a-a631-f66f1c8af245
2025-04-16 15:44:56 | INFO     | services.database:add_batch_result:448 - Added result for machine ba985fae-8f77-439a-a631-f66f1c8af245 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:56 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine a911e1a8-8e65-4e57-a366-c694cc7deeb8
2025-04-16 15:44:56 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://glowforge.com/b/craft
2025-04-16 15:44:58 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://glowforge.com/b/craft in 1.92 seconds
2025-04-16 15:44:58 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://glowforge.com/b/craft
2025-04-16 15:44:58 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:58 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://glowforge.com/b/craft using any method
2025-04-16 15:44:58 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine a911e1a8-8e65-4e57-a366-c694cc7deeb8 at URL: https://glowforge.com/b/craft
2025-04-16 15:44:59 | INFO     | services.database:add_price_history:159 - Added price history entry for machine a911e1a8-8e65-4e57-a366-c694cc7deeb8
2025-04-16 15:44:59 | INFO     | services.database:add_batch_result:448 - Added result for machine a911e1a8-8e65-4e57-a366-c694cc7deeb8 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:44:59 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-16 15:44:59 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu
2025-04-16 15:44:59 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu in 0.40 seconds
2025-04-16 15:44:59 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu
2025-04-16 15:44:59 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:44:59 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu using any method
2025-04-16 15:44:59 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 163b26bb-b096-4473-9a17-569c1cfb4f18 at URL: https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu
2025-04-16 15:45:00 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-16 15:45:00 | INFO     | services.database:add_batch_result:448 - Added result for machine 163b26bb-b096-4473-9a17-569c1cfb4f18 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:00 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine f4370877-a40c-459d-ab83-e93a32d102fb
2025-04-16 15:45:00 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true
2025-04-16 15:45:03 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true in 2.88 seconds
2025-04-16 15:45:03 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true
2025-04-16 15:45:03 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:03 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true using any method
2025-04-16 15:45:03 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine f4370877-a40c-459d-ab83-e93a32d102fb at URL: https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true
2025-04-16 15:45:03 | INFO     | services.database:add_price_history:159 - Added price history entry for machine f4370877-a40c-459d-ab83-e93a32d102fb
2025-04-16 15:45:04 | INFO     | services.database:add_batch_result:448 - Added result for machine f4370877-a40c-459d-ab83-e93a32d102fb to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:04 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 23372b1e-277f-4ad4-b9ee-715b05782894
2025-04-16 15:45:04 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i
2025-04-16 15:45:04 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i in 0.10 seconds
2025-04-16 15:45:04 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i
2025-04-16 15:45:04 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:04 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i using any method
2025-04-16 15:45:04 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 23372b1e-277f-4ad4-b9ee-715b05782894 at URL: https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i
2025-04-16 15:45:04 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 23372b1e-277f-4ad4-b9ee-715b05782894
2025-04-16 15:45:04 | INFO     | services.database:add_batch_result:448 - Added result for machine 23372b1e-277f-4ad4-b9ee-715b05782894 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:04 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2
2025-04-16 15:45:04 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i
2025-04-16 15:45:04 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i in 0.15 seconds
2025-04-16 15:45:05 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i
2025-04-16 15:45:05 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:05 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i using any method
2025-04-16 15:45:05 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2 at URL: https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i
2025-04-16 15:45:05 | INFO     | services.database:add_price_history:159 - Added price history entry for machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2
2025-04-16 15:45:05 | INFO     | services.database:add_batch_result:448 - Added result for machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:05 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine b78b8088-9577-4047-a975-32472998e3e4
2025-04-16 15:45:05 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://glowforge.com/b/pro
2025-04-16 15:45:05 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://glowforge.com/b/pro in 0.08 seconds
2025-04-16 15:45:05 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://glowforge.com/b/pro
2025-04-16 15:45:05 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:05 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://glowforge.com/b/pro using any method
2025-04-16 15:45:05 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine b78b8088-9577-4047-a975-32472998e3e4 at URL: https://glowforge.com/b/pro
2025-04-16 15:45:05 | INFO     | services.database:add_price_history:159 - Added price history entry for machine b78b8088-9577-4047-a975-32472998e3e4
2025-04-16 15:45:06 | INFO     | services.database:add_batch_result:448 - Added result for machine b78b8088-9577-4047-a975-32472998e3e4 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:06 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1
2025-04-16 15:45:06 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary
2025-04-16 15:45:06 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary in 0.39 seconds
2025-04-16 15:45:06 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary
2025-04-16 15:45:06 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:06 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary using any method
2025-04-16 15:45:06 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1 at URL: https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary
2025-04-16 15:45:06 | INFO     | services.database:add_price_history:159 - Added price history entry for machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1
2025-04-16 15:45:07 | INFO     | services.database:add_batch_result:448 - Added result for machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:07 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c2769ef1-2ffd-4149-89cf-854b5ff78f81
2025-04-16 15:45:07 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/nox?ref=NMV3sU0i
2025-04-16 15:45:07 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/nox?ref=NMV3sU0i in 0.32 seconds
2025-04-16 15:45:07 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/nox?ref=NMV3sU0i
2025-04-16 15:45:07 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:07 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/nox?ref=NMV3sU0i using any method
2025-04-16 15:45:07 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c2769ef1-2ffd-4149-89cf-854b5ff78f81 at URL: https://www.gweikecloud.com/products/nox?ref=NMV3sU0i
2025-04-16 15:45:07 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c2769ef1-2ffd-4149-89cf-854b5ff78f81
2025-04-16 15:45:08 | INFO     | services.database:add_batch_result:448 - Added result for machine c2769ef1-2ffd-4149-89cf-854b5ff78f81 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:08 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91
2025-04-16 15:45:08 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/g1-desktop-laser-engraver?ref=NMV3sU0i
2025-04-16 15:45:08 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/g1-desktop-laser-engraver?ref=NMV3sU0i in 0.45 seconds
2025-04-16 15:45:08 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/g1-desktop-laser-engraver?ref=NMV3sU0i
2025-04-16 15:45:08 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:08 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/g1-desktop-laser-engraver?ref=NMV3sU0i using any method
2025-04-16 15:45:08 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91 at URL: https://www.gweikecloud.com/products/g1-desktop-laser-engraver?ref=NMV3sU0i
2025-04-16 15:45:08 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91
2025-04-16 15:45:09 | INFO     | services.database:add_batch_result:448 - Added result for machine 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:09 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2
2025-04-16 15:45:09 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.gweikecloud.com/products/g6-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44232396144857
2025-04-16 15:45:09 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.gweikecloud.com/products/g6-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44232396144857 in 0.34 seconds
2025-04-16 15:45:09 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.gweikecloud.com/products/g6-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44232396144857
2025-04-16 15:45:09 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:09 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.gweikecloud.com/products/g6-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44232396144857 using any method
2025-04-16 15:45:09 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2 at URL: https://www.gweikecloud.com/products/g6-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44232396144857
2025-04-16 15:45:09 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2
2025-04-16 15:45:09 | INFO     | services.database:add_batch_result:448 - Added result for machine 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:09 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine df2e8087-6878-478a-a7ca-31f95ae73197
2025-04-16 15:45:10 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-ex/
2025-04-16 15:45:11 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://lagunatools.com/cnc/co2-lasers/smartshop-laser-ex/ in 1.10 seconds
2025-04-16 15:45:11 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-ex/
2025-04-16 15:45:11 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:11 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-ex/ using any method
2025-04-16 15:45:11 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine df2e8087-6878-478a-a7ca-31f95ae73197 at URL: https://lagunatools.com/cnc/co2-lasers/smartshop-laser-ex/
2025-04-16 15:45:11 | INFO     | services.database:add_price_history:159 - Added price history entry for machine df2e8087-6878-478a-a7ca-31f95ae73197
2025-04-16 15:45:11 | INFO     | services.database:add_batch_result:448 - Added result for machine df2e8087-6878-478a-a7ca-31f95ae73197 to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:11 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 2dff352f-d660-4210-afda-1d7bbea3611e
2025-04-16 15:45:12 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.longer3d.com/products/longer-ray5-laser-engraver
2025-04-16 15:45:13 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.longer3d.com/products/longer-ray5-laser-engraver in 1.10 seconds
2025-04-16 15:45:13 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.longer3d.com/products/longer-ray5-laser-engraver
2025-04-16 15:45:13 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:13 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.longer3d.com/products/longer-ray5-laser-engraver using any method
2025-04-16 15:45:13 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 2dff352f-d660-4210-afda-1d7bbea3611e at URL: https://www.longer3d.com/products/longer-ray5-laser-engraver
2025-04-16 15:45:13 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 2dff352f-d660-4210-afda-1d7bbea3611e
2025-04-16 15:45:13 | INFO     | services.database:add_batch_result:448 - Added result for machine 2dff352f-d660-4210-afda-1d7bbea3611e to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:13 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d
2025-04-16 15:45:14 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://www.longer3d.com/products/longer-nano-6w-12w-laser-engraving-machine
2025-04-16 15:45:14 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://www.longer3d.com/products/longer-nano-6w-12w-laser-engraving-machine in 0.58 seconds
2025-04-16 15:45:15 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://www.longer3d.com/products/longer-nano-6w-12w-laser-engraving-machine
2025-04-16 15:45:15 | ERROR    | scrapers.price_extractor:_extract_using_claude:228 - Error using Claude for price extraction: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
2025-04-16 15:45:15 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://www.longer3d.com/products/longer-nano-6w-12w-laser-engraving-machine using any method
2025-04-16 15:45:15 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d at URL: https://www.longer3d.com/products/longer-nano-6w-12w-laser-engraving-machine
2025-04-16 15:45:15 | INFO     | services.database:add_price_history:159 - Added price history entry for machine 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d
2025-04-16 15:45:15 | INFO     | services.database:add_batch_result:448 - Added result for machine 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d to batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:15 | INFO     | services.database:complete_batch:377 - Marked batch 2e001700-5ff3-4f7f-a8da-59e2dd133d43 as completed
2025-04-16 15:45:15 | INFO     | services.price_service:batch_update_machines:274 - Batch update completed. Results: 0 successful, 50 failed
2025-04-16 15:45:18 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 15:45:18 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 15:45:18 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 15:45:18 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 15:45:18 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 15:45:18 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 15:45:28 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 15:45:29 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 15:45:29 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 15:45:29 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 15:45:29 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 15:45:35 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:35 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:36 | INFO     | api.routes:get_batch_results:191 - Fetching batch results for batch_id: 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:45:36 | INFO     | services.price_service:get_batch_results:293 - Retrieving batch results for batch_id: 2e001700-5ff3-4f7f-a8da-59e2dd133d43
2025-04-16 15:49:29 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 15:49:29 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 15:49:29 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 15:49:29 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 15:50:32 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:50:32 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:50:33 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:50:33 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.41 seconds
2025-04-16 15:50:33 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:50:34 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1,299.00
2025-04-16 15:50:34 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:50:34 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:50:34 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:50:34 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:51:46 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 15:51:46 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 15:51:46 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 15:51:46 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 15:51:59 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:51:59 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:52:00 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:52:01 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.78 seconds
2025-04-16 15:52:01 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:52:02 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1,299.00
2025-04-16 15:52:02 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:52:02 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:52:02 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:52:02 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:53:07 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 15:53:07 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 15:53:07 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 15:53:07 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 15:53:16 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:53:16 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:53:16 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:53:17 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.24 seconds
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:17 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:53:18 | WARNING  | scrapers.price_extractor:_parse_price:270 - TEMP DEBUG: Simplified parsing failed: [<class 'decimal.ConversionSyntax'>]. Falling back to original logic.
2025-04-16 15:53:18 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1,299.00
2025-04-16 15:53:18 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:53:18 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:53:18 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:53:18 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:54:12 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 15:54:12 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 15:54:12 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 15:54:12 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 15:54:25 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:54:25 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:54:25 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:54:26 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.36 seconds
2025-04-16 15:54:26 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:54:27 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1,299.00
2025-04-16 15:54:27 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:54:27 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:54:27 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:54:27 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:55:14 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:55:14 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:55:15 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:55:15 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.16 seconds
2025-04-16 15:55:15 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:55:16 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1299.00
2025-04-16 15:55:16 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:55:16 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:55:16 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:55:16 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:55:53 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 15:55:53 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 15:55:53 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 15:55:53 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 15:56:03 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:56:03 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:56:04 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:56:04 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.38 seconds
2025-04-16 15:56:04 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:56:05 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1,299.00
2025-04-16 15:56:05 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:56:05 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:56:05 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:56:05 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:57:16 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:57:16 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:57:16 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:57:17 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.25 seconds
2025-04-16 15:57:17 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:57:18 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1,299.00
2025-04-16 15:57:18 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:57:18 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:57:18 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:57:18 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:57:56 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 15:57:57 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 15:57:57 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 15:57:57 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 15:58:04 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:58:04 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:58:04 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:58:04 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.34 seconds
2025-04-16 15:58:05 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:58:05 | WARNING  | scrapers.price_extractor:_extract_using_claude:224 - Claude returned an invalid price: 1,299.00
2025-04-16 15:58:05 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 15:58:05 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 15:58:06 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 15:58:06 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 16:00:46 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:00:46 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:00:46 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:00:46 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:00:52 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 16:00:52 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 16:00:53 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 16:00:53 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.28 seconds
2025-04-16 16:00:53 | INFO     | scrapers.price_extractor:_extract_using_claude:200 - Calling Claude API to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 16:00:54 | WARNING  | scrapers.price_extractor:_extract_using_claude:250 - Claude returned an invalid price: 1,299.00
2025-04-16 16:00:54 | WARNING  | scrapers.price_extractor:extract_price:50 - Failed to extract price from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 using any method
2025-04-16 16:00:54 | ERROR    | services.price_service:update_machine_price:87 - Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 16:00:54 | INFO     | services.database:add_price_history:159 - Added price history entry for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 16:00:54 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to extract price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 at URL: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 16:03:02 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:03:02 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:03:02 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:03:02 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:03:18 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:03:18 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:03:18 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:03:18 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:03:38 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 16:03:38 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 16:03:39 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-16 16:03:40 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 in 0.83 seconds
2025-04-16 16:03:40 | INFO     | scrapers.price_extractor:_extract_from_structured_data:86 - Extracted price 129.0 using JSON-LD
2025-04-16 16:03:43 | WARNING  | services.database:update_machine_price:99 - No machine found with ID c23808f6-1760-4cad-b031-3c5eb3556d98 to update
2025-04-16 16:03:43 | ERROR    | services.price_service:update_machine_price:149 - Failed to update price in database for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 16:03:43 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine c23808f6-1760-4cad-b031-3c5eb3556d98: Failed to update price in database for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-16 16:04:50 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:04:50 | INFO     | services.price_service:update_machine_price:28 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:04:51 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-16 16:04:52 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.91 seconds
2025-04-16 16:04:52 | INFO     | scrapers.price_extractor:_extract_from_structured_data:86 - Extracted price 119.0 using JSON-LD
2025-04-16 16:04:55 | WARNING  | services.database:update_machine_price:99 - No machine found with ID 8054eeb8-504f-4791-9f48-a99fe0669664 to update
2025-04-16 16:04:55 | ERROR    | services.price_service:update_machine_price:149 - Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:04:55 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine 8054eeb8-504f-4791-9f48-a99fe0669664: Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:06:02 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:03 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:03 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:03 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 16:06:03 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 16:06:20 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:20 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:20 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:21 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:22 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:22 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:23 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:24 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:24 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:28 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:28 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:28 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:31 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:31 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:31 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:33 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:34 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:34 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:36 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:36 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:36 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:06:40 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:06:40 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:06:40 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:08:05 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:08:05 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:08:05 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:08:05 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:08:17 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:08:17 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:08:17 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:08:17 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:09:02 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:09:02 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:09:02 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:09:02 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:09:29 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 16:09:29 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 16:09:29 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:09:29 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:09:29 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:09:32 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:09:32 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:09:32 | INFO     | scrapers.web_scraper:get_page_content:35 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-16 16:09:32 | INFO     | scrapers.web_scraper:get_page_content:42 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.32 seconds
2025-04-16 16:09:32 | ERROR    | services.price_service:update_machine_price:179 - Error processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x114031120>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x105ba32e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x105c00540>
    └ <uvicorn.server.Server object at 0x114017a10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x105c005e0>
           │       │   └ <uvicorn.server.Server object at 0x114017a10>
           │       └ <function run at 0x105284e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x113dbe6b0>
           │      └ <function Runner.run at 0x105424720>
           └ <asyncio.runners.Runner object at 0x114045b10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x114052670>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x114045b10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x114085410>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x11406fe90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x114085410>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1142082d0>
          └ <fastapi.applications.FastAPI object at 0x11406fe90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1140f1940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1140ef8d0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1142082d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1140f1940>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x111095760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1140ef8d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1140ef8d0>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1142004d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1140ef8d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1140ef8d0>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x114209590>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1140eca50>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1142004d0>
          └ <function wrap_app_handling_exceptions at 0x107ee07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1140f1d00>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1140eca50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1140f1d00>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1140eca50>>
          └ <fastapi.routing.APIRouter object at 0x1140eca50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1140f1d00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x107ee1da0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1140f1d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1140f04a0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1140f1d00>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x114209e50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1140f1da0>
          └ <function wrap_app_handling_exceptions at 0x107ee07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1140f2660>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1142277...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1140f1da0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x114209e50>
                     └ <function get_request_handler.<locals>.app at 0x1140f0540>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x107ee18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': MachineUpdateRequest(machine_id='8054eeb8-504f-4791-9f48-a99fe0669664')}
                 │         └ <function update_machine_price at 0x113e2a840>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 53, in update_machine_price
    result = await price_service.update_machine_price(request.machine_id)
                   │             │                    │       └ '8054eeb8-504f-4791-9f48-a99fe0669664'
                   │             │                    └ MachineUpdateRequest(machine_id='8054eeb8-504f-4791-9f48-a99fe0669664')
                   │             └ <function PriceService.update_machine_price at 0x112baed40>
                   └ <services.price_service.PriceService object at 0x112c1a8d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 49, in update_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver'
                               │    │           └ <function WebScraper.get_page_content at 0x11286bec0>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x113e1bed0>
                               └ <services.price_service.PriceService object at 0x112c1a8d0>

TypeError: object tuple can't be used in 'await' expression
2025-04-16 16:09:32 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine 8054eeb8-504f-4791-9f48-a99fe0669664: An error occurred while processing the price update
2025-04-16 16:10:51 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:10:51 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:10:51 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:10:51 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:11:11 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:11:11 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:11:12 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:11:12 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:11:28 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 16:11:29 | INFO     | services.database:get_machines_needing_update:225 - No machines found for price update
2025-04-16 16:11:29 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:11:29 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:11:29 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:11:32 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:11:32 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:11:32 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-16 16:11:32 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.46 seconds
2025-04-16 16:11:32 | INFO     | scrapers.price_extractor:_extract_from_structured_data:97 - Extracted price 119.0 using JSON-LD
2025-04-16 16:11:35 | WARNING  | services.database:update_machine_price:99 - No machine found with ID 8054eeb8-504f-4791-9f48-a99fe0669664 to update
2025-04-16 16:11:35 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:11:35 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine 8054eeb8-504f-4791-9f48-a99fe0669664: Failed to update price in database for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:16:45 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-16 16:16:45 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-16 16:16:45 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-16 16:16:45 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-16 16:16:56 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:16:57 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:16:57 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:16:57 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-16 16:16:57 | INFO     | services.database:get_machines_needing_update:261 - No machines found for price update
2025-04-16 16:16:58 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:16:58 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:16:59 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-16 16:16:59 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.45 seconds
2025-04-16 16:16:59 | INFO     | scrapers.price_extractor:_extract_from_structured_data:125 - Extracted numeric price 1199.0 using JSON-LD
2025-04-16 16:16:59 | INFO     | services.price_service:update_machine_price:107 - Price unchanged for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-16 16:16:59 | INFO     | services.database:add_price_history:195 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-16 16:17:00 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:17:00 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:17:00 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-16 16:17:42 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-16 16:17:42 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-16 16:17:42 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-16 16:17:43 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area in 0.93 seconds
2025-04-16 16:17:43 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 949.0 using selector '[data-price]'
2025-04-16 16:17:44 | WARNING  | services.database:update_machine_price:135 - No machine found with ID d3707433-2475-4b6c-8007-1e7126afd86c to update
2025-04-16 16:17:44 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-16 16:17:44 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine d3707433-2475-4b6c-8007-1e7126afd86c: Failed to update price in database for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-16 16:18:08 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 16:18:08 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 16:18:09 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-16 16:18:09 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser in 0.37 seconds
2025-04-16 16:18:09 | INFO     | scrapers.price_extractor:_extract_from_structured_data:125 - Extracted numeric price 649.0 using JSON-LD
2025-04-16 16:18:09 | INFO     | services.price_service:update_machine_price:107 - Price unchanged for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16: 649.0
2025-04-16 16:18:09 | INFO     | services.database:add_price_history:195 - Added price history entry for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-16 16:18:10 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-16 16:18:10 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-16 16:18:10 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:20:31 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:20:31 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-17 12:20:31 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 12:20:31 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 12:30:13 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 12:30:14 | INFO     | services.database:get_machines_needing_update:264 - Found 57 machines for price update
2025-04-17 12:30:14 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:30:14 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:30:14 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:30:56 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:30:56 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:30:56 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:30:57 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.47 seconds
2025-04-17 12:30:57 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 292.0 using selector '.price'
2025-04-17 12:30:58 | WARNING  | services.database:update_machine_price:135 - No machine found with ID af474938-178d-4797-ac32-4426e73e43b2 to update
2025-04-17 12:30:58 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:30:58 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine af474938-178d-4797-ac32-4426e73e43b2: Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:20 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:34:20 | INFO     | __main__:test_db_connection:16 - Testing database connection with machine ID...
2025-04-17 12:34:20 | INFO     | __main__:test_db_connection:22 - Testing direct retrieval with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:21 | INFO     | __main__:test_db_connection:25 - ✅ Success! Found machine: ComMarker B6 20W
2025-04-17 12:34:21 | INFO     | __main__:test_db_connection:30 - Testing with explicit UUID conversion...
2025-04-17 12:34:21 | INFO     | __main__:test_db_connection:34 - Converted to UUID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:21 | INFO     | __main__:test_db_connection:44 - ✅ Success with UUID conversion! Found: ComMarker B6 20W
2025-04-17 12:34:21 | INFO     | __main__:test_db_connection:51 - Testing with raw SQL query...
2025-04-17 12:34:27 | INFO     | __main__:test_db_connection:61 - ✅ Found machine in full results: ComMarker B6 20W
2025-04-17 12:34:31 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:34:31 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-17 12:34:31 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 12:34:31 | INFO     | __main__:update_machine_price:33 - Updating price for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:31 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:32 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:34:32 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.38 seconds
2025-04-17 12:34:32 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 292.0 using selector '.price'
2025-04-17 12:34:33 | WARNING  | services.database:update_machine_price:163 - No machine found with ID af474938-178d-4797-ac32-4426e73e43b2 to update
2025-04-17 12:34:33 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:33 | ERROR    | __main__:update_machine_price:49 - Failed to update price for machine af474938-178d-4797-ac32-4426e73e43b2: Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:54 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:34:54 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-17 12:34:54 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 12:34:54 | INFO     | __main__:update_machine_price:33 - Updating price for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:54 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:54 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:34:54 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.17 seconds
2025-04-17 12:34:54 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 292.0 using selector '.price'
2025-04-17 12:34:55 | WARNING  | services.database:update_machine_price:167 - No machine found with ID af474938-178d-4797-ac32-4426e73e43b2 to update
2025-04-17 12:34:55 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:34:55 | ERROR    | __main__:update_machine_price:49 - Failed to update price for machine af474938-178d-4797-ac32-4426e73e43b2: Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:35:21 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:16 - Testing database connection with machine ID...
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:22 - Testing direct retrieval with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:25 - ✅ Success! Found machine: ComMarker B6 20W
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:26 -   - Database ID format: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:27 -   - ID type: <class 'str'>
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:28 -   - Are IDs equal? True
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:31 - Testing update with found machine ID...
2025-04-17 12:35:21 | WARNING  | services.database:update_machine_price:167 - No machine found with ID af474938-178d-4797-ac32-4426e73e43b2 to update
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:36 - Update result: False
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:43 - Testing with explicit UUID conversion...
2025-04-17 12:35:21 | INFO     | __main__:test_db_connection:47 - Converted to UUID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:35:22 | INFO     | __main__:test_db_connection:57 - ✅ Success with UUID conversion! Found: ComMarker B6 20W
2025-04-17 12:35:22 | INFO     | __main__:test_db_connection:64 - Testing with raw SQL query...
2025-04-17 12:35:22 | INFO     | __main__:test_db_connection:72 - First few machines in database:
2025-04-17 12:35:22 | INFO     | __main__:test_db_connection:74 -   1. AlgoLaser Delta 40W Laser - ID: c23808f6-1760-4cad-b031-3c5eb3556d98 (Type: <class 'str'>)
2025-04-17 12:35:22 | INFO     | __main__:test_db_connection:74 -   2. Aeon MIRA 7 Pro S - ID: ff1f2676-9e67-47bf-9bb0-7152bace66b5 (Type: <class 'str'>)
2025-04-17 12:35:22 | INFO     | __main__:test_db_connection:74 -   3. Aeon SUPER NOVA 14S - ID: ef4f7a07-a068-4afc-b550-22d101c6e68b (Type: <class 'str'>)
2025-04-17 12:35:22 | ERROR    | __main__:test_db_connection:85 - ❌ Machine not found in full results
2025-04-17 12:36:05 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:16 - Testing database connection with machine ID...
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:22 - Testing direct retrieval with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:25 - ✅ Success! Found machine: ComMarker B6 20W
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:26 -   - Database ID format: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:27 -   - ID type: <class 'str'>
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:28 -   - Are IDs equal? True
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:31 - Testing update with found machine ID...
2025-04-17 12:36:05 | INFO     | services.database:update_machine_price:145 - Found machine 'ComMarker B6 20W' with DB ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:05 | WARNING  | services.database:update_machine_price:192 - Standard updates failed, attempting raw SQL update...
2025-04-17 12:36:05 | ERROR    | services.database:update_machine_price:211 - Raw SQL update failed: {'code': 'PGRST202', 'details': 'Searched for the function public.execute_sql with parameter sql or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.', 'hint': None, 'message': 'Could not find the function public.execute_sql(sql) in the schema cache'}
2025-04-17 12:36:05 | WARNING  | services.database:update_machine_price:214 - All update attempts failed for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:36 - Update result: False
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:43 - Testing with explicit UUID conversion...
2025-04-17 12:36:05 | INFO     | __main__:test_db_connection:47 - Converted to UUID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:06 | INFO     | __main__:test_db_connection:57 - ✅ Success with UUID conversion! Found: ComMarker B6 20W
2025-04-17 12:36:06 | INFO     | __main__:test_db_connection:64 - Testing with raw SQL query...
2025-04-17 12:36:06 | INFO     | __main__:test_db_connection:72 - First few machines in database:
2025-04-17 12:36:06 | INFO     | __main__:test_db_connection:74 -   1. AlgoLaser Delta 40W Laser - ID: c23808f6-1760-4cad-b031-3c5eb3556d98 (Type: <class 'str'>)
2025-04-17 12:36:06 | INFO     | __main__:test_db_connection:74 -   2. Aeon MIRA 7 Pro S - ID: ff1f2676-9e67-47bf-9bb0-7152bace66b5 (Type: <class 'str'>)
2025-04-17 12:36:06 | INFO     | __main__:test_db_connection:74 -   3. Aeon SUPER NOVA 14S - ID: ef4f7a07-a068-4afc-b550-22d101c6e68b (Type: <class 'str'>)
2025-04-17 12:36:06 | ERROR    | __main__:test_db_connection:85 - ❌ Machine not found in full results
2025-04-17 12:36:40 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:36:40 | INFO     | scrapers.price_extractor:__init__:20 - Price extractor initialized with Anthropic version header
2025-04-17 12:36:40 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 12:36:40 | INFO     | __main__:update_machine_price:33 - Updating price for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:40 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:41 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:36:41 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.27 seconds
2025-04-17 12:36:41 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 292.0 using selector '.price'
2025-04-17 12:36:41 | INFO     | services.database:update_machine_price:145 - Found machine 'ComMarker B6 20W' with DB ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:45 | INFO     | services.database:update_machine_price:214 - Main update failed, but still adding price history record
2025-04-17 12:36:45 | INFO     | services.database:add_price_history:288 - Added price history entry for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:45 | INFO     | services.database:add_price_history:288 - Added price history entry for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:36:45 | INFO     | services.price_service:update_machine_price:162 - Successfully updated price for machine af474938-178d-4797-ac32-4426e73e43b2 from 1839 to 292.0 using CSS Selector '.price'
2025-04-17 12:36:45 | INFO     | __main__:update_machine_price:42 - Successfully updated price for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:38:23 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 12:38:24 | INFO     | services.database:get_machines_needing_update:264 - Found 57 machines for price update
2025-04-17 12:38:24 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:38:24 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:38:24 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:38:35 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:38:35 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:38:35 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:38:40 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:38:40 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:38:40 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:47:43 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 12:47:43 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 12:47:43 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 12:47:44 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 0.45 seconds
2025-04-17 12:47:44 | INFO     | scrapers.price_extractor:_extract_from_structured_data:125 - Extracted numeric price 1199.0 using JSON-LD
2025-04-17 12:47:44 | INFO     | services.price_service:update_machine_price:107 - Price unchanged for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-17 12:47:44 | INFO     | services.database:add_price_history:195 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 12:47:46 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:47:46 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:47:46 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:49:14 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 12:49:15 | INFO     | services.database:get_machines_needing_update:264 - Found 57 machines for price update
2025-04-17 12:49:15 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:49:15 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:49:15 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:49:44 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:49:44 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:49:45 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:49:45 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.47 seconds
2025-04-17 12:49:45 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 292.0 using selector '.price'
2025-04-17 12:49:47 | WARNING  | services.database:update_machine_price:135 - No machine found with ID af474938-178d-4797-ac32-4426e73e43b2 to update
2025-04-17 12:49:47 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:49:47 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine af474938-178d-4797-ac32-4426e73e43b2: Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:49:53 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:49:53 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:49:53 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:49:54 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.14 seconds
2025-04-17 12:49:54 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 292.0 using selector '.price'
2025-04-17 12:49:55 | WARNING  | services.database:update_machine_price:135 - No machine found with ID af474938-178d-4797-ac32-4426e73e43b2 to update
2025-04-17 12:49:55 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:49:55 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine af474938-178d-4797-ac32-4426e73e43b2: Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:51:22 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 12:51:23 | INFO     | services.database:get_machines_needing_update:264 - Found 57 machines for price update
2025-04-17 12:51:23 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:51:23 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:51:23 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:51:28 | INFO     | api.routes:update_machine_price:44 - Received price update request for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:51:28 | INFO     | services.price_service:update_machine_price:29 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:51:29 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:51:29 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.25 seconds
2025-04-17 12:51:29 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:244 - Extracted price 292.0 using selector '.price'
2025-04-17 12:51:30 | WARNING  | services.database:update_machine_price:135 - No machine found with ID af474938-178d-4797-ac32-4426e73e43b2 to update
2025-04-17 12:51:30 | ERROR    | services.price_service:update_machine_price:142 - Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:51:30 | ERROR    | api.routes:update_machine_price:58 - Price update failed for machine af474938-178d-4797-ac32-4426e73e43b2: Failed to update price in database for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:54:21 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:54:21 | INFO     | scrapers.price_extractor:__init__:39 - Price extractor initialized with Anthropic version header
2025-04-17 12:54:21 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 12:54:21 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 12:54:40 | INFO     | api.routes:configure_batch_update:244 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 12:54:41 | INFO     | services.database:get_machines_needing_update:264 - Found 57 machines for price update
2025-04-17 12:54:41 | INFO     | api.routes:get_batches:281 - Fetching list of batch jobs
2025-04-17 12:54:41 | INFO     | api.routes:get_batches:298 - Found 1 batch jobs
2025-04-17 12:54:41 | INFO     | api.routes:get_batches:302 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:54:57 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:54:57 | INFO     | scrapers.price_extractor:__init__:39 - Price extractor initialized with Anthropic version header
2025-04-17 12:54:57 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 12:54:57 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 12:55:02 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 12:55:03 | INFO     | services.database:get_machines_needing_update:428 - Found 57 machines for price update
2025-04-17 12:55:03 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 12:55:03 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 12:55:03 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:55:13 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:13 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:14 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 12:55:14 | INFO     | api.routes:update_machine_price:113 - Machine found: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 12:55:14 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:14 | INFO     | services.price_service:update_machine_price:196 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:14 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:14 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 12:55:14 | INFO     | services.price_service:update_machine_price:231 - Found machine: ComMarker B6 20W (Current price: $1839)
2025-04-17 12:55:14 | INFO     | services.price_service:update_machine_price:244 - Fetching product page: https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:55:14 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 12:55:14 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.33 seconds
2025-04-17 12:55:14 | INFO     | services.price_service:update_machine_price:264 - Successfully fetched page (926250 bytes)
2025-04-17 12:55:14 | ERROR    | scrapers.price_extractor:_extract_from_structured_data:200 - Error extracting from structured data: cannot access local variable 'new_path' where it is not associated with a value
2025-04-17 12:55:14 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:247 - Extracted price 292.0 using selector '.price'
2025-04-17 12:55:14 | INFO     | services.price_service:update_machine_price:290 - Successfully extracted price $292.0 using method: CSS Selector '.price'
2025-04-17 12:55:14 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine af474938-178d-4797-ac32-4426e73e43b2 to $292.0
2025-04-17 12:55:14 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:15 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 12:55:15 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'ComMarker B6 20W' with DB ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:18 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:18 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 12:55:18 | INFO     | services.database:add_price_history:359 - Added price history entry for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:18 | INFO     | services.database:add_price_history:359 - Added price history entry for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 12:55:18 | INFO     | services.price_service:update_machine_price:347 - Price updated successfully for ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 12:55:18 | INFO     | api.routes:update_machine_price:154 - Price update successful for ComMarker B6 20W
2025-04-17 12:55:19 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 12:55:19 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 12:55:19 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:56:59 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 12:56:59 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 12:56:59 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:57:02 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 12:57:02 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 12:57:02 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 12:57:59 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 12:57:59 | INFO     | scrapers.price_extractor:__init__:39 - Price extractor initialized with Anthropic version header
2025-04-17 12:57:59 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 12:57:59 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 13:03:25 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 13:03:25 | INFO     | scrapers.price_extractor:__init__:39 - Price extractor initialized with Anthropic version header
2025-04-17 13:03:25 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 13:03:25 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 13:03:34 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 13:03:34 | INFO     | services.database:get_machines_needing_update:428 - Found 57 machines for price update
2025-04-17 13:03:34 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 13:03:34 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 13:03:34 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 13:03:44 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:44 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:44 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 13:03:44 | INFO     | api.routes:update_machine_price:113 - Machine found: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 13:03:44 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:44 | INFO     | services.price_service:update_machine_price:196 - Processing price update for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:44 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:44 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 13:03:44 | INFO     | services.price_service:update_machine_price:231 - Found machine: ComMarker B6 20W (Current price: $1839)
2025-04-17 13:03:44 | INFO     | services.price_service:update_machine_price:244 - Fetching product page: https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 13:03:44 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-17 13:03:45 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/commarker-b6/?ref=snlyaljc in 0.38 seconds
2025-04-17 13:03:45 | INFO     | services.price_service:update_machine_price:264 - Successfully fetched page (926250 bytes)
2025-04-17 13:03:45 | ERROR    | scrapers.price_extractor:_extract_from_structured_data:200 - Error extracting from structured data: cannot access local variable 'new_path' where it is not associated with a value
2025-04-17 13:03:45 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:247 - Extracted price 292.0 using selector '.price'
2025-04-17 13:03:45 | INFO     | services.price_service:update_machine_price:290 - Successfully extracted price $292.0 using method: CSS Selector '.price'
2025-04-17 13:03:45 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine af474938-178d-4797-ac32-4426e73e43b2 to $292.0
2025-04-17 13:03:45 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:45 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 13:03:45 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'ComMarker B6 20W' with DB ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:47 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:47 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 13:03:47 | INFO     | services.database:add_price_history:359 - Added price history entry for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:47 | INFO     | services.database:add_price_history:359 - Added price history entry for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-17 13:03:47 | INFO     | services.price_service:update_machine_price:347 - Price updated successfully for ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-17 13:03:47 | INFO     | api.routes:update_machine_price:154 - Price update successful for ComMarker B6 20W
2025-04-17 13:20:59 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 13:20:59 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:20:59 | INFO     | scrapers.price_extractor:__init__:67 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 13:20:59 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 13:20:59 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 13:21:19 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 13:21:19 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:21:19 | INFO     | scrapers.price_extractor:__init__:67 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 13:21:19 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 13:21:19 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 13:21:31 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 13:21:31 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:21:31 | INFO     | scrapers.price_extractor:__init__:67 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 13:21:31 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 13:21:31 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 13:31:09 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 13:31:09 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:31:09 | INFO     | scrapers.price_extractor:__init__:80 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 13:31:09 | INFO     | services.price_service:__init__:16 - Price service initialized
2025-04-17 13:31:09 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 13:44:42 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 13:44:42 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:44:42 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 13:44:42 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 13:44:42 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:44:42 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 13:44:42 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 13:51:01 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 13:51:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:51:01 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 13:51:01 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 13:51:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 13:51:01 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 13:51:01 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 14:05:01 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 14:05:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:05:01 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 14:05:01 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 14:05:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:05:01 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 14:05:01 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 14:11:28 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 14:11:28 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:11:28 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 14:11:28 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 14:11:28 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:11:28 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 14:11:28 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 14:37:45 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 14:37:45 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:37:45 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 14:37:45 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 14:37:45 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:37:45 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 14:37:45 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 14:39:42 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:39:43 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:39:43 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:39:43 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 14:39:43 | INFO     | services.database:get_machines_needing_update:428 - Found 57 machines for price update
2025-04-17 14:39:53 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:39:53 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:39:53 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:39:58 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:39:58 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:39:58 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:40:02 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 14:40:02 | INFO     | services.database:get_machines_needing_update:428 - Found 57 machines for price update
2025-04-17 14:40:02 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:40:02 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:40:02 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:41:29 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 14:41:29 | INFO     | services.database:get_machines_needing_update:428 - Found 57 machines for price update
2025-04-17 14:41:29 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:41:30 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:41:30 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:41:36 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:36 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:36 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:41:36 | INFO     | api.routes:update_machine_price:113 - Machine found: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:41:36 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:36 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:36 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:36 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:41:36 | INFO     | services.price_service:update_machine_price:249 - Found machine: Acmer P3 (Current price: $1199.0)
2025-04-17 14:41:36 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 14:41:36 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 14:41:38 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 1.81 seconds
2025-04-17 14:41:38 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1636549 bytes)
2025-04-17 14:41:38 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1999.0 using regex pattern
2025-04-17 14:41:39 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:726 - Extracted price 1999.0 near Add to Cart button
2025-04-17 14:41:39 | INFO     | scrapers.price_extractor:extract_price:248 - Best extraction result needs verification: 1999.0 (confidence: 0.6)
2025-04-17 14:41:39 | ERROR    | services.database_service:get_machine_specs:57 - Error fetching machine specs for 8054eeb8-504f-4791-9f48-a99fe0669664: {'code': '42703', 'details': None, 'hint': None, 'message': 'column machines.name does not exist'}
2025-04-17 14:41:39 | INFO     | scrapers.price_extractor:_extract_using_claude:821 - Calling Claude API to extract price for https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 14:41:40 | INFO     | scrapers.price_extractor:_extract_using_claude:874 - Extracted price 1199.0 from Claude multi-price response
2025-04-17 14:41:40 | INFO     | scrapers.price_extractor:_verify_and_correct_price:934 - PRICE CORRECTION: Current $1199.0, Previous $1199.0, Ratio: 100.00%
2025-04-17 14:41:40 | INFO     | scrapers.price_extractor:extract_price:282 - Using Claude price: $1199.0
2025-04-17 14:41:40 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1199.0 using method: Claude AI (multi-price extraction)
2025-04-17 14:41:40 | INFO     | services.price_service:update_machine_price:325 - Price unchanged for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-17 14:41:40 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine 8054eeb8-504f-4791-9f48-a99fe0669664 to $1199.0
2025-04-17 14:41:40 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:41 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:41:41 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Acmer P3' with DB ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:51 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:51 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 14:41:51 | INFO     | services.database:add_price_history:359 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:41:51 | ERROR    | services.price_service:update_machine_price:410 - Error processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664: DatabaseService.add_price_history() got an unexpected keyword argument 'extraction_method'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x1070ae8e0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10420f2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x10426c540>
    └ <uvicorn.server.Server object at 0x1070da290>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x10426c5e0>
           │       │   └ <uvicorn.server.Server object at 0x1070da290>
           │       └ <function run at 0x103a58e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1070025c0>
           │      └ <function Runner.run at 0x103ac4720>
           └ <asyncio.runners.Runner object at 0x1070da450>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x105f0c6c0>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1070da450>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x107121810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd850>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x107077e50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x107121810>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd850>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd850>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10718ca50>
          └ <fastapi.applications.FastAPI object at 0x107077e50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10718b4c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x106a3ff90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10718ca50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10718b4c0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x105139760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x106a3ff90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x106a3ff90>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x107076ed0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x106a3ff90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x106a3ff90>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1071cf3d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x10718cd90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x107076ed0>
          └ <function wrap_app_handling_exceptions at 0x1050847c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10718b560>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x10718cd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10718b560>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10718cd90>>
          └ <fastapi.routing.APIRouter object at 0x10718cd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10718b560>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x105085da0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10718b560>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x107189ee0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10718b560>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1071cdd10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10718b6a0>
          └ <function wrap_app_handling_exceptions at 0x1050847c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10718b740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1071dd8...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10718b6a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1071cdd10>
                     └ <function get_request_handler.<locals>.app at 0x107189f80>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1050858a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': MachineUpdateRequest(machine_id='8054eeb8-504f-4791-9f48-a99fe0669664', confirm=False, new_price=None)}
                 │         └ <function update_machine_price at 0x10706b240>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 122, in update_machine_price
    result = await price_service.update_machine_price(request.machine_id)
                   │             │                    │       └ '8054eeb8-504f-4791-9f48-a99fe0669664'
                   │             │                    └ MachineUpdateRequest(machine_id='8054eeb8-504f-4791-9f48-a99fe0669664', confirm=False, new_price=None)
                   │             └ <function PriceService.update_machine_price at 0x10706aca0>
                   └ <services.price_service.PriceService object at 0x10526b3d0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 374, in update_machine_price
    await self.db_service.add_price_history(
          │    │          └ <function DatabaseService.add_price_history at 0x106c66840>
          │    └ <services.database.DatabaseService object at 0x10527cb90>
          └ <services.price_service.PriceService object at 0x10526b3d0>

TypeError: DatabaseService.add_price_history() got an unexpected keyword argument 'extraction_method'
2025-04-17 14:41:51 | ERROR    | api.routes:update_machine_price:139 - Price update failed for machine 8054eeb8-504f-4791-9f48-a99fe0669664: An error occurred while processing the price update: DatabaseService.add_price_history() got an unexpected keyword argument 'extraction_method'
2025-04-17 14:43:51 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 14:43:51 | INFO     | services.database:get_machines_needing_update:428 - Found 57 machines for price update
2025-04-17 14:43:51 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:43:51 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:43:51 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:51:57 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 14:51:57 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:51:57 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 14:51:57 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 14:51:57 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:51:57 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 14:51:57 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 14:52:04 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 14:52:05 | INFO     | services.database:get_machines_needing_update:433 - Found 57 machines for price update
2025-04-17 14:52:05 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:52:05 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:52:05 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:52:09 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:09 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:10 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:10 | INFO     | api.routes:update_machine_price:113 - Machine found: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:10 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:10 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:10 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:10 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:10 | INFO     | services.price_service:update_machine_price:249 - Found machine: Acmer P3 (Current price: $1199.0)
2025-04-17 14:52:10 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 14:52:10 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 14:52:11 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 1.20 seconds
2025-04-17 14:52:11 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1636546 bytes)
2025-04-17 14:52:11 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1999.0 using regex pattern
2025-04-17 14:52:12 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:726 - Extracted price 1999.0 near Add to Cart button
2025-04-17 14:52:12 | INFO     | scrapers.price_extractor:extract_price:248 - Best extraction result needs verification: 1999.0 (confidence: 0.6)
2025-04-17 14:52:12 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for 8054eeb8-504f-4791-9f48-a99fe0669664: {'Machine Name': 'Acmer P3', 'Laser Power A': '10'}
2025-04-17 14:52:12 | INFO     | scrapers.price_extractor:_extract_using_claude:765 - Got machine specs for 8054eeb8-504f-4791-9f48-a99fe0669664: Acmer P3, 10W
2025-04-17 14:52:12 | INFO     | scrapers.price_extractor:_extract_using_claude:821 - Calling Claude API to extract price for Acmer P3
2025-04-17 14:52:13 | INFO     | scrapers.price_extractor:_extract_using_claude:874 - Extracted price 1199.0 from Claude multi-price response
2025-04-17 14:52:13 | INFO     | scrapers.price_extractor:_verify_and_correct_price:934 - PRICE CORRECTION: Current $1199.0, Previous $1199.0, Ratio: 100.00%
2025-04-17 14:52:13 | INFO     | scrapers.price_extractor:extract_price:282 - Using Claude price: $1199.0
2025-04-17 14:52:13 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1199.0 using method: Claude AI (multi-price extraction)
2025-04-17 14:52:13 | INFO     | services.price_service:update_machine_price:325 - Price unchanged for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-17 14:52:13 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine 8054eeb8-504f-4791-9f48-a99fe0669664 to $1199.0
2025-04-17 14:52:13 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:13 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:13 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Acmer P3' with DB ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:16 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:16 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 14:52:16 | INFO     | services.database:add_price_history:364 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:16 | ERROR    | services.database:add_price_history:369 - Error adding price history for machine 8054eeb8-504f-4791-9f48-a99fe0669664: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'extraction_method' column of 'price_history' in the schema cache"}
2025-04-17 14:52:16 | INFO     | services.price_service:update_machine_price:386 - Price unchanged for Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:16 | INFO     | api.routes:update_machine_price:154 - Price update successful for Acmer P3
2025-04-17 14:52:46 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:46 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:47 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:47 | INFO     | api.routes:update_machine_price:113 - Machine found: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:47 | INFO     | api.routes:update_machine_price:117 - Confirmed price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-17 14:52:47 | INFO     | services.price_service:save_machine_price:136 - Saving confirmed price 1199.0 for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:47 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:47 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:47 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine 8054eeb8-504f-4791-9f48-a99fe0669664 to $1199.0
2025-04-17 14:52:47 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:48 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:52:48 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Acmer P3' with DB ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:48 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:48 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 14:52:48 | INFO     | services.database:add_price_history:364 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:48 | INFO     | services.database:add_price_history:364 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:52:48 | INFO     | services.price_service:save_machine_price:177 - Successfully updated price for machine 8054eeb8-504f-4791-9f48-a99fe0669664 from 1199.0 to 1199.0
2025-04-17 14:52:48 | INFO     | api.routes:update_machine_price:154 - Price update successful for Acmer P3
2025-04-17 14:52:49 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:52:49 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:52:49 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:56:31 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 14:56:31 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:56:31 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 14:56:31 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 14:56:31 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 14:56:31 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 14:56:31 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 14:56:37 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 14:56:38 | INFO     | services.database:get_machines_needing_update:433 - Found 57 machines for price update
2025-04-17 14:56:38 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:56:38 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:56:38 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 14:56:41 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:41 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:42 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:56:42 | INFO     | api.routes:update_machine_price:113 - Machine found: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:56:42 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:42 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:42 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:42 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:56:42 | INFO     | services.price_service:update_machine_price:249 - Found machine: Acmer P3 (Current price: $1199.0)
2025-04-17 14:56:42 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 14:56:42 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-17 14:56:44 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver in 1.47 seconds
2025-04-17 14:56:44 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1636549 bytes)
2025-04-17 14:56:44 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1999.0 using regex pattern
2025-04-17 14:56:44 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:726 - Extracted price 1999.0 near Add to Cart button
2025-04-17 14:56:44 | INFO     | scrapers.price_extractor:extract_price:248 - Best extraction result needs verification: 1999.0 (confidence: 0.6)
2025-04-17 14:56:45 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for 8054eeb8-504f-4791-9f48-a99fe0669664: {'Machine Name': 'Acmer P3', 'Laser Power A': '10'}
2025-04-17 14:56:45 | INFO     | scrapers.price_extractor:_extract_using_claude:765 - Got machine specs for 8054eeb8-504f-4791-9f48-a99fe0669664: Acmer P3, 10W
2025-04-17 14:56:45 | INFO     | scrapers.price_extractor:_extract_using_claude:821 - Calling Claude API to extract price for Acmer P3
2025-04-17 14:56:46 | INFO     | scrapers.price_extractor:_extract_using_claude:874 - Extracted price 1199.0 from Claude multi-price response
2025-04-17 14:56:46 | INFO     | scrapers.price_extractor:_verify_and_correct_price:934 - PRICE CORRECTION: Current $1199.0, Previous $1199.0, Ratio: 100.00%
2025-04-17 14:56:46 | INFO     | scrapers.price_extractor:extract_price:282 - Using Claude price: $1199.0
2025-04-17 14:56:46 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1199.0 using method: Claude AI (multi-price extraction)
2025-04-17 14:56:46 | INFO     | services.price_service:update_machine_price:325 - Price unchanged for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-17 14:56:46 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine 8054eeb8-504f-4791-9f48-a99fe0669664 to $1199.0
2025-04-17 14:56:46 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:46 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:56:46 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Acmer P3' with DB ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:51 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:51 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 14:56:51 | INFO     | services.database:add_price_history:364 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:51 | INFO     | services.database:add_price_history:364 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:56:51 | INFO     | services.price_service:update_machine_price:386 - Price unchanged for Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:56:51 | INFO     | api.routes:update_machine_price:154 - Price update successful for Acmer P3
2025-04-17 14:57:12 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:12 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:12 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:57:12 | INFO     | api.routes:update_machine_price:113 - Machine found: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:57:12 | INFO     | api.routes:update_machine_price:117 - Confirmed price update for machine 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0
2025-04-17 14:57:12 | INFO     | services.price_service:save_machine_price:136 - Saving confirmed price 1199.0 for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:12 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:13 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:57:13 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine 8054eeb8-504f-4791-9f48-a99fe0669664 to $1199.0
2025-04-17 14:57:13 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:13 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-17 14:57:13 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Acmer P3' with DB ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:13 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:13 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 14:57:13 | INFO     | services.database:add_price_history:364 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:13 | INFO     | services.database:add_price_history:364 - Added price history entry for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-17 14:57:13 | INFO     | services.price_service:save_machine_price:177 - Successfully updated price for machine 8054eeb8-504f-4791-9f48-a99fe0669664 from 1199.0 to 1199.0
2025-04-17 14:57:13 | INFO     | api.routes:update_machine_price:154 - Price update successful for Acmer P3
2025-04-17 14:57:14 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 14:57:14 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 14:57:14 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:03:26 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:26 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:26 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:03:26 | INFO     | api.routes:update_machine_price:113 - Machine found: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:03:26 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:26 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:26 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:27 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:03:27 | INFO     | services.price_service:update_machine_price:249 - Found machine: Algolaser DIY Kit MK2 (Current price: $339.0)
2025-04-17 15:03:27 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-17 15:03:27 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-17 15:03:27 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 in 0.97 seconds
2025-04-17 15:03:28 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1642261 bytes)
2025-04-17 15:03:28 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 799.01 using selector '.price'
2025-04-17 15:03:28 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1599.0 using regex pattern
2025-04-17 15:03:28 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:726 - Extracted price 599.0 near Add to Cart button
2025-04-17 15:03:28 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 799.01 (method: CSS Selector '.price', confidence: 1.0)
2025-04-17 15:03:28 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $799.01 using method: CSS Selector '.price'
2025-04-17 15:03:28 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine e4093bf6-7a1c-4325-9094-8c572a307459 to $799.01
2025-04-17 15:03:28 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:28 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:03:28 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Algolaser DIY Kit MK2' with DB ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:33 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:33 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 15:03:33 | INFO     | services.database:add_price_history:364 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:33 | INFO     | services.database:add_price_history:364 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:03:33 | INFO     | services.price_service:update_machine_price:386 - Price updated successfully for Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:03:33 | INFO     | api.routes:update_machine_price:154 - Price update successful for Algolaser DIY Kit MK2
2025-04-17 15:11:26 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 15:11:26 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:11:26 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 15:11:26 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 15:11:26 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:11:26 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 15:11:26 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 15:11:41 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:11:41 | INFO     | services.database:get_machines_needing_update:433 - Found 57 machines for price update
2025-04-17 15:11:41 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:11:41 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:11:41 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:11:55 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:11:55 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:11:55 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:11:55 | INFO     | api.routes:update_machine_price:113 - Machine found: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:11:55 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:11:55 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:11:55 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:11:55 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:11:55 | INFO     | services.price_service:update_machine_price:249 - Found machine: Algolaser DIY Kit MK2 (Current price: $339.0)
2025-04-17 15:11:55 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-17 15:11:55 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-17 15:11:56 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 in 0.78 seconds
2025-04-17 15:11:56 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1642261 bytes)
2025-04-17 15:11:56 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 799.01 using selector '.price'
2025-04-17 15:11:56 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1599.0 using regex pattern
2025-04-17 15:11:57 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:726 - Extracted price 599.0 near Add to Cart button
2025-04-17 15:11:57 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 799.01 (method: CSS Selector '.price', confidence: 1.0)
2025-04-17 15:11:57 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $799.01 using method: CSS Selector '.price'
2025-04-17 15:11:57 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine e4093bf6-7a1c-4325-9094-8c572a307459 to $799.01
2025-04-17 15:11:57 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:11:57 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:11:57 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Algolaser DIY Kit MK2' with DB ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:12:01 | WARNING  | services.database:update_machine_price:261 - ⚠️ Update query returned no results with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:12:01 | INFO     | services.database:update_machine_price:285 - ℹ️ Main update failed, but still adding price history record
2025-04-17 15:12:01 | INFO     | services.database:add_price_history:364 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:12:01 | INFO     | services.database:add_price_history:364 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:12:01 | INFO     | services.price_service:update_machine_price:386 - Price updated successfully for Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:12:01 | INFO     | api.routes:update_machine_price:154 - Price update successful for Algolaser DIY Kit MK2
2025-04-17 15:15:16 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 15:15:16 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:15:16 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 15:15:16 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 15:15:16 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:15:16 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 15:15:16 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 15:15:25 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:15:25 | INFO     | services.database:get_machines_needing_update:459 - Found 57 machines for price update
2025-04-17 15:15:25 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:15:25 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:15:25 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:15:33 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:33 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:34 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:15:34 | INFO     | api.routes:update_machine_price:113 - Machine found: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:15:34 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:34 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:34 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:34 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:15:34 | INFO     | services.price_service:update_machine_price:249 - Found machine: Algolaser DIY Kit MK2 (Current price: $339.0)
2025-04-17 15:15:34 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-17 15:15:34 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-17 15:15:34 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 in 0.31 seconds
2025-04-17 15:15:35 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1642261 bytes)
2025-04-17 15:15:35 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 799.01 using selector '.price'
2025-04-17 15:15:35 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1599.0 using regex pattern
2025-04-17 15:15:35 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:726 - Extracted price 599.0 near Add to Cart button
2025-04-17 15:15:35 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 799.01 (method: CSS Selector '.price', confidence: 1.0)
2025-04-17 15:15:35 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $799.01 using method: CSS Selector '.price'
2025-04-17 15:15:35 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine e4093bf6-7a1c-4325-9094-8c572a307459 to $799.01
2025-04-17 15:15:35 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:35 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:15:35 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Algolaser DIY Kit MK2' with DB ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:39 | WARNING  | services.database:update_machine_price:264 - ⚠️ Update query returned no results with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:40 | INFO     | services.database:update_machine_price:304 - ℹ️ Main update failed, but still adding price history record
2025-04-17 15:15:40 | INFO     | services.database:add_price_history:390 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:40 | INFO     | services.database:add_price_history:390 - Added price history entry for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-17 15:15:40 | INFO     | services.price_service:update_machine_price:386 - Price updated successfully for Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-17 15:15:40 | INFO     | api.routes:update_machine_price:154 - Price update successful for Algolaser DIY Kit MK2
2025-04-17 15:16:26 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:16:27 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:16:27 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:16:32 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:16:33 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:16:33 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:16:36 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:16:36 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:16:36 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:16:40 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:16:40 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:16:40 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:17:00 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:00 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:01 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:17:01 | INFO     | api.routes:update_machine_price:113 - Machine found: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:17:01 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:01 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:01 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:01 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:17:01 | INFO     | services.price_service:update_machine_price:249 - Found machine: Atomstack M4 (Current price: $1219.0)
2025-04-17 15:17:01 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:17:01 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:17:02 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine in 0.73 seconds
2025-04-17 15:17:02 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (315579 bytes)
2025-04-17 15:17:02 | WARNING  | scrapers.price_extractor:_parse_price:1087 - Could not convert final cleaned price '1499.001219.00' to Decimal from original '$1,499.00 $1,219.00 SAVE 19%
'
2025-04-17 15:17:02 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1499.0 using regex pattern
2025-04-17 15:17:02 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 1499.0 (method: Regex Pattern, confidence: 0.7)
2025-04-17 15:17:02 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1499.0 using method: Regex Pattern
2025-04-17 15:17:02 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e to $1499.0
2025-04-17 15:17:02 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:02 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:17:02 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Atomstack M4' with DB ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:04 | WARNING  | services.database:update_machine_price:264 - ⚠️ Update query returned no results with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:04 | INFO     | services.database:update_machine_price:304 - ℹ️ Main update failed, but still adding price history record
2025-04-17 15:17:04 | INFO     | services.database:add_price_history:390 - Added price history entry for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:04 | INFO     | services.database:add_price_history:390 - Added price history entry for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:17:04 | INFO     | services.price_service:update_machine_price:386 - Price updated successfully for Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:17:04 | INFO     | api.routes:update_machine_price:154 - Price update successful for Atomstack M4
2025-04-17 15:19:39 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:19:40 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:19:40 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:19:44 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:19:45 | INFO     | services.database:get_machines_needing_update:459 - Found 57 machines for price update
2025-04-17 15:19:45 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:19:45 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:19:45 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:26:34 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 15:26:34 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:26:34 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 15:26:34 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 15:26:34 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:26:34 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 15:26:34 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 15:26:59 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:26:59 | INFO     | services.database:get_machines_needing_update:465 - Found 57 machines for price update
2025-04-17 15:26:59 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:26:59 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:26:59 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:10 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:10 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:10 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:13 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:13 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:13 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:16 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:16 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:16 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:19 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:19 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:19 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:22 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:22 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:22 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:24 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:24 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:24 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:26 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:26 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:26 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:30 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:30 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:30 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:33 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:33 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:33 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:38 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:38 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:38 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:41 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:41 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:41 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:44 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:44 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:44 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:47 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:47 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:47 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:27:56 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:27:56 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:27:56 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:28:19 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:28:20 | INFO     | services.database:get_machines_needing_update:465 - Found 57 machines for price update
2025-04-17 15:28:20 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:28:20 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:28:20 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:30:10 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:10 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:10 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:30:10 | INFO     | api.routes:update_machine_price:113 - Machine found: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:30:10 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:10 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:10 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:10 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:30:10 | INFO     | services.price_service:update_machine_price:249 - Found machine: Atomstack M4 (Current price: $1219.0)
2025-04-17 15:30:10 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:30:10 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:30:11 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine in 0.60 seconds
2025-04-17 15:30:11 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (315579 bytes)
2025-04-17 15:30:11 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 1219.0 using selector '[data-product-price]'
2025-04-17 15:30:11 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1499.0 using regex pattern
2025-04-17 15:30:11 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 1219.0 (method: CSS Selector '[data-product-price]', confidence: 1.0)
2025-04-17 15:30:11 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1219.0 using method: CSS Selector '[data-product-price]'
2025-04-17 15:30:11 | INFO     | services.price_service:update_machine_price:325 - Price unchanged for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e: 1219.0
2025-04-17 15:30:11 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e to $1219.0
2025-04-17 15:30:11 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:11 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:30:11 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Atomstack M4' with DB ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:13 | WARNING  | services.database:update_machine_price:264 - ⚠️ Update query returned no results with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:13 | INFO     | services.database:update_machine_price:304 - ℹ️ Main update failed, but still adding price history record
2025-04-17 15:30:13 | INFO     | services.database:add_price_history:396 - Added price history entry for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:30:13 | INFO     | services.price_service:update_machine_price:388 - Price unchanged for Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:30:13 | INFO     | api.routes:update_machine_price:154 - Price update successful for Atomstack M4
2025-04-17 15:34:53 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:34:54 | INFO     | services.database:get_machines_needing_update:465 - Found 57 machines for price update
2025-04-17 15:34:54 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:34:54 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:34:54 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:37:15 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 15:37:15 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:37:15 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 15:37:15 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 15:37:15 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:37:15 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 15:37:15 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 15:37:35 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:37:36 | INFO     | services.database:get_machines_needing_update:465 - Found 57 machines for price update
2025-04-17 15:37:36 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:37:36 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:37:36 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:37:42 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:42 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:42 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:37:42 | INFO     | api.routes:update_machine_price:113 - Machine found: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:37:42 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:42 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:42 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:43 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:37:43 | INFO     | services.price_service:update_machine_price:249 - Found machine: Atomstack M4 (Current price: $1219.0)
2025-04-17 15:37:43 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:37:43 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:37:43 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine in 0.52 seconds
2025-04-17 15:37:43 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (315579 bytes)
2025-04-17 15:37:43 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 1219.0 using selector '[data-product-price]'
2025-04-17 15:37:43 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1499.0 using regex pattern
2025-04-17 15:37:43 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 1219.0 (method: CSS Selector '[data-product-price]', confidence: 1.0)
2025-04-17 15:37:43 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1219.0 using method: CSS Selector '[data-product-price]'
2025-04-17 15:37:43 | INFO     | services.price_service:update_machine_price:325 - Price unchanged for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e: 1219.0
2025-04-17 15:37:43 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e to $1219.0
2025-04-17 15:37:43 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:44 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:37:44 | INFO     | services.database:update_machine_price:194 - ✅ Found machine 'Atomstack M4' with DB ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:46 | WARNING  | services.database:update_machine_price:264 - ⚠️ Update query returned no results with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:46 | INFO     | services.database:update_machine_price:304 - ℹ️ Main update failed, but still adding price history record
2025-04-17 15:37:47 | INFO     | services.database:add_price_history:396 - Added price history entry for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:37:47 | INFO     | services.price_service:update_machine_price:388 - Price unchanged for Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:37:47 | INFO     | api.routes:update_machine_price:154 - Price update successful for Atomstack M4
2025-04-17 15:38:42 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:38:42 | INFO     | services.database:get_machines_needing_update:465 - Found 57 machines for price update
2025-04-17 15:38:42 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:38:42 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:38:42 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:38:52 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:38:52 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:38:52 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:39:42 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 15:39:42 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:39:42 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 15:39:42 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 15:39:42 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:39:42 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 15:39:42 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 15:39:47 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:39:47 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 15:39:47 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:39:47 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:39:47 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:39:51 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:51 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:51 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:39:51 | INFO     | api.routes:update_machine_price:113 - Machine found: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:39:51 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:51 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:51 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:51 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:39:51 | INFO     | services.price_service:update_machine_price:249 - Found machine: Atomstack M4 (Current price: $1219.0)
2025-04-17 15:39:51 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:39:51 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-17 15:39:52 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine in 0.55 seconds
2025-04-17 15:39:52 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (315579 bytes)
2025-04-17 15:39:52 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 1219.0 using selector '[data-product-price]'
2025-04-17 15:39:52 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 1499.0 using regex pattern
2025-04-17 15:39:52 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 1219.0 (method: CSS Selector '[data-product-price]', confidence: 1.0)
2025-04-17 15:39:52 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1219.0 using method: CSS Selector '[data-product-price]'
2025-04-17 15:39:52 | INFO     | services.price_service:update_machine_price:325 - Price unchanged for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e: 1219.0
2025-04-17 15:39:52 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e to $1219.0
2025-04-17 15:39:52 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:52 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:39:52 | INFO     | services.database:update_machine_price:174 - ✅ Found machine 'Atomstack M4' with DB ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:53 | INFO     | services.database:update_machine_price:205 - ✅ Successfully updated price for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e to 1219.0
2025-04-17 15:39:53 | INFO     | services.database:add_price_history:306 - Added price history entry for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-17 15:39:53 | INFO     | services.price_service:update_machine_price:388 - Price unchanged for Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-17 15:39:53 | INFO     | api.routes:update_machine_price:154 - Price update successful for Atomstack M4
2025-04-17 15:42:00 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:00 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:00 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack X70 Max (ID: ebd7976d-9fa0-4142-84cf-065d7adcb870)
2025-04-17 15:42:00 | INFO     | api.routes:update_machine_price:113 - Machine found: Atomstack X70 Max (ID: ebd7976d-9fa0-4142-84cf-065d7adcb870)
2025-04-17 15:42:00 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:00 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:00 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:01 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack X70 Max (ID: ebd7976d-9fa0-4142-84cf-065d7adcb870)
2025-04-17 15:42:01 | INFO     | services.price_service:update_machine_price:249 - Found machine: Atomstack X70 Max (Current price: $1849.0)
2025-04-17 15:42:01 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver
2025-04-17 15:42:01 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver
2025-04-17 15:42:01 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver in 0.49 seconds
2025-04-17 15:42:01 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (380935 bytes)
2025-04-17 15:42:01 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 184.0 using selector '[data-price]'
2025-04-17 15:42:01 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 4166.0 using regex pattern
2025-04-17 15:42:02 | INFO     | scrapers.price_extractor:extract_price:248 - Best extraction result needs verification: 184.0 (confidence: 0.5)
2025-04-17 15:42:02 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for ebd7976d-9fa0-4142-84cf-065d7adcb870: {'Machine Name': 'Atomstack X70 Max', 'Laser Power A': '70'}
2025-04-17 15:42:02 | INFO     | scrapers.price_extractor:_extract_using_claude:765 - Got machine specs for ebd7976d-9fa0-4142-84cf-065d7adcb870: Atomstack X70 Max, 70W
2025-04-17 15:42:02 | INFO     | scrapers.price_extractor:_extract_using_claude:821 - Calling Claude API to extract price for Atomstack X70 Max
2025-04-17 15:42:03 | INFO     | scrapers.price_extractor:_extract_using_claude:874 - Extracted price 1849.0 from Claude multi-price response
2025-04-17 15:42:03 | INFO     | scrapers.price_extractor:_verify_and_correct_price:934 - PRICE CORRECTION: Current $1849.0, Previous $1849.0, Ratio: 100.00%
2025-04-17 15:42:03 | INFO     | scrapers.price_extractor:extract_price:282 - Using Claude price: $1849.0
2025-04-17 15:42:03 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1849.0 using method: Claude AI (multi-price extraction)
2025-04-17 15:42:03 | INFO     | services.price_service:update_machine_price:325 - Price unchanged for machine ebd7976d-9fa0-4142-84cf-065d7adcb870: 1849.0
2025-04-17 15:42:03 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine ebd7976d-9fa0-4142-84cf-065d7adcb870 to $1849.0
2025-04-17 15:42:03 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:03 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Atomstack X70 Max (ID: ebd7976d-9fa0-4142-84cf-065d7adcb870)
2025-04-17 15:42:03 | INFO     | services.database:update_machine_price:174 - ✅ Found machine 'Atomstack X70 Max' with DB ID: ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:04 | INFO     | services.database:update_machine_price:205 - ✅ Successfully updated price for machine ebd7976d-9fa0-4142-84cf-065d7adcb870 to 1849.0
2025-04-17 15:42:05 | INFO     | services.database:add_price_history:306 - Added price history entry for machine ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-17 15:42:05 | INFO     | services.price_service:update_machine_price:388 - Price unchanged for Atomstack X70 Max (ID: ebd7976d-9fa0-4142-84cf-065d7adcb870)
2025-04-17 15:42:05 | INFO     | api.routes:update_machine_price:154 - Price update successful for Atomstack X70 Max
2025-04-17 15:42:18 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:42:19 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 15:42:19 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:42:19 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:42:19 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:42:31 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:31 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:32 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:42:32 | INFO     | api.routes:update_machine_price:113 - Machine found: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:42:32 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:32 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:32 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:32 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:42:32 | INFO     | services.price_service:update_machine_price:249 - Found machine: Cloudray GM-100 LiteMarker (Current price: $9499)
2025-04-17 15:42:32 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 15:42:32 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 15:42:33 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area in 0.51 seconds
2025-04-17 15:42:33 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (850612 bytes)
2025-04-17 15:42:33 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:504 - Extracted price 949.0 using selector '[data-price]'
2025-04-17 15:42:33 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:593 - Extracted price 15966.0 using regex pattern
2025-04-17 15:42:33 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:726 - Extracted price 12599.0 near Add to Cart button
2025-04-17 15:42:33 | INFO     | scrapers.price_extractor:extract_price:256 - Direct extraction successful: 12599.0 (method: Near Add to Cart, confidence: 0.84)
2025-04-17 15:42:33 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $12599.0 using method: Near Add to Cart
2025-04-17 15:42:33 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d3707433-2475-4b6c-8007-1e7126afd86c to $12599.0
2025-04-17 15:42:33 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:33 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:42:33 | INFO     | services.database:update_machine_price:174 - ✅ Found machine 'Cloudray GM-100 LiteMarker' with DB ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:35 | INFO     | services.database:update_machine_price:205 - ✅ Successfully updated price for machine d3707433-2475-4b6c-8007-1e7126afd86c to 12599.0
2025-04-17 15:42:36 | INFO     | services.database:add_price_history:306 - Added price history entry for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:42:36 | INFO     | services.price_service:update_machine_price:388 - Price updated successfully for Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:42:36 | INFO     | api.routes:update_machine_price:154 - Price update successful for Cloudray GM-100 LiteMarker
2025-04-17 15:48:47 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:48:47 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:48:47 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:48:47 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:48:48 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 15:49:11 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:49:11 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:49:11 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:51:00 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:51:01 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 15:51:01 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:51:01 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:51:01 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:54:22 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 15:54:22 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:54:22 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 15:54:22 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 15:54:22 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:54:22 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 15:54:22 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 15:55:44 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:44 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:45 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:55:45 | INFO     | api.routes:update_machine_price:113 - Machine found: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:55:45 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:45 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:45 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:45 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:55:45 | INFO     | services.price_service:update_machine_price:249 - Found machine: Cloudray GM-100 LiteMarker (Current price: $9499)
2025-04-17 15:55:45 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 15:55:45 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 15:55:46 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area in 0.48 seconds
2025-04-17 15:55:46 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (850612 bytes)
2025-04-17 15:55:46 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:549 - Extracted price 949.0 using selector '[data-price]'
2025-04-17 15:55:46 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:638 - Extracted price 15966.0 using regex pattern
2025-04-17 15:55:46 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:724 - Detected sale indicators in container: ['sale', 'off', '% off', 'discount', 'save', 'special']
2025-04-17 15:55:46 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:810 - Extracted price 12599.0 near Add to Cart button (sort method: ascending (sale detected))
2025-04-17 15:55:46 | INFO     | scrapers.price_extractor:extract_price:258 - Significant price change detected: $9499 -> $12599.0 (32.64% change)
2025-04-17 15:55:47 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for d3707433-2475-4b6c-8007-1e7126afd86c: {'Machine Name': 'Cloudray GM-100 LiteMarker', 'Laser Power A': '10'}
2025-04-17 15:55:47 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1268 - Got machine specs for d3707433-2475-4b6c-8007-1e7126afd86c: Cloudray GM-100 LiteMarker, 10W
2025-04-17 15:55:47 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1303 - Asking Claude to verify price change: $9499 -> $12599.0
2025-04-17 15:55:49 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1316 - Claude price verification result: ALTERNATIVE PRICE: $12599.0

The website shows $12599.0 as the current price, which appears to be the valid selling price. There is no indication of a sale or discount, and $12599.0 is prominently displayed near the "Add to Cart" button.
2025-04-17 15:55:49 | INFO     | scrapers.price_extractor:extract_price:287 - Claude corrected price from $12599.0 to $125.0
2025-04-17 15:55:49 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $125.0 using method: Claude Alternative Price
2025-04-17 15:55:49 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d3707433-2475-4b6c-8007-1e7126afd86c to $125.0
2025-04-17 15:55:49 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:49 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:55:49 | INFO     | services.database:update_machine_price:174 - ✅ Found machine 'Cloudray GM-100 LiteMarker' with DB ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:50 | INFO     | services.database:update_machine_price:205 - ✅ Successfully updated price for machine d3707433-2475-4b6c-8007-1e7126afd86c to 125.0
2025-04-17 15:55:50 | INFO     | services.database:add_price_history:306 - Added price history entry for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:55:50 | INFO     | services.price_service:update_machine_price:388 - Price updated successfully for Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:55:50 | INFO     | api.routes:update_machine_price:154 - Price update successful for Cloudray GM-100 LiteMarker
2025-04-17 15:56:48 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:56:48 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 15:56:48 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:56:48 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:56:48 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:56:55 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:56:56 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:56:56 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:57:24 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:57:24 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 15:57:24 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:57:24 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:57:24 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:58:46 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 15:58:46 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 15:58:46 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 15:58:47 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 15:58:47 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 15:58:56 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 15:58:56 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:58:56 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 15:58:56 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 15:58:56 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 15:58:56 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 15:58:56 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 15:59:09 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:09 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:09 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:59:09 | INFO     | api.routes:update_machine_price:113 - Machine found: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:59:09 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:09 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:09 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:09 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:59:09 | INFO     | services.price_service:update_machine_price:249 - Found machine: Cloudray GM-100 LiteMarker (Current price: $9499)
2025-04-17 15:59:09 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 15:59:09 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 15:59:10 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area in 0.44 seconds
2025-04-17 15:59:10 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (850612 bytes)
2025-04-17 15:59:10 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:549 - Extracted price 949.0 using selector '[data-price]'
2025-04-17 15:59:10 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:638 - Extracted price 15966.0 using regex pattern
2025-04-17 15:59:10 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:724 - Detected sale indicators in container: ['sale', 'off', '% off', 'discount', 'save', 'special']
2025-04-17 15:59:10 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:810 - Extracted price 12599.0 near Add to Cart button (sort method: ascending (sale detected))
2025-04-17 15:59:10 | INFO     | scrapers.price_extractor:extract_price:258 - Significant price change detected: $9499 -> $12599.0 (32.64% change)
2025-04-17 15:59:11 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for d3707433-2475-4b6c-8007-1e7126afd86c: {'Machine Name': 'Cloudray GM-100 LiteMarker', 'Laser Power A': '10'}
2025-04-17 15:59:11 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1268 - Got machine specs for d3707433-2475-4b6c-8007-1e7126afd86c: Cloudray GM-100 LiteMarker, 10W
2025-04-17 15:59:11 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1303 - Asking Claude to verify price change: $9499 -> $12599.0
2025-04-17 15:59:12 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1316 - Claude price verification result: NEW PRICE CORRECT
2025-04-17 15:59:12 | INFO     | scrapers.price_extractor:extract_price:291 - Claude confirmed the price change to $12599.0 is correct
2025-04-17 15:59:12 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $12599.0 using method: Near Add to Cart
2025-04-17 15:59:12 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d3707433-2475-4b6c-8007-1e7126afd86c to $12599.0
2025-04-17 15:59:12 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:12 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:59:12 | INFO     | services.database:update_machine_price:174 - ✅ Found machine 'Cloudray GM-100 LiteMarker' with DB ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:13 | INFO     | services.database:update_machine_price:205 - ✅ Successfully updated price for machine d3707433-2475-4b6c-8007-1e7126afd86c to 12599.0
2025-04-17 15:59:13 | INFO     | services.database:add_price_history:306 - Added price history entry for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 15:59:13 | INFO     | services.price_service:update_machine_price:388 - Price updated successfully for Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 15:59:13 | INFO     | api.routes:update_machine_price:154 - Price update successful for Cloudray GM-100 LiteMarker
2025-04-17 16:01:46 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 16:01:47 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 16:01:47 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 16:01:47 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 16:01:47 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 16:01:53 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 16:01:54 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 16:01:54 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 16:02:41 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 16:02:41 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 16:02:41 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 16:02:41 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 16:02:41 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 16:02:41 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 16:02:41 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 16:03:04 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:03:04 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:03:04 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:03:04 | INFO     | api.routes:update_machine_price:113 - Machine found: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:03:04 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:03:04 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:03:04 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:03:05 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:03:05 | INFO     | services.price_service:update_machine_price:249 - Found machine: ComMarker B4 100W MOPA (Current price: $1999.0)
2025-04-17 16:03:05 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-17 16:03:05 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-17 16:03:05 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc in 0.43 seconds
2025-04-17 16:03:05 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (798495 bytes)
2025-04-17 16:03:05 | INFO     | scrapers.price_extractor:extract_price:153 - Merchant commarker.com is in problematic list, forcing Claude extraction
2025-04-17 16:03:05 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: {'Machine Name': 'ComMarker B4 100W MOPA', 'Laser Power A': '100'}
2025-04-17 16:03:05 | INFO     | scrapers.price_extractor:_extract_using_claude:849 - Got machine specs for 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: ComMarker B4 100W MOPA, 100W
2025-04-17 16:03:05 | WARNING  | scrapers.price_extractor:_extract_using_claude:866 - HTML was truncated from 798495 to 20000 characters for Claude verification
2025-04-17 16:03:05 | WARNING  | scrapers.price_extractor:_extract_using_claude:871 - Sale indicators ['sale', 'discount', 'save', 'special'] were lost in HTML truncation
2025-04-17 16:03:05 | INFO     | scrapers.price_extractor:_extract_using_claude:873 - Sale indicators ['off'] were retained in truncated HTML
2025-04-17 16:03:05 | ERROR    | scrapers.price_extractor:_extract_using_claude:957 - Error using Claude for price verification: name 'current_price' is not defined
2025-04-17 16:03:05 | ERROR    | services.price_service:update_machine_price:412 - Error processing price update for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: too many values to unpack (expected 2)
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x106e3aac0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x101ba32e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x101c00540>
    └ <uvicorn.server.Server object at 0x10558fc10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x101c005e0>
           │       │   └ <uvicorn.server.Server object at 0x10558fc10>
           │       └ <function run at 0x10126ce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x106da27a0>
           │      └ <function Runner.run at 0x1012d8720>
           └ <asyncio.runners.Runner object at 0x106e3c8d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1058d4a00>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x106e3c8d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x106ec0d50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107232410>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x106e6fd90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x106ec0d50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107232410>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107232410>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x107231390>
          └ <fastapi.applications.FastAPI object at 0x106e6fd90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1072176a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1065cbf90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x107231390>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1072176a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x104895760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1065cbf90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1065cbf90>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106e4e310>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1065cbf90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x1065cbf90>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x107232590>
          │                            │    └ <fastapi.routing.APIRouter object at 0x107224ed0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x106e4e310>
          └ <function wrap_app_handling_exceptions at 0x1036e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1072177e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x107224ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1072177e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x107224ed0>>
          └ <fastapi.routing.APIRouter object at 0x107224ed0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1072177e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1036e1da0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1072177e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1072160c0>
          └ APIRoute(path='/api/v1/update-price', name='update_machine_price', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1072177e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x107232610>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x107217880>
          └ <function wrap_app_handling_exceptions at 0x1036e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1072179c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1072324...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x107217880>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x107232610>
                     └ <function get_request_handler.<locals>.app at 0x107216160>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1036e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': MachineUpdateRequest(machine_id='1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93', confirm=False, new_price=None)}
                 │         └ <function update_machine_price at 0x106dfb1a0>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 122, in update_machine_price
    result = await price_service.update_machine_price(request.machine_id)
                   │             │                    │       └ '1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93'
                   │             │                    └ MachineUpdateRequest(machine_id='1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93', confirm=False, new_price=None)
                   │             └ <function PriceService.update_machine_price at 0x106dfae80>
                   └ <services.price_service.PriceService object at 0x1048ff790>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 287, in update_machine_price
    new_price, method = self.price_extractor.extract_price(
                        │    │               └ <function PriceExtractor.extract_price at 0x106dfa700>
                        │    └ <scrapers.price_extractor.PriceExtractor object at 0x106e10a90>
                        └ <services.price_service.PriceService object at 0x1048ff790>

ValueError: too many values to unpack (expected 2)
2025-04-17 16:03:05 | ERROR    | api.routes:update_machine_price:139 - Price update failed for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: An error occurred while processing the price update: too many values to unpack (expected 2)
2025-04-17 16:03:59 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:03:59 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:04:00 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 16:04:00 | INFO     | api.routes:update_machine_price:113 - Machine found: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 16:04:00 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:04:00 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:04:00 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:04:00 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 16:04:00 | INFO     | services.price_service:update_machine_price:249 - Found machine: Cloudray GM-100 LiteMarker (Current price: $9499)
2025-04-17 16:04:00 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 16:04:00 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-17 16:04:02 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area in 2.40 seconds
2025-04-17 16:04:02 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (850508 bytes)
2025-04-17 16:04:03 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:549 - Extracted price 949.0 using selector '[data-price]'
2025-04-17 16:04:03 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:638 - Extracted price 15966.0 using regex pattern
2025-04-17 16:04:03 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:724 - Detected sale indicators in container: ['sale', 'off', '% off', 'discount', 'save', 'special']
2025-04-17 16:04:03 | INFO     | scrapers.price_extractor:_extract_near_add_to_cart:810 - Extracted price 12599.0 near Add to Cart button (sort method: ascending (sale detected))
2025-04-17 16:04:03 | INFO     | scrapers.price_extractor:extract_price:258 - Significant price change detected: $9499 -> $12599.0 (32.64% change)
2025-04-17 16:04:03 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for d3707433-2475-4b6c-8007-1e7126afd86c: {'Machine Name': 'Cloudray GM-100 LiteMarker', 'Laser Power A': '10'}
2025-04-17 16:04:03 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1165 - Got machine specs for d3707433-2475-4b6c-8007-1e7126afd86c: Cloudray GM-100 LiteMarker, 10W
2025-04-17 16:04:03 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1200 - Asking Claude to verify price change: $9499 -> $12599.0
2025-04-17 16:04:05 | INFO     | scrapers.price_extractor:_verify_price_with_claude:1213 - Claude price verification result: NEW PRICE CORRECT
2025-04-17 16:04:05 | INFO     | scrapers.price_extractor:extract_price:291 - Claude confirmed the price change to $12599.0 is correct
2025-04-17 16:04:05 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $12599.0 using method: Near Add to Cart
2025-04-17 16:04:05 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine d3707433-2475-4b6c-8007-1e7126afd86c to $12599.0
2025-04-17 16:04:05 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:04:06 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 16:04:06 | INFO     | services.database:update_machine_price:174 - ✅ Found machine 'Cloudray GM-100 LiteMarker' with DB ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:04:07 | INFO     | services.database:update_machine_price:205 - ✅ Successfully updated price for machine d3707433-2475-4b6c-8007-1e7126afd86c to 12599.0
2025-04-17 16:04:07 | INFO     | services.database:add_price_history:306 - Added price history entry for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-17 16:04:07 | INFO     | services.price_service:update_machine_price:388 - Price updated successfully for Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-17 16:04:07 | INFO     | api.routes:update_machine_price:154 - Price update successful for Cloudray GM-100 LiteMarker
2025-04-17 16:06:52 | INFO     | services.database:__init__:21 - Database service initialized
2025-04-17 16:06:52 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 16:06:52 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-17 16:06:52 | INFO     | scrapers.price_extractor:__init__:84 - Price extractor initialized with Anthropic version header and price validator
2025-04-17 16:06:52 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-17 16:06:52 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-17 16:06:52 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-17 16:06:57 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 16:06:57 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 16:06:57 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 16:06:57 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 16:06:57 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 16:07:08 | INFO     | api.routes:update_machine_price:91 - Received price update request for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:08 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:08 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:07:08 | INFO     | api.routes:update_machine_price:113 - Machine found: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:07:08 | INFO     | api.routes:update_machine_price:121 - Non-confirmed price update for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:08 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:08 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:08 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:07:08 | INFO     | services.price_service:update_machine_price:249 - Found machine: ComMarker B4 100W MOPA (Current price: $1999.0)
2025-04-17 16:07:08 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-17 16:07:08 | INFO     | scrapers.web_scraper:get_page_content:36 - Fetching content from https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-17 16:07:09 | INFO     | scrapers.web_scraper:get_page_content:48 - Fetched https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc in 0.38 seconds
2025-04-17 16:07:09 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (798495 bytes)
2025-04-17 16:07:09 | INFO     | scrapers.price_extractor:extract_price:153 - Merchant commarker.com is in problematic list, forcing Claude extraction
2025-04-17 16:07:09 | INFO     | services.database_service:get_machine_specs:44 - Retrieved machine specs for 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: {'Machine Name': 'ComMarker B4 100W MOPA', 'Laser Power A': '100'}
2025-04-17 16:07:09 | INFO     | scrapers.price_extractor:_extract_using_claude:993 - Got machine specs for 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: ComMarker B4 100W MOPA, 100W
2025-04-17 16:07:09 | WARNING  | scrapers.price_extractor:_extract_using_claude:1009 - HTML was truncated from 798495 to 20000 characters for Claude extraction
2025-04-17 16:07:09 | WARNING  | scrapers.price_extractor:_extract_using_claude:1014 - Sale indicators ['sale', 'discount', 'save', 'special'] were lost in HTML truncation
2025-04-17 16:07:09 | INFO     | scrapers.price_extractor:_extract_using_claude:1070 - Calling Claude API to extract price for ComMarker B4 100W MOPA
2025-04-17 16:07:10 | INFO     | scrapers.price_extractor:_extract_using_claude:1105 - Extracted price 1839.0 using Claude AI (direct US format)
2025-04-17 16:07:10 | INFO     | scrapers.price_extractor:_verify_and_correct_price:1183 - PRICE CORRECTION: Current $1839.0, Previous $1999.0, Ratio: 92.00%
2025-04-17 16:07:10 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $1839.0 using method: Claude AI (direct US format)
2025-04-17 16:07:10 | INFO     | services.database:update_machine_price:158 - 🔄 Attempting to update price for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93 to $1839.0
2025-04-17 16:07:10 | INFO     | services.database:get_machine_by_id:39 - 🔍 Looking up machine with ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:10 | INFO     | services.database:get_machine_by_id:51 - ✅ Found machine: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:07:10 | INFO     | services.database:update_machine_price:174 - ✅ Found machine 'ComMarker B4 100W MOPA' with DB ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:11 | INFO     | services.database:update_machine_price:205 - ✅ Successfully updated price for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93 to 1839.0
2025-04-17 16:07:11 | INFO     | services.database:add_price_history:306 - Added price history entry for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-17 16:07:11 | INFO     | services.price_service:update_machine_price:388 - Price updated successfully for ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-17 16:07:11 | INFO     | api.routes:update_machine_price:154 - Price update successful for ComMarker B4 100W MOPA
2025-04-17 16:09:52 | INFO     | api.routes:configure_batch_update:340 - Configuring batch update with days_threshold=7, limit=10
2025-04-17 16:09:52 | INFO     | services.database:get_machines_needing_update:375 - Found 57 machines for price update
2025-04-17 16:09:52 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 16:09:53 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 16:09:53 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 16:10:01 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 16:10:02 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 16:10:02 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-17 16:10:04 | INFO     | api.routes:get_batches:377 - Fetching list of batch jobs
2025-04-17 16:10:04 | INFO     | api.routes:get_batches:394 - Found 1 batch jobs
2025-04-17 16:10:04 | INFO     | api.routes:get_batches:398 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 09:51:25 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 09:51:25 | INFO     | services.database_service:__init__:22 - Database service initialized successfully
2025-04-18 09:51:25 | INFO     | scrapers.price_extractor:__init__:110 - Price extractor initialized with merchant-specific settings
2025-04-18 12:37:19 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:37:19 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:37:19 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:37:52 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:37:52 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:37:52 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:37:52 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:37:52 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:37:52 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:38:07 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:38:07 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:38:07 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:38:07 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:38:07 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:38:07 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:38:59 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:38:59 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:38:59 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:38:59 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:38:59 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:38:59 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:40:14 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:40:14 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:40:45 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:40:45 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:40:49 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:40:49 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:40:49 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:40:49 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:40:49 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:40:49 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:40:49 | ERROR    | services.static_parser:_extract_from_json_ld:97 - Error in JSON-LD extraction: the JSON object must be str, bytes or bytearray, not Mock
2025-04-18 12:46:29 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:29 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:29 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:29 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:29 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:29 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:29 | ERROR    | services.static_parser:_extract_from_json_ld:97 - Error in JSON-LD extraction: the JSON object must be str, bytes or bytearray, not Mock
2025-04-18 12:46:51 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:51 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:51 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:51 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:51 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:51 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:51 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:46:51 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:46:56 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:56 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:56 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:56 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:56 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:46:56 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:46:56 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:46:56 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:47:11 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:47:11 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:47:11 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:47:11 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:47:11 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:47:11 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:47:11 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:47:11 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:48:13 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:48:13 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:13 | WARNING  | services.static_parser:extract_price:54 - No price found in response from https://example.com/product-dynamic-price
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:48:54 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:48:54 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:48:54 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:03 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:03 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:51:03 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:03 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:51:04 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:04 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:51:04 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:51:04 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:51:04 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:04 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:04 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:04 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:04 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:04 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:51:04 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Client error '404 Not Found' for url 'https://example.com/test'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-04-18 12:51:04 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Client error '404 Not Found' for url 'https://example.com/test'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-04-18 12:51:04 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 3: Client error '404 Not Found' for url 'https://example.com/test'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-04-18 12:51:04 | ERROR    | services.static_parser:extract_price:60 - Failed to fetch https://example.com/test after 3 attempts
2025-04-18 12:52:20 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:20 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:20 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:20 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:20 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:20 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:20 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:52:20 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:52:20 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:20 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:20 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:21 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:21 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:21 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:36 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:52:36 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:42 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:42 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:42 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:42 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:42 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 12:52:42 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 12:52:42 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 12:52:42 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 13:17:55 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:17:57 | ERROR    | services.slice_parser:extract_price:114 - Error in extract_price: 'Config' object has no attribute 'get'
2025-04-18 13:17:57 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:17:59 | ERROR    | services.slice_parser:extract_price:114 - Error in extract_price: 'Config' object has no attribute 'get'
2025-04-18 13:17:59 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:00 | ERROR    | services.slice_parser:extract_price:114 - Error in extract_price: 'Config' object has no attribute 'get'
2025-04-18 13:18:00 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:02 | ERROR    | services.slice_parser:extract_price:114 - Error in extract_price: 'Config' object has no attribute 'get'
2025-04-18 13:18:23 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:23 | ERROR    | services.slice_parser:extract_price:119 - Error in extract_price: could not convert string to float: '{price: 1999.99, currency: USD, confidence: 0.92, explanation: Price found in the HTML content.}'
2025-04-18 13:18:23 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:23 | ERROR    | services.slice_parser:extract_price:119 - Error in extract_price: could not convert string to float: '{price: 2499.99, currency: USD, confidence: 0.92, explanation: Price found in the HTML content.}'
2025-04-18 13:18:23 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:23 | ERROR    | services.slice_parser:extract_price:119 - Error in extract_price: could not convert string to float: '{price: 1999.99, currency: USD, confidence: 0.92, explanation: Price found in the HTML content.}'
2025-04-18 13:18:23 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:23 | ERROR    | services.slice_parser:extract_price:119 - Error in extract_price: could not convert string to float: '{price: 1999.99, currency: USD, confidence: 0.92, explanation: Price found in the HTML content.}'
2025-04-18 13:18:43 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:43 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:43 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:18:43 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:19:18 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:19:18 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:19:18 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:19:18 | INFO     | services.slice_parser:__init__:63 - Slice parser initialized
2025-04-18 13:19:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:19:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:19:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:19:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:20:23 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:20:23 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:20:23 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:20:23 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:31 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:31 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:31 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:31 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:45 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:45 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:45 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:45 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:45 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:45 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:45 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:46 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:21:46 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:26:43 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:26:43 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:26:43 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:26:43 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:26:43 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:27:52 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:27:52 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:27:52 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:27:52 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:27:52 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:28:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:30 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:30 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:30 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:30 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:30 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:30 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:30 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:30 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:30 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:30 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:30 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:56 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:56 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:56 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:56 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:56 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:32:56 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:56 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:56 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:56 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:32:56 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:32:56 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:53 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:53 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:53 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:53 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:53 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:53 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:53 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:53 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:53 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:53 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:53 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:33:59 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:59 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:59 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:59 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:33:59 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:33:59 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:37:18 | INFO     | services.js_parser:__init__:59 - JS Parser initialized
2025-04-18 13:37:18 | INFO     | services.js_parser:extract:73 - Starting JS extraction for https://example.com/product
2025-04-18 13:37:18 | INFO     | services.js_parser:extract:129 - Navigating to https://example.com/product
2025-04-18 13:37:20 | INFO     | services.js_parser:_extract_from_json_ld:267 - Extracting from JSON-LD for https://example.com/product
2025-04-18 13:37:20 | INFO     | services.js_parser:_extract_from_meta_tags:334 - Extracting from meta tags for https://example.com/product
2025-04-18 13:37:20 | INFO     | services.js_parser:_extract_from_dom:373 - Extracting from DOM elements for https://example.com/product
2025-04-18 13:37:20 | INFO     | services.js_parser:_extract_from_network_requests:434 - Extracting from network requests for https://example.com/product
2025-04-18 13:37:20 | INFO     | services.js_parser:extract:179 - Trying final extraction approach for https://example.com/product
2025-04-18 13:37:20 | INFO     | services.js_parser:__init__:59 - JS Parser initialized
2025-04-18 13:37:20 | ERROR    | services.js_parser:extract_price_from_api:603 - Error extracting price from API endpoint https://example.com/api/products/123: argument of type 'coroutine' is not iterable
2025-04-18 13:37:20 | INFO     | services.js_parser:__init__:59 - JS Parser initialized
2025-04-18 13:37:20 | INFO     | services.js_parser:extract:73 - Starting JS extraction for https://example.com/product
2025-04-18 13:37:20 | INFO     | services.js_parser:extract:129 - Navigating to https://example.com/product
2025-04-18 13:37:22 | INFO     | services.js_parser:_extract_from_json_ld:267 - Extracting from JSON-LD for https://example.com/product
2025-04-18 13:37:22 | INFO     | services.js_parser:_extract_from_meta_tags:334 - Extracting from meta tags for https://example.com/product
2025-04-18 13:37:22 | INFO     | services.js_parser:_extract_from_dom:373 - Extracting from DOM elements for https://example.com/product
2025-04-18 13:37:22 | INFO     | services.js_parser:_extract_from_network_requests:434 - Extracting from network requests for https://example.com/product
2025-04-18 13:37:22 | INFO     | services.js_parser:extract:179 - Trying final extraction approach for https://example.com/product
2025-04-18 13:37:22 | INFO     | services.js_parser:__init__:59 - JS Parser initialized
2025-04-18 13:37:22 | INFO     | services.js_parser:__init__:59 - JS Parser initialized
2025-04-18 13:37:22 | INFO     | services.js_parser:extract:73 - Starting JS extraction for https://example.com/product
2025-04-18 13:37:22 | ERROR    | services.js_parser:extract:258 - Unexpected error for https://example.com/product: Browser error
2025-04-18 13:38:13 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:13 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:38:13 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:13 | ERROR    | services.js_parser:extract_price_from_api:620 - Error extracting price from API endpoint https://example.com/api/products/123: argument of type 'coroutine' is not iterable
2025-04-18 13:38:13 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:13 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:38:13 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:13 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:13 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:38:48 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:48 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:48 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:48 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:38:48 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:08 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:09 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:09 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:09 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:09 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:09 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:09 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:14 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:14 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:14 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:14 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:14 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:14 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:14 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:14 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:19 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:27 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:27 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:27 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:27 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:27 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:27 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:27 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:36 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:39:36 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:39:36 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:39:36 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:39:36 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:39:36 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:39:36 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:36 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:36 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:36 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:36 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:39:36 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:36 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:39:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:39:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:39:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:39:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:39:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:39:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:39:36 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:39:36 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:36 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:37 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:37 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:37 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:37 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:37 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:37 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:39:37 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:45:00 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:45:00 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:45:00 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:45:00 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:45:00 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:45:00 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:45:00 | INFO     | services.price_validator:__init__:46 - Price validator initialized
2025-04-18 13:47:36 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:47:36 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:47:36 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:47:36 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:47:36 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:47:36 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:47:36 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:47:36 | ERROR    | services.price_validator:_validate_with_llm_async:388 - Error validating price with LLM: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-sonnet-20240229'}}
2025-04-18 13:48:14 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:14 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:14 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:14 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:14 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:14 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:14 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:14 | ERROR    | services.price_validator:_validate_with_llm_async:358 - Error validating price with LLM: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-sonnet-20240229'}}
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:18 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:18 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:18 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 13:48:18 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 1: Server error
2025-04-18 13:48:18 | WARNING  | services.static_parser:extract_price:58 - HTTP error on attempt 2: Server error
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:48:19 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:48:19 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:48:19 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:48:19 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 13:48:19 | INFO     | services.full_html_parser:__init__:297 - FullHTMLParser initialized with model gpt-4o
2025-04-18 13:48:19 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:48:19 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:48:19 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:48:19 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:48:19 | INFO     | services.js_parser:extract:74 - Starting JS extraction for https://example.com/product
2025-04-18 13:48:19 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:48:19 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 13:48:19 | ERROR    | services.price_validator:_validate_with_llm_async:358 - Error validating price with LLM: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-sonnet-20240229'}}
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 13:48:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 14:09:08 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:09:08 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:09:08 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:09:08 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:09:08 | INFO     | scrapers.price_extractor:__init__:151 - Price extractor initialized with merchant-specific settings
2025-04-18 14:09:08 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:09:08 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:09:08 | INFO     | __main__:batch_update_prices:43 - Starting DRY RUN batch update with threshold of 7 days
2025-04-18 14:09:08 | INFO     | services.price_service:batch_update_machines:464 - Starting batch update with DRY RUN threshold of 7 days
2025-04-18 14:09:08 | INFO     | services.price_service:batch_update_machines:478 - Fetching machines not updated in 7 days
2025-04-18 14:09:08 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 14:09:08 | INFO     | services.price_service:batch_update_machines:495 - Found 57 machines to update
2025-04-18 14:09:08 | INFO     | services.price_service:batch_update_machines:513 - Processing machine fad976a4-4bb9-4c91-92c3-ff774f02ec16: Algolaser Alpha MK2
2025-04-18 14:09:08 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-18 14:09:08 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-18 14:09:09 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Algolaser Alpha MK2 (ID: fad976a4-4bb9-4c91-92c3-ff774f02ec16)
2025-04-18 14:09:09 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser (Attempt 1/5)
2025-04-18 14:09:10 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-18 14:09:10 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ 'fad976a4-4bb9-4c91-92c3-ff774f02ec16'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:10 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for fad976a4-4bb9-4c91-92c3-ff774f02ec16: An error occurred while processing the price extraction
2025-04-18 14:09:10 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: Algolaser DIY KIT Mini
2025-04-18 14:09:10 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-18 14:09:10 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-18 14:09:10 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Algolaser DIY KIT Mini (ID: 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c)
2025-04-18 14:09:10 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742 (Attempt 1/5)
2025-04-18 14:09:10 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742
2025-04-18 14:09:10 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '47b8dc18-5daa-4a2b-8ff8-9b48b176db9c'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_p...
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:10 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: An error occurred while processing the price extraction
2025-04-18 14:09:10 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836: Aeon MIRA 5 S
2025-04-18 14:09:10 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-18 14:09:10 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-18 14:09:11 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon MIRA 5 S (ID: 8a0ad4b4-b616-4e5d-85a3-5631ab388836)
2025-04-18 14:09:11 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://aeonlaser.us/mira-s (Attempt 1/5)
2025-04-18 14:09:11 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://aeonlaser.us/mira-s
2025-04-18 14:09:11 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '8a0ad4b4-b616-4e5d-85a3-5631ab388836'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://aeonlaser.us/mira-s'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:11 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 8a0ad4b4-b616-4e5d-85a3-5631ab388836: An error occurred while processing the price extraction
2025-04-18 14:09:11 | INFO     | services.price_service:batch_update_machines:513 - Processing machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: Aeon NOVA 10 S
2025-04-18 14:09:11 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-18 14:09:11 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-18 14:09:11 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon NOVA 10 S (ID: dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f)
2025-04-18 14:09:11 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://aeonlaser.us/nova-s (Attempt 1/5)
2025-04-18 14:09:11 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://aeonlaser.us/nova-s
2025-04-18 14:09:11 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ 'dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://aeonlaser.us/nova-s'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:11 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: An error occurred while processing the price extraction
2025-04-18 14:09:11 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 533f1772-4dc1-4239-8eb3-38cc598933b3: Epilog Fusion Maker 24
2025-04-18 14:09:11 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 533f1772-4dc1-4239-8eb3-38cc598933b3
2025-04-18 14:09:11 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 533f1772-4dc1-4239-8eb3-38cc598933b3
2025-04-18 14:09:11 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Epilog Fusion Maker 24 (ID: 533f1772-4dc1-4239-8eb3-38cc598933b3)
2025-04-18 14:09:11 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24 (Attempt 1/5)
2025-04-18 14:09:12 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24
2025-04-18 14:09:12 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 533f1772-4dc1-4239-8eb3-38cc598933b3: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '533f1772-4dc1-4239-8eb3-38cc598933b3'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:12 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 533f1772-4dc1-4239-8eb3-38cc598933b3: An error occurred while processing the price extraction
2025-04-18 14:09:12 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715: Epilog Fusion Maker 36
2025-04-18 14:09:12 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Epilog Fusion Maker 36 (ID: 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715)
2025-04-18 14:09:12 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36 (Attempt 1/5)
2025-04-18 14:09:12 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36
2025-04-18 14:09:12 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:12 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715: An error occurred while processing the price extraction
2025-04-18 14:09:12 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4efe1038-29b8-47c8-972d-5591370964ec: EMP ST30R
2025-04-18 14:09:12 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4efe1038-29b8-47c8-972d-5591370964ec
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4efe1038-29b8-47c8-972d-5591370964ec
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EMP ST30R (ID: 4efe1038-29b8-47c8-972d-5591370964ec)
2025-04-18 14:09:12 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://aeonlaser.us/emp-laser (Attempt 1/5)
2025-04-18 14:09:12 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://aeonlaser.us/emp-laser
2025-04-18 14:09:12 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 4efe1038-29b8-47c8-972d-5591370964ec: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '4efe1038-29b8-47c8-972d-5591370964ec'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://aeonlaser.us/emp-laser'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:12 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 4efe1038-29b8-47c8-972d-5591370964ec: An error occurred while processing the price extraction
2025-04-18 14:09:12 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4923b2ee-8a9e-4743-9643-af7c91feb806: Thunder Aurora 8 MOPA
2025-04-18 14:09:12 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4923b2ee-8a9e-4743-9643-af7c91feb806
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4923b2ee-8a9e-4743-9643-af7c91feb806
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Aurora 8 MOPA (ID: 4923b2ee-8a9e-4743-9643-af7c91feb806)
2025-04-18 14:09:12 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://www.thunderlaserusa.com/aurora-8-mopa/ (Attempt 1/5)
2025-04-18 14:09:12 | ERROR    | scrapers.web_scraper:get_page_content:92 - Failed to fetch content from https://www.thunderlaserusa.com/aurora-8-mopa/. Status code: 403
2025-04-18 14:09:12 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 4923b2ee-8a9e-4743-9643-af7c91feb806: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '4923b2ee-8a9e-4743-9643-af7c91feb806'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://www.thunderlaserusa.com/aurora-8-mopa/'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:12 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 4923b2ee-8a9e-4743-9643-af7c91feb806: An error occurred while processing the price extraction
2025-04-18 14:09:12 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 6f02d540-d04a-4873-905e-450ec42615f7: Gweike G2 Max
2025-04-18 14:09:12 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 6f02d540-d04a-4873-905e-450ec42615f7
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 6f02d540-d04a-4873-905e-450ec42615f7
2025-04-18 14:09:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G2 Max (ID: 6f02d540-d04a-4873-905e-450ec42615f7)
2025-04-18 14:09:12 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6 (Attempt 1/5)
2025-04-18 14:09:13 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6
2025-04-18 14:09:13 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 6f02d540-d04a-4873-905e-450ec42615f7: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '6f02d540-d04a-4873-905e-450ec42615f7'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:13 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 6f02d540-d04a-4873-905e-450ec42615f7: An error occurred while processing the price extraction
2025-04-18 14:09:13 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ba985fae-8f77-439a-a631-f66f1c8af245: Glowforge Plus HD
2025-04-18 14:09:13 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ba985fae-8f77-439a-a631-f66f1c8af245
2025-04-18 14:09:13 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ba985fae-8f77-439a-a631-f66f1c8af245
2025-04-18 14:09:13 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Plus HD (ID: ba985fae-8f77-439a-a631-f66f1c8af245)
2025-04-18 14:09:13 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://glowforge.com/b/pro (Attempt 1/5)
2025-04-18 14:09:16 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://glowforge.com/b/pro
2025-04-18 14:09:16 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine ba985fae-8f77-439a-a631-f66f1c8af245: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ 'ba985fae-8f77-439a-a631-f66f1c8af245'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://glowforge.com/b/pro'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:16 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for ba985fae-8f77-439a-a631-f66f1c8af245: An error occurred while processing the price extraction
2025-04-18 14:09:16 | INFO     | services.price_service:batch_update_machines:513 - Processing machine a911e1a8-8e65-4e57-a366-c694cc7deeb8: Glowforge Aura
2025-04-18 14:09:16 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine a911e1a8-8e65-4e57-a366-c694cc7deeb8
2025-04-18 14:09:16 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: a911e1a8-8e65-4e57-a366-c694cc7deeb8
2025-04-18 14:09:16 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Aura (ID: a911e1a8-8e65-4e57-a366-c694cc7deeb8)
2025-04-18 14:09:16 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://glowforge.com/b/craft (Attempt 1/5)
2025-04-18 14:09:18 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://glowforge.com/b/craft
2025-04-18 14:09:18 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine a911e1a8-8e65-4e57-a366-c694cc7deeb8: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ 'a911e1a8-8e65-4e57-a366-c694cc7deeb8'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://glowforge.com/b/craft'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:18 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for a911e1a8-8e65-4e57-a366-c694cc7deeb8: An error occurred while processing the price extraction
2025-04-18 14:09:18 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 163b26bb-b096-4473-9a17-569c1cfb4f18: Flux Hexa
2025-04-18 14:09:18 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-18 14:09:18 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-18 14:09:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Flux Hexa (ID: 163b26bb-b096-4473-9a17-569c1cfb4f18)
2025-04-18 14:09:19 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu (Attempt 1/5)
2025-04-18 14:09:19 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu
2025-04-18 14:09:19 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 163b26bb-b096-4473-9a17-569c1cfb4f18: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extractor-p...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '163b26bb-b096-4473-9a17-569c1cfb4f18'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:19 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 163b26bb-b096-4473-9a17-569c1cfb4f18: An error occurred while processing the price extraction
2025-04-18 14:09:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine f4370877-a40c-459d-ab83-e93a32d102fb: Genmitsu L8
2025-04-18 14:09:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine f4370877-a40c-459d-ab83-e93a32d102fb
2025-04-18 14:09:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: f4370877-a40c-459d-ab83-e93a32d102fb
2025-04-18 14:09:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Genmitsu L8 (ID: f4370877-a40c-459d-ab83-e93a32d102fb)
2025-04-18 14:09:19 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true (Attempt 1/5)
2025-04-18 14:09:22 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true
2025-04-18 14:09:22 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine f4370877-a40c-459d-ab83-e93a32d102fb: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task cancelling name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extracto...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ 'f4370877-a40c-459d-ab83-e93a32d102fb'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:22 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for f4370877-a40c-459d-ab83-e93a32d102fb: An error occurred while processing the price extraction
2025-04-18 14:09:22 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 23372b1e-277f-4ad4-b9ee-715b05782894: Gweike G2 20W
2025-04-18 14:09:22 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 23372b1e-277f-4ad4-b9ee-715b05782894
2025-04-18 14:09:22 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 23372b1e-277f-4ad4-b9ee-715b05782894
2025-04-18 14:09:22 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G2 20W (ID: 23372b1e-277f-4ad4-b9ee-715b05782894)
2025-04-18 14:09:22 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:09:22 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i
2025-04-18 14:09:22 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine 23372b1e-277f-4ad4-b9ee-715b05782894: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task cancelling name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extracto...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ '23372b1e-277f-4ad4-b9ee-715b05782894'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:22 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 23372b1e-277f-4ad4-b9ee-715b05782894: An error occurred while processing the price extraction
2025-04-18 14:09:22 | INFO     | services.price_service:batch_update_machines:513 - Processing machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2: Gweike G2 30W
2025-04-18 14:09:22 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2
2025-04-18 14:09:22 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2
2025-04-18 14:09:22 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G2 30W (ID: fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2)
2025-04-18 14:09:22 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:09:23 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i
2025-04-18 14:09:23 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task cancelling name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extracto...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ 'fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:23 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2: An error occurred while processing the price extraction
2025-04-18 14:09:23 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b78b8088-9577-4047-a975-32472998e3e4: Glowforge Pro HD
2025-04-18 14:09:23 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b78b8088-9577-4047-a975-32472998e3e4
2025-04-18 14:09:23 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b78b8088-9577-4047-a975-32472998e3e4
2025-04-18 14:09:23 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Pro HD (ID: b78b8088-9577-4047-a975-32472998e3e4)
2025-04-18 14:09:23 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://glowforge.com/b/pro (Attempt 1/5)
2025-04-18 14:09:23 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://glowforge.com/b/pro
2025-04-18 14:09:23 | ERROR    | services.price_service:extract_machine_price:116 - Error processing price extraction for machine b78b8088-9577-4047-a975-32472998e3e4: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 134, in <module>
    asyncio.run(batch_update_prices(args.days_threshold, args.dry_run, output_file))
    │       │   │                   │    │               │    │        └ 'test_algolaser.json'
    │       │   │                   │    │               │    └ True
    │       │   │                   │    │               └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   │                   │    └ 7
    │       │   │                   └ Namespace(days_threshold=7, dry_run=True, output='test_algolaser.json')
    │       │   └ <function batch_update_prices at 0x100814540>
    │       └ <function run at 0x100e51300>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object batch_update_prices at 0x103f511c0>
           │      └ <function Runner.run at 0x100f07ce0>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task cancelling name='Task-1' coro=<batch_update_prices() running at /Users/brandoncullum/machines-for-makers/price-extracto...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x100f05940>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x103fca750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x100f058a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x100f076a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x100e51bc0>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x104068670>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x104068670>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/batch_update.py", line 51, in batch_update_prices
    result = await price_service.batch_update_machines(days_threshold, dry_run=dry_run)
                   │             │                     │                       └ True
                   │             │                     └ 7
                   │             └ <function PriceService.batch_update_machines at 0x103fc0680>
                   └ <services.price_service.PriceService object at 0x103adde50>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 516, in batch_update_machines
    result = await self.extract_machine_price(machine_id)
                   │    │                     └ 'b78b8088-9577-4047-a975-32472998e3e4'
                   │    └ <function PriceService.extract_machine_price at 0x103f77380>
                   └ <services.price_service.PriceService object at 0x103adde50>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 57, in extract_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://glowforge.com/b/pro'
                               │    │           └ <function WebScraper.get_page_content at 0x103fbc720>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x103fcb050>
                               └ <services.price_service.PriceService object at 0x103adde50>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:23 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for b78b8088-9577-4047-a975-32472998e3e4: An error occurred while processing the price extraction
2025-04-18 14:09:23 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1: Gweike Cloud RF
2025-04-18 14:09:23 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1
2025-04-18 14:09:23 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b6cfba2d-fbcb-4769-af88-435fa2fd20c1
2025-04-18 14:09:23 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike Cloud RF (ID: b6cfba2d-fbcb-4769-af88-435fa2fd20c1)
2025-04-18 14:09:23 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary (Attempt 1/5)
2025-04-18 14:09:49 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:09:49 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:09:49 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:09:49 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:09:49 | INFO     | scrapers.price_extractor:__init__:151 - Price extractor initialized with merchant-specific settings
2025-04-18 14:09:49 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:09:49 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:09:49 | INFO     | __main__:update_machine_price:33 - Updating price for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:09:49 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:09:49 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:09:49 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: AlgoLaser Delta 40W Laser (ID: c23808f6-1760-4cad-b031-3c5eb3556d98)
2025-04-18 14:09:49 | INFO     | services.price_service:update_machine_price:249 - Found machine: AlgoLaser Delta 40W Laser (Current price: $1299.0)
2025-04-18 14:09:49 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:09:49 | INFO     | scrapers.web_scraper:get_page_content:74 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 (Attempt 1/5)
2025-04-18 14:09:50 | SUCCESS  | scrapers.web_scraper:get_page_content:78 - Successfully fetched content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:09:50 | ERROR    | services.price_service:update_machine_price:412 - Error processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98: object tuple can't be used in 'await' expression
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/update_price.py", line 67, in <module>
    asyncio.run(update_machine_price(machine_id))
    │       │   │                    └ 'c23808f6-1760-4cad-b031-3c5eb3556d98'
    │       │   └ <function update_machine_price at 0x105638540>
    │       └ <function run at 0x105c6d3a0>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object update_machine_price at 0x109eb2460>
           │      └ <function Runner.run at 0x105d2bd80>
           └ <asyncio.runners.Runner object at 0x105d7ac10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<update_machine_price() running at /Users/brandoncullum/machines-for-makers/price-extractor-...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x105d299e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x105d7ac10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x105d29940>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x105d2b740>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x105c6dc60>
    └ <Handle <TaskStepMethWrapper object at 0x109ef2f20>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x109ef2f20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x109ef2f20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x109ef2f20>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/update_price.py", line 34, in update_machine_price
    result = await price_service.update_machine_price(machine_id)
                   │             │                    └ 'c23808f6-1760-4cad-b031-3c5eb3556d98'
                   │             └ <function PriceService.update_machine_price at 0x109f200e0>
                   └ <services.price_service.PriceService object at 0x109efb950>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 267, in update_machine_price
    html_content, soup = await self.web_scraper.get_page_content(product_url)
                               │    │           │                └ 'https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&...
                               │    │           └ <function WebScraper.get_page_content at 0x109f047c0>
                               │    └ <scrapers.web_scraper.WebScraper object at 0x109f1f5d0>
                               └ <services.price_service.PriceService object at 0x109efb950>

TypeError: object tuple can't be used in 'await' expression
2025-04-18 14:09:50 | ERROR    | __main__:update_machine_price:49 - Failed to update price for machine c23808f6-1760-4cad-b031-3c5eb3556d98: An error occurred while processing the price update: object tuple can't be used in 'await' expression
2025-04-18 14:11:32 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:11:32 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:11:32 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:11:32 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:11:32 | INFO     | scrapers.price_extractor:__init__:151 - Price extractor initialized with merchant-specific settings
2025-04-18 14:11:32 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:11:32 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:11:32 | INFO     | __main__:update_machine_price:33 - Updating price for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:11:32 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:11:32 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:11:33 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: AlgoLaser Delta 40W Laser (ID: c23808f6-1760-4cad-b031-3c5eb3556d98)
2025-04-18 14:11:33 | INFO     | services.price_service:update_machine_price:249 - Found machine: AlgoLaser Delta 40W Laser (Current price: $1299.0)
2025-04-18 14:11:33 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:11:33 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 (Attempt 1/5)
2025-04-18 14:11:33 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:11:34 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1677323 bytes)
2025-04-18 14:11:34 | ERROR    | services.price_service:update_machine_price:412 - Error processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98: 'PriceExtractor' object has no attribute 'extract_price'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/update_price.py", line 67, in <module>
    asyncio.run(update_machine_price(machine_id))
    │       │   │                    └ 'c23808f6-1760-4cad-b031-3c5eb3556d98'
    │       │   └ <function update_machine_price at 0x100cc0540>
    │       └ <function run at 0x101af93a0>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object update_machine_price at 0x106c5e680>
           │      └ <function Runner.run at 0x101d13d80>
           └ <asyncio.runners.Runner object at 0x101d5e790>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task cancelling name='Task-1' coro=<update_machine_price() running at /Users/brandoncullum/machines-for-makers/price-extract...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x101d119e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x101d5e790>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x101d11940>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x101d13740>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x101af9c60>
    └ <Handle <TaskStepMethWrapper object at 0x106e10d60>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x106e10d60>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x106e10d60>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x106e10d60>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/update_price.py", line 34, in update_machine_price
    result = await price_service.update_machine_price(machine_id)
                   │             │                    └ 'c23808f6-1760-4cad-b031-3c5eb3556d98'
                   │             └ <function PriceService.update_machine_price at 0x106e24180>
                   └ <services.price_service.PriceService object at 0x106e18ad0>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 287, in update_machine_price
    new_price, method = self.price_extractor.extract_price(
                        │    └ <scrapers.price_extractor.PriceExtractor object at 0x106e1ff10>
                        └ <services.price_service.PriceService object at 0x106e18ad0>

AttributeError: 'PriceExtractor' object has no attribute 'extract_price'
2025-04-18 14:11:34 | ERROR    | __main__:update_machine_price:49 - Failed to update price for machine c23808f6-1760-4cad-b031-3c5eb3556d98: An error occurred while processing the price update: 'PriceExtractor' object has no attribute 'extract_price'
2025-04-18 14:13:30 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:13:30 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:13:30 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:13:30 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:13:30 | INFO     | scrapers.price_extractor:__init__:151 - Price extractor initialized with merchant-specific settings
2025-04-18 14:13:30 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:13:30 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:13:30 | INFO     | __main__:update_machine_price:33 - Updating price for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:30 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:30 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:31 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: AlgoLaser Delta 40W Laser (ID: c23808f6-1760-4cad-b031-3c5eb3556d98)
2025-04-18 14:13:31 | INFO     | services.price_service:update_machine_price:249 - Found machine: AlgoLaser Delta 40W Laser (Current price: $1299.0)
2025-04-18 14:13:31 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:13:31 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 (Attempt 1/5)
2025-04-18 14:13:31 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:13:31 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1677323 bytes)
2025-04-18 14:13:31 | ERROR    | services.price_service:update_machine_price:412 - Error processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98: cannot unpack non-iterable coroutine object
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/update_price.py", line 67, in <module>
    asyncio.run(update_machine_price(machine_id))
    │       │   │                    └ 'c23808f6-1760-4cad-b031-3c5eb3556d98'
    │       │   └ <function update_machine_price at 0x104d64540>
    │       └ <function run at 0x1054a13a0>
    └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object update_machine_price at 0x1124ceac0>
           │      └ <function Runner.run at 0x10555bd80>
           └ <asyncio.runners.Runner object at 0x1055a67d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task cancelling name='Task-1' coro=<update_machine_price() running at /Users/brandoncullum/machines-for-makers/price-extract...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x1055599e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1055a67d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x105559940>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x10555b740>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x1054a1c60>
    └ <Handle <TaskStepMethWrapper object at 0x112598eb0>()>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x112598eb0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x112598eb0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x112598eb0>()>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/update_price.py", line 34, in update_machine_price
    result = await price_service.update_machine_price(machine_id)
                   │             │                    └ 'c23808f6-1760-4cad-b031-3c5eb3556d98'
                   │             └ <function PriceService.update_machine_price at 0x11251fec0>
                   └ <services.price_service.PriceService object at 0x1120a8a10>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/price_service.py", line 287, in update_machine_price
    new_price, method = self.price_extractor.extract_price(
                        │    │               └ <function PriceExtractor.extract_price at 0x11251f060>
                        │    └ <scrapers.price_extractor.PriceExtractor object at 0x11252bd10>
                        └ <services.price_service.PriceService object at 0x1120a8a10>

TypeError: cannot unpack non-iterable coroutine object
2025-04-18 14:13:31 | ERROR    | __main__:update_machine_price:49 - Failed to update price for machine c23808f6-1760-4cad-b031-3c5eb3556d98: An error occurred while processing the price update: cannot unpack non-iterable coroutine object
2025-04-18 14:13:50 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:13:50 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:13:50 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:13:50 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:13:50 | INFO     | scrapers.price_extractor:__init__:151 - Price extractor initialized with merchant-specific settings
2025-04-18 14:13:50 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:13:50 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:13:50 | INFO     | __main__:update_machine_price:33 - Updating price for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:50 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:50 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:50 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: AlgoLaser Delta 40W Laser (ID: c23808f6-1760-4cad-b031-3c5eb3556d98)
2025-04-18 14:13:50 | INFO     | services.price_service:update_machine_price:249 - Found machine: AlgoLaser Delta 40W Laser (Current price: $1299.0)
2025-04-18 14:13:50 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:13:50 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 (Attempt 1/5)
2025-04-18 14:13:51 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:13:51 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (1677323 bytes)
2025-04-18 14:13:51 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 799.0 using selector '.price'
2025-04-18 14:13:51 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $799.0 using method: CSS Selector '.price'
2025-04-18 14:13:51 | INFO     | services.database:update_machine_price:185 - 🔄 Attempting to update price for machine c23808f6-1760-4cad-b031-3c5eb3556d98 to $799.0
2025-04-18 14:13:51 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:51 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: AlgoLaser Delta 40W Laser (ID: c23808f6-1760-4cad-b031-3c5eb3556d98)
2025-04-18 14:13:51 | INFO     | services.database:update_machine_price:201 - ✅ Found machine 'AlgoLaser Delta 40W Laser' with DB ID: c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:13:51 | INFO     | services.database:update_machine_price:241 - ℹ️ Main update failed, but still adding price history record
2025-04-18 14:13:51 | ERROR    | services.database:add_price_history:338 - Error adding price history for machine c23808f6-1760-4cad-b031-3c5eb3556d98: name 'PRICE_HISTORY_TABLE' is not defined
2025-04-18 14:13:51 | INFO     | services.price_service:update_machine_price:388 - Price updated successfully for AlgoLaser Delta 40W Laser (ID: c23808f6-1760-4cad-b031-3c5eb3556d98)
2025-04-18 14:13:51 | INFO     | __main__:update_machine_price:42 - Successfully updated price for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:14:00 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:14:00 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:14:00 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:14:00 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:14:00 | INFO     | scrapers.price_extractor:__init__:151 - Price extractor initialized with merchant-specific settings
2025-04-18 14:14:00 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:14:00 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:14:00 | INFO     | __main__:batch_update_prices:43 - Starting DRY RUN batch update with threshold of 1 days
2025-04-18 14:14:00 | INFO     | services.price_service:batch_update_machines:464 - Starting batch update with DRY RUN threshold of 1 days
2025-04-18 14:14:00 | INFO     | services.price_service:batch_update_machines:478 - Fetching machines not updated in 1 days
2025-04-18 14:14:00 | INFO     | services.database:get_machines_needing_update:402 - Found 148 machines for price update
2025-04-18 14:14:00 | INFO     | services.price_service:batch_update_machines:495 - Found 148 machines to update
2025-04-18 14:14:00 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c23808f6-1760-4cad-b031-3c5eb3556d98: AlgoLaser Delta 40W Laser
2025-04-18 14:14:00 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:14:00 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c23808f6-1760-4cad-b031-3c5eb3556d98
2025-04-18 14:14:01 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: AlgoLaser Delta 40W Laser (ID: c23808f6-1760-4cad-b031-3c5eb3556d98)
2025-04-18 14:14:01 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743 (Attempt 1/5)
2025-04-18 14:14:02 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://algolaser.com/products/algolaser-delta-40w-diode-laser-engraver?variant=48652379029811&z_code=p12712591847425122453&z_pid=135743
2025-04-18 14:14:02 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 799.0 using selector '.price'
2025-04-18 14:14:02 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c23808f6-1760-4cad-b031-3c5eb3556d98: 1299.0 -> 799.0
2025-04-18 14:14:02 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ff1f2676-9e67-47bf-9bb0-7152bace66b5: Aeon MIRA 7 Pro S
2025-04-18 14:14:02 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-18 14:14:02 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-18 14:14:02 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon MIRA 7 Pro S (ID: ff1f2676-9e67-47bf-9bb0-7152bace66b5)
2025-04-18 14:14:02 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/mira-s (Attempt 1/5)
2025-04-18 14:14:02 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/mira-s
2025-04-18 14:14:02 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 699.0 using selector '.price'
2025-04-18 14:14:02 | INFO     | services.price_service:batch_update_machines:551 - Price changed for ff1f2676-9e67-47bf-9bb0-7152bace66b5: 6995.0 -> 699.0
2025-04-18 14:14:02 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ef4f7a07-a068-4afc-b550-22d101c6e68b: Aeon SUPER NOVA 14S
2025-04-18 14:14:02 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-18 14:14:02 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ef4f7a07-a068-4afc-b550-22d101c6e68b
2025-04-18 14:14:02 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon SUPER NOVA 14S (ID: ef4f7a07-a068-4afc-b550-22d101c6e68b)
2025-04-18 14:14:02 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/supernova-s (Attempt 1/5)
2025-04-18 14:14:02 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/supernova-s
2025-04-18 14:14:02 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 25495.0 using selector '.price'
2025-04-18 14:14:02 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for ef4f7a07-a068-4afc-b550-22d101c6e68b: 25495.0
2025-04-18 14:14:02 | INFO     | services.price_service:batch_update_machines:513 - Processing machine e4093bf6-7a1c-4325-9094-8c572a307459: Algolaser DIY Kit MK2
2025-04-18 14:14:02 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-18 14:14:02 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: e4093bf6-7a1c-4325-9094-8c572a307459
2025-04-18 14:14:03 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Algolaser DIY Kit MK2 (ID: e4093bf6-7a1c-4325-9094-8c572a307459)
2025-04-18 14:14:03 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739 (Attempt 1/5)
2025-04-18 14:14:03 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://algolaser.com/products/algolaser-diy-kit-mk2-diode-laser-engraver?variant=50120360231219&z_code=p12712591847425122453&z_pid=135739
2025-04-18 14:14:03 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 799.0 using selector '.price'
2025-04-18 14:14:03 | INFO     | services.price_service:batch_update_machines:551 - Price changed for e4093bf6-7a1c-4325-9094-8c572a307459: 339.0 -> 799.0
2025-04-18 14:14:03 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b2956e47-a9da-4359-8c88-42ca9a8740e7: OMTech Galvo 30W
2025-04-18 14:14:03 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-18 14:14:03 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b2956e47-a9da-4359-8c88-42ca9a8740e7
2025-04-18 14:14:04 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Galvo 30W (ID: b2956e47-a9da-4359-8c88-42ca9a8740e7)
2025-04-18 14:14:04 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:14:04 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/galvo-fiber-30-30w-integrated-fiber-laser-marker-engraving-machine-with-5-9x-5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:14:05 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2199.0 using selector '.product__price'
2025-04-18 14:14:05 | INFO     | services.price_service:batch_update_machines:551 - Price changed for b2956e47-a9da-4359-8c88-42ca9a8740e7: 2199.99 -> 2199.0
2025-04-18 14:14:05 | INFO     | services.price_service:batch_update_machines:513 - Processing machine fad976a4-4bb9-4c91-92c3-ff774f02ec16: Algolaser Alpha MK2
2025-04-18 14:14:05 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-18 14:14:05 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-18 14:14:05 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Algolaser Alpha MK2 (ID: fad976a4-4bb9-4c91-92c3-ff774f02ec16)
2025-04-18 14:14:05 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser (Attempt 1/5)
2025-04-18 14:14:05 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-18 14:14:05 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 799.0 using selector '.price'
2025-04-18 14:14:05 | INFO     | services.price_service:batch_update_machines:551 - Price changed for fad976a4-4bb9-4c91-92c3-ff774f02ec16: 649.0 -> 799.0
2025-04-18 14:14:05 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: Algolaser DIY KIT Mini
2025-04-18 14:14:05 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-18 14:14:05 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c
2025-04-18 14:14:05 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Algolaser DIY KIT Mini (ID: 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c)
2025-04-18 14:14:05 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742 (Attempt 1/5)
2025-04-18 14:14:06 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://algolaser.com/products/algolaser-diy-kit-mini-laser-engraver?variant=48598666674483&z_code=p12712591847425122453&z_pid=135742
2025-04-18 14:14:06 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 799.0 using selector '.price'
2025-04-18 14:14:06 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 47b8dc18-5daa-4a2b-8ff8-9b48b176db9c: 169 -> 799.0
2025-04-18 14:14:06 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836: Aeon MIRA 5 S
2025-04-18 14:14:06 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-18 14:14:06 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-18 14:14:06 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon MIRA 5 S (ID: 8a0ad4b4-b616-4e5d-85a3-5631ab388836)
2025-04-18 14:14:06 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/mira-s (Attempt 1/5)
2025-04-18 14:14:06 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/mira-s
2025-04-18 14:14:06 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 699.0 using selector '.price'
2025-04-18 14:14:06 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 8a0ad4b4-b616-4e5d-85a3-5631ab388836: 6995 -> 699.0
2025-04-18 14:14:06 | INFO     | services.price_service:batch_update_machines:513 - Processing machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: Aeon NOVA 10 S
2025-04-18 14:14:06 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-18 14:14:06 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f
2025-04-18 14:14:06 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon NOVA 10 S (ID: dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f)
2025-04-18 14:14:06 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/nova-s (Attempt 1/5)
2025-04-18 14:14:06 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/nova-s
2025-04-18 14:14:06 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 17995.0 using selector '.price'
2025-04-18 14:14:06 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for dbf8b0cf-e699-4b6f-bb68-f30c0d163c0f: 17995
2025-04-18 14:14:06 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: ComMarker B4 100W MOPA
2025-04-18 14:14:06 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-18 14:14:06 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93
2025-04-18 14:14:07 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B4 100W MOPA (ID: 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93)
2025-04-18 14:14:07 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:07 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/b4-100w-jpt-mopa/?ref=snlyaljc
2025-04-18 14:14:07 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 600.0 using selector '.price'
2025-04-18 14:14:07 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 1f4a6f8d-5f34-4190-a1f3-2c33c42e7e93: 6666 -> 600.0
2025-04-18 14:14:07 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 103db02f-7852-41f8-b297-162d479eaa39: ComMarker B4 20W
2025-04-18 14:14:07 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 103db02f-7852-41f8-b297-162d479eaa39
2025-04-18 14:14:07 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 103db02f-7852-41f8-b297-162d479eaa39
2025-04-18 14:14:07 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B4 20W (ID: 103db02f-7852-41f8-b297-162d479eaa39)
2025-04-18 14:14:07 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:07 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc
2025-04-18 14:14:07 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 600.0 using selector '.price'
2025-04-18 14:14:07 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 103db02f-7852-41f8-b297-162d479eaa39: 2399.0 -> 600.0
2025-04-18 14:14:07 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ebd7976d-9fa0-4142-84cf-065d7adcb870: Atomstack X70 Max
2025-04-18 14:14:07 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-18 14:14:07 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ebd7976d-9fa0-4142-84cf-065d7adcb870
2025-04-18 14:14:07 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Atomstack X70 Max (ID: ebd7976d-9fa0-4142-84cf-065d7adcb870)
2025-04-18 14:14:07 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver (Attempt 1/5)
2025-04-18 14:14:08 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/x-series/products/atomstack-x70-max-360w-laser-engraver
2025-04-18 14:14:09 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 184.0 using selector '[data-price]'
2025-04-18 14:14:09 | INFO     | services.price_service:batch_update_machines:551 - Price changed for ebd7976d-9fa0-4142-84cf-065d7adcb870: 1849.0 -> 184.0
2025-04-18 14:14:09 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 58673ae1-b44e-4bc0-8d01-ce4878a44c86: Gweike G6 Split
2025-04-18 14:14:09 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 58673ae1-b44e-4bc0-8d01-ce4878a44c86
2025-04-18 14:14:09 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 58673ae1-b44e-4bc0-8d01-ce4878a44c86
2025-04-18 14:14:09 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G6 Split (ID: 58673ae1-b44e-4bc0-8d01-ce4878a44c86)
2025-04-18 14:14:09 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/g6-split-30w-60w-100w-fiber-laser-marking-engraving-machine-1?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:14:09 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/g6-split-30w-60w-100w-fiber-laser-marking-engraving-machine-1?ref=NMV3sU0i
2025-04-18 14:14:09 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3799.0 using selector '.price'
2025-04-18 14:14:09 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 58673ae1-b44e-4bc0-8d01-ce4878a44c86: 2399.0 -> 3799.0
2025-04-18 14:14:09 | INFO     | services.price_service:batch_update_machines:513 - Processing machine d3707433-2475-4b6c-8007-1e7126afd86c: Cloudray GM-100 LiteMarker
2025-04-18 14:14:09 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 14:14:09 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 14:14:10 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 14:14:10 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area (Attempt 1/5)
2025-04-18 14:14:11 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-18 14:14:11 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 949.0 using selector '[data-price]'
2025-04-18 14:14:11 | INFO     | services.price_service:batch_update_machines:551 - Price changed for d3707433-2475-4b6c-8007-1e7126afd86c: 9499 -> 949.0
2025-04-18 14:14:11 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 839e1b00-8496-478a-96c4-6248ce74ce74: ComMarker B4 30W
2025-04-18 14:14:11 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 839e1b00-8496-478a-96c4-6248ce74ce74
2025-04-18 14:14:11 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 839e1b00-8496-478a-96c4-6248ce74ce74
2025-04-18 14:14:11 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B4 30W (ID: 839e1b00-8496-478a-96c4-6248ce74ce74)
2025-04-18 14:14:11 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/b4-30w-laser-engraver-machine/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:11 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/b4-30w-laser-engraver-machine/?ref=snlyaljc
2025-04-18 14:14:11 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 800.0 using selector '.price'
2025-04-18 14:14:11 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 839e1b00-8496-478a-96c4-6248ce74ce74: 3199.0 -> 800.0
2025-04-18 14:14:11 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 3809e3cd-9d7b-473a-9d68-2beea84c3da5: OMTech Maker 25 50W
2025-04-18 14:14:11 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 3809e3cd-9d7b-473a-9d68-2beea84c3da5
2025-04-18 14:14:11 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 3809e3cd-9d7b-473a-9d68-2beea84c3da5
2025-04-18 14:14:11 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Maker 25 50W (ID: 3809e3cd-9d7b-473a-9d68-2beea84c3da5)
2025-04-18 14:14:11 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/60w-co2-laser-engraver-with-16-x-24-working-area?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate (Attempt 1/5)
2025-04-18 14:14:12 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/60w-co2-laser-engraver-with-16-x-24-working-area?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate
2025-04-18 14:14:12 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1999.0 using selector '.product__price'
2025-04-18 14:14:12 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 3809e3cd-9d7b-473a-9d68-2beea84c3da5: 1999.99 -> 1999.0
2025-04-18 14:14:12 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403: Cloudray QS-30 LiteMaker Pro
2025-04-18 14:14:12 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-18 14:14:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 9536b86b-2d53-4bc8-b6d7-7a41e71b1403
2025-04-18 14:14:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Cloudray QS-30 LiteMaker Pro (ID: 9536b86b-2d53-4bc8-b6d7-7a41e71b1403)
2025-04-18 14:14:12 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area (Attempt 1/5)
2025-04-18 14:14:13 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/qs-30-litemarker-30w-split-laser-engraver-fiber-marking-machine-with-4-3-x-4-3-7-9-x-7-9-working-area
2025-04-18 14:14:13 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 259.0 using selector '[data-price]'
2025-04-18 14:14:13 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 9536b86b-2d53-4bc8-b6d7-7a41e71b1403: 2599 -> 259.0
2025-04-18 14:14:13 | INFO     | services.price_service:batch_update_machines:513 - Processing machine d910f7fc-a8e0-48ad-8a62-78c9e4259b8b: ComMarker B6 30W
2025-04-18 14:14:13 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine d910f7fc-a8e0-48ad-8a62-78c9e4259b8b
2025-04-18 14:14:13 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d910f7fc-a8e0-48ad-8a62-78c9e4259b8b
2025-04-18 14:14:13 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B6 30W (ID: d910f7fc-a8e0-48ad-8a62-78c9e4259b8b)
2025-04-18 14:14:13 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:13 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-18 14:14:13 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 0.0 using selector '.price'
2025-04-18 14:14:13 | INFO     | services.price_service:batch_update_machines:551 - Price changed for d910f7fc-a8e0-48ad-8a62-78c9e4259b8b: 2399 -> 0.0
2025-04-18 14:14:13 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c: ComMarker B6 MOPA 30W
2025-04-18 14:14:13 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-18 14:14:13 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-18 14:14:14 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B6 MOPA 30W (ID: 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c)
2025-04-18 14:14:14 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:14 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-18 14:14:14 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 460.0 using selector '.price'
2025-04-18 14:14:14 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c: 2299.0 -> 460.0
2025-04-18 14:14:14 | INFO     | services.price_service:batch_update_machines:513 - Processing machine d94ed1c2-9dba-47e4-9600-5af55564afaa: ComMarker B6 MOPA 60W
2025-04-18 14:14:14 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine d94ed1c2-9dba-47e4-9600-5af55564afaa
2025-04-18 14:14:14 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d94ed1c2-9dba-47e4-9600-5af55564afaa
2025-04-18 14:14:14 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B6 MOPA 60W (ID: d94ed1c2-9dba-47e4-9600-5af55564afaa)
2025-04-18 14:14:14 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:14 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-18 14:14:14 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 460.0 using selector '.price'
2025-04-18 14:14:14 | INFO     | services.price_service:batch_update_machines:551 - Price changed for d94ed1c2-9dba-47e4-9600-5af55564afaa: 2299.0 -> 460.0
2025-04-18 14:14:14 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6: Creality Falcon 2
2025-04-18 14:14:14 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 1cbe702f-501f-4491-8e78-38c0e4bf7bb6
2025-04-18 14:14:14 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 1cbe702f-501f-4491-8e78-38c0e4bf7bb6
2025-04-18 14:14:14 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Creality Falcon 2 (ID: 1cbe702f-501f-4491-8e78-38c0e4bf7bb6)
2025-04-18 14:14:14 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://store.creality.com/products/falcon2-22w-laser-engraver-cutter (Attempt 1/5)
2025-04-18 14:14:16 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://store.creality.com/products/falcon2-22w-laser-engraver-cutter
2025-04-18 14:14:16 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 1000.0 using regex pattern
2025-04-18 14:14:16 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 1cbe702f-501f-4491-8e78-38c0e4bf7bb6: 719.0 -> 1000.0
2025-04-18 14:14:16 | INFO     | services.price_service:batch_update_machines:513 - Processing machine af474938-178d-4797-ac32-4426e73e43b2: ComMarker B6 20W
2025-04-18 14:14:16 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine af474938-178d-4797-ac32-4426e73e43b2
2025-04-18 14:14:16 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: af474938-178d-4797-ac32-4426e73e43b2
2025-04-18 14:14:16 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B6 20W (ID: af474938-178d-4797-ac32-4426e73e43b2)
2025-04-18 14:14:16 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/commarker-b6/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:17 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/commarker-b6/?ref=snlyaljc
2025-04-18 14:14:17 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 0.0 using selector '.price'
2025-04-18 14:14:17 | INFO     | services.price_service:batch_update_machines:551 - Price changed for af474938-178d-4797-ac32-4426e73e43b2: 1839 -> 0.0
2025-04-18 14:14:17 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04: ComMarker B4 50W
2025-04-18 14:14:17 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04
2025-04-18 14:14:17 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04
2025-04-18 14:14:17 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B4 50W (ID: 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04)
2025-04-18 14:14:17 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/b4-50w-fiber-laser-engraver/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:17 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/b4-50w-fiber-laser-engraver/?ref=snlyaljc
2025-04-18 14:14:17 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1055.0 using selector '.price'
2025-04-18 14:14:17 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 3b2a82b6-7496-43b8-ad2d-dc663c7b5a04: 4221.0 -> 1055.0
2025-04-18 14:14:17 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b6824b08-7270-464c-82f3-3d31c439fbe3: ComMarker B6 MOPA 20W
2025-04-18 14:14:17 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b6824b08-7270-464c-82f3-3d31c439fbe3
2025-04-18 14:14:17 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b6824b08-7270-464c-82f3-3d31c439fbe3
2025-04-18 14:14:17 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B6 MOPA 20W (ID: b6824b08-7270-464c-82f3-3d31c439fbe3)
2025-04-18 14:14:17 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc (Attempt 1/5)
2025-04-18 14:14:17 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-18 14:14:17 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 460.0 using selector '.price'
2025-04-18 14:14:17 | INFO     | services.price_service:batch_update_machines:551 - Price changed for b6824b08-7270-464c-82f3-3d31c439fbe3: 2299.0 -> 460.0
2025-04-18 14:14:17 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 7d78d48e-932c-44c9-8f29-970ca508629f: OneLaser XT
2025-04-18 14:14:17 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 7d78d48e-932c-44c9-8f29-970ca508629f
2025-04-18 14:14:17 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 7d78d48e-932c-44c9-8f29-970ca508629f
2025-04-18 14:14:18 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OneLaser XT (ID: 7d78d48e-932c-44c9-8f29-970ca508629f)
2025-04-18 14:14:18 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.1laser.com/products/onelaser-xt-desktop-laser-machine (Attempt 1/5)
2025-04-18 14:14:18 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.1laser.com/products/onelaser-xt-desktop-laser-machine
2025-04-18 14:14:18 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 800.0 using selector '.price'
2025-04-18 14:14:18 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 7d78d48e-932c-44c9-8f29-970ca508629f: 3399.0 -> 800.0
2025-04-18 14:14:18 | INFO     | services.price_service:batch_update_machines:513 - Processing machine e353d187-82db-4fe4-bbf3-2bd859516b4c: Epilog Maker 12
2025-04-18 14:14:18 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine e353d187-82db-4fe4-bbf3-2bd859516b4c
2025-04-18 14:14:18 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: e353d187-82db-4fe4-bbf3-2bd859516b4c
2025-04-18 14:14:18 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Epilog Maker 12 (ID: e353d187-82db-4fe4-bbf3-2bd859516b4c)
2025-04-18 14:14:18 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://shop.epiloglaser.com/products/fusion-maker-12 (Attempt 1/5)
2025-04-18 14:14:19 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://shop.epiloglaser.com/products/fusion-maker-12
2025-04-18 14:14:19 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 8995.0 using selector '.price'
2025-04-18 14:14:19 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for e353d187-82db-4fe4-bbf3-2bd859516b4c: 8995.0
2025-04-18 14:14:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c279ded1-1f68-4492-9f3d-5e07e07eb023: EMP ST100J
2025-04-18 14:14:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c279ded1-1f68-4492-9f3d-5e07e07eb023
2025-04-18 14:14:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c279ded1-1f68-4492-9f3d-5e07e07eb023
2025-04-18 14:14:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EMP ST100J (ID: c279ded1-1f68-4492-9f3d-5e07e07eb023)
2025-04-18 14:14:19 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/emp-laser (Attempt 1/5)
2025-04-18 14:14:19 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/emp-laser
2025-04-18 14:14:19 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 499.0 using selector '.price'
2025-04-18 14:14:19 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c279ded1-1f68-4492-9f3d-5e07e07eb023: 4995.0 -> 499.0
2025-04-18 14:14:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 01cedfc4-fc89-4930-b258-90bb778e528e: EM Smart Super
2025-04-18 14:14:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 01cedfc4-fc89-4930-b258-90bb778e528e
2025-04-18 14:14:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 01cedfc4-fc89-4930-b258-90bb778e528e
2025-04-18 14:14:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EM Smart Super (ID: 01cedfc4-fc89-4930-b258-90bb778e528e)
2025-04-18 14:14:19 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://em-smart.com/collections/super/products/em-smart-super-30w-50w-fiber-laser-engraver-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01 (Attempt 1/5)
2025-04-18 14:14:20 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://em-smart.com/collections/super/products/em-smart-super-30w-50w-fiber-laser-engraver-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01
2025-04-18 14:14:20 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3499.0 using selector '.price'
2025-04-18 14:14:20 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 01cedfc4-fc89-4930-b258-90bb778e528e: 3499.0
2025-04-18 14:14:20 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 533f1772-4dc1-4239-8eb3-38cc598933b3: Epilog Fusion Maker 24
2025-04-18 14:14:20 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 533f1772-4dc1-4239-8eb3-38cc598933b3
2025-04-18 14:14:20 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 533f1772-4dc1-4239-8eb3-38cc598933b3
2025-04-18 14:14:20 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Epilog Fusion Maker 24 (ID: 533f1772-4dc1-4239-8eb3-38cc598933b3)
2025-04-18 14:14:20 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24 (Attempt 1/5)
2025-04-18 14:14:20 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-24
2025-04-18 14:14:20 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 13995.0 using selector '.price'
2025-04-18 14:14:20 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 533f1772-4dc1-4239-8eb3-38cc598933b3: 13995
2025-04-18 14:14:20 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715: Epilog Fusion Maker 36
2025-04-18 14:14:20 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715
2025-04-18 14:14:20 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715
2025-04-18 14:14:20 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Epilog Fusion Maker 36 (ID: 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715)
2025-04-18 14:14:20 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36 (Attempt 1/5)
2025-04-18 14:14:20 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://shop.epiloglaser.com/collections/epilog-laser-engraving-and-cutting-systems/products/fusion-maker-36
2025-04-18 14:14:21 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 16995.0 using selector '.price'
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 4e9d52a3-2c62-4c10-8dd9-f8b0d5ff7715: 16995
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 8a7e16be-397e-43fe-8b5c-75a3f6f504fb: EMP ST50R
2025-04-18 14:14:21 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8a7e16be-397e-43fe-8b5c-75a3f6f504fb
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8a7e16be-397e-43fe-8b5c-75a3f6f504fb
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EMP ST50R (ID: 8a7e16be-397e-43fe-8b5c-75a3f6f504fb)
2025-04-18 14:14:21 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/emp-laser (Attempt 1/5)
2025-04-18 14:14:21 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/emp-laser
2025-04-18 14:14:21 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 499.0 using selector '.price'
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 8a7e16be-397e-43fe-8b5c-75a3f6f504fb: 4995.0 -> 499.0
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:513 - Processing machine d14d3459-7c00-4a82-aa26-4e6df27f1aa1: EMP ST60J
2025-04-18 14:14:21 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine d14d3459-7c00-4a82-aa26-4e6df27f1aa1
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d14d3459-7c00-4a82-aa26-4e6df27f1aa1
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EMP ST60J (ID: d14d3459-7c00-4a82-aa26-4e6df27f1aa1)
2025-04-18 14:14:21 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/emp-laser (Attempt 1/5)
2025-04-18 14:14:21 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/emp-laser
2025-04-18 14:14:21 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 499.0 using selector '.price'
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:551 - Price changed for d14d3459-7c00-4a82-aa26-4e6df27f1aa1: 4995.0 -> 499.0
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4efe1038-29b8-47c8-972d-5591370964ec: EMP ST30R
2025-04-18 14:14:21 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4efe1038-29b8-47c8-972d-5591370964ec
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4efe1038-29b8-47c8-972d-5591370964ec
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EMP ST30R (ID: 4efe1038-29b8-47c8-972d-5591370964ec)
2025-04-18 14:14:21 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/emp-laser (Attempt 1/5)
2025-04-18 14:14:21 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/emp-laser
2025-04-18 14:14:21 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 499.0 using selector '.price'
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 4efe1038-29b8-47c8-972d-5591370964ec: 4995 -> 499.0
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4923b2ee-8a9e-4743-9643-af7c91feb806: Thunder Aurora 8 MOPA
2025-04-18 14:14:21 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4923b2ee-8a9e-4743-9643-af7c91feb806
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4923b2ee-8a9e-4743-9643-af7c91feb806
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Aurora 8 MOPA (ID: 4923b2ee-8a9e-4743-9643-af7c91feb806)
2025-04-18 14:14:21 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/aurora-8-mopa/ (Attempt 1/5)
2025-04-18 14:14:21 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/aurora-8-mopa/. Status code: 403
2025-04-18 14:14:21 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/aurora-8-mopa/
2025-04-18 14:14:21 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 4923b2ee-8a9e-4743-9643-af7c91feb806: Failed to fetch product page
2025-04-18 14:14:21 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 785d8c3b-3d74-4755-b78b-98345c443b63: LaserMATIC Mk2
2025-04-18 14:14:21 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 785d8c3b-3d74-4755-b78b-98345c443b63
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 785d8c3b-3d74-4755-b78b-98345c443b63
2025-04-18 14:14:21 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: LaserMATIC Mk2 (ID: 785d8c3b-3d74-4755-b78b-98345c443b63)
2025-04-18 14:14:21 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://rolyautomation.com/products/lasermatic-mk2-diode-laser-engraver?bg_ref=rZxaOxidn5 (Attempt 1/5)
2025-04-18 14:14:22 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://rolyautomation.com/products/lasermatic-mk2-diode-laser-engraver?bg_ref=rZxaOxidn5
2025-04-18 14:14:22 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1049.0 using selector '.product__price'
2025-04-18 14:14:22 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 785d8c3b-3d74-4755-b78b-98345c443b63: 1049.0
2025-04-18 14:14:22 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 6f02d540-d04a-4873-905e-450ec42615f7: Gweike G2 Max
2025-04-18 14:14:22 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 6f02d540-d04a-4873-905e-450ec42615f7
2025-04-18 14:14:22 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 6f02d540-d04a-4873-905e-450ec42615f7
2025-04-18 14:14:22 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G2 Max (ID: 6f02d540-d04a-4873-905e-450ec42615f7)
2025-04-18 14:14:22 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6 (Attempt 1/5)
2025-04-18 14:14:22 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/g2-50w-fiber-laser-engraver?ref=eXZYQTHYc7dy_6
2025-04-18 14:14:22 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2599.0 using selector '.price'
2025-04-18 14:14:22 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 6f02d540-d04a-4873-905e-450ec42615f7: 2599
2025-04-18 14:14:22 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ba985fae-8f77-439a-a631-f66f1c8af245: Glowforge Plus HD
2025-04-18 14:14:22 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ba985fae-8f77-439a-a631-f66f1c8af245
2025-04-18 14:14:22 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ba985fae-8f77-439a-a631-f66f1c8af245
2025-04-18 14:14:23 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Plus HD (ID: ba985fae-8f77-439a-a631-f66f1c8af245)
2025-04-18 14:14:23 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://glowforge.com/b/pro (Attempt 1/5)
2025-04-18 14:14:23 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://glowforge.com/b/pro
2025-04-18 14:14:23 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 6999.0 using regex pattern
2025-04-18 14:14:23 | INFO     | services.price_service:batch_update_machines:551 - Price changed for ba985fae-8f77-439a-a631-f66f1c8af245: 4999 -> 6999.0
2025-04-18 14:14:23 | INFO     | services.price_service:batch_update_machines:513 - Processing machine a911e1a8-8e65-4e57-a366-c694cc7deeb8: Glowforge Aura
2025-04-18 14:14:23 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine a911e1a8-8e65-4e57-a366-c694cc7deeb8
2025-04-18 14:14:23 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: a911e1a8-8e65-4e57-a366-c694cc7deeb8
2025-04-18 14:14:23 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Aura (ID: a911e1a8-8e65-4e57-a366-c694cc7deeb8)
2025-04-18 14:14:23 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://glowforge.com/b/craft (Attempt 1/5)
2025-04-18 14:14:23 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://glowforge.com/b/craft
2025-04-18 14:14:23 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 6999.0 using regex pattern
2025-04-18 14:14:23 | INFO     | services.price_service:batch_update_machines:551 - Price changed for a911e1a8-8e65-4e57-a366-c694cc7deeb8: 899 -> 6999.0
2025-04-18 14:14:23 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 163b26bb-b096-4473-9a17-569c1cfb4f18: Flux Hexa
2025-04-18 14:14:23 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-18 14:14:23 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 163b26bb-b096-4473-9a17-569c1cfb4f18
2025-04-18 14:14:23 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Flux Hexa (ID: 163b26bb-b096-4473-9a17-569c1cfb4f18)
2025-04-18 14:14:23 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu (Attempt 1/5)
2025-04-18 14:14:24 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu
2025-04-18 14:14:24 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2990.0 using selector '.price'
2025-04-18 14:14:24 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 163b26bb-b096-4473-9a17-569c1cfb4f18: 5495 -> 2990.0
2025-04-18 14:14:24 | INFO     | services.price_service:batch_update_machines:513 - Processing machine f4370877-a40c-459d-ab83-e93a32d102fb: Genmitsu L8
2025-04-18 14:14:24 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine f4370877-a40c-459d-ab83-e93a32d102fb
2025-04-18 14:14:24 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: f4370877-a40c-459d-ab83-e93a32d102fb
2025-04-18 14:14:24 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Genmitsu L8 (ID: f4370877-a40c-459d-ab83-e93a32d102fb)
2025-04-18 14:14:24 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true (Attempt 1/5)
2025-04-18 14:14:27 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.amazon.com/dp/B0CMTL5QSJ?tag=brancull-20&th=1&psc=1&geniuslink=true
2025-04-18 14:14:27 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 4399.0 using regex pattern
2025-04-18 14:14:27 | INFO     | services.price_service:batch_update_machines:551 - Price changed for f4370877-a40c-459d-ab83-e93a32d102fb: 799 -> 4399.0
2025-04-18 14:14:27 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 23372b1e-277f-4ad4-b9ee-715b05782894: Gweike G2 20W
2025-04-18 14:14:27 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 23372b1e-277f-4ad4-b9ee-715b05782894
2025-04-18 14:14:27 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 23372b1e-277f-4ad4-b9ee-715b05782894
2025-04-18 14:14:27 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G2 20W (ID: 23372b1e-277f-4ad4-b9ee-715b05782894)
2025-04-18 14:14:27 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:14:28 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/g2-pro-series?ref=NMV3sU0i
2025-04-18 14:14:28 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1399.0 using selector '.price'
2025-04-18 14:14:28 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 23372b1e-277f-4ad4-b9ee-715b05782894: 1399
2025-04-18 14:14:28 | INFO     | services.price_service:batch_update_machines:513 - Processing machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2: Gweike G2 30W
2025-04-18 14:14:28 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2
2025-04-18 14:14:28 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2
2025-04-18 14:14:28 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G2 30W (ID: fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2)
2025-04-18 14:14:28 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:14:28 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/g2-pro-fiber-laser-engraver?ref=NMV3sU0i
2025-04-18 14:14:28 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1799.0 using selector '.price'
2025-04-18 14:14:28 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for fc6b76a8-1862-4b8f-a6a8-a2c71ba8c8f2: 1799
2025-04-18 14:14:28 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b78b8088-9577-4047-a975-32472998e3e4: Glowforge Pro HD
2025-04-18 14:14:28 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b78b8088-9577-4047-a975-32472998e3e4
2025-04-18 14:14:28 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b78b8088-9577-4047-a975-32472998e3e4
2025-04-18 14:14:28 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Pro HD (ID: b78b8088-9577-4047-a975-32472998e3e4)
2025-04-18 14:14:28 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://glowforge.com/b/pro (Attempt 1/5)
2025-04-18 14:14:28 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://glowforge.com/b/pro
2025-04-18 14:14:28 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 6999.0 using regex pattern
2025-04-18 14:14:28 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for b78b8088-9577-4047-a975-32472998e3e4: 6999
2025-04-18 14:14:28 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1: Gweike Cloud RF
2025-04-18 14:14:28 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b6cfba2d-fbcb-4769-af88-435fa2fd20c1
2025-04-18 14:14:28 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b6cfba2d-fbcb-4769-af88-435fa2fd20c1
2025-04-18 14:14:28 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike Cloud RF (ID: b6cfba2d-fbcb-4769-af88-435fa2fd20c1)
2025-04-18 14:14:28 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary (Attempt 1/5)
2025-04-18 14:14:29 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/gweikecloud-rf-metal-tube-laser-engraver-with-rotary
2025-04-18 14:14:29 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3799.0 using selector '.price'
2025-04-18 14:14:29 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for b6cfba2d-fbcb-4769-af88-435fa2fd20c1: 3799
2025-04-18 14:14:29 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c2769ef1-2ffd-4149-89cf-854b5ff78f81: Gweike Cloud NOX
2025-04-18 14:14:29 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c2769ef1-2ffd-4149-89cf-854b5ff78f81
2025-04-18 14:14:29 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c2769ef1-2ffd-4149-89cf-854b5ff78f81
2025-04-18 14:14:29 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike Cloud NOX (ID: c2769ef1-2ffd-4149-89cf-854b5ff78f81)
2025-04-18 14:14:29 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/nox?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:14:29 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/nox?ref=NMV3sU0i
2025-04-18 14:14:29 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1939.0 using selector '.price'
2025-04-18 14:14:29 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for c2769ef1-2ffd-4149-89cf-854b5ff78f81: 1939
2025-04-18 14:14:29 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91: Gweike G1
2025-04-18 14:14:29 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91
2025-04-18 14:14:29 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91
2025-04-18 14:14:29 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G1 (ID: 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91)
2025-04-18 14:14:29 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/g1-desktop-laser-engraver?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:14:30 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/g1-desktop-laser-engraver?ref=NMV3sU0i
2025-04-18 14:14:30 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 149.0 using selector '.price'
2025-04-18 14:14:30 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 1c0c5313-9e75-4ee7-bb3f-e0854a9a2f91: 149
2025-04-18 14:14:30 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2: Gweike G6 MOPA
2025-04-18 14:14:30 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2
2025-04-18 14:14:30 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2
2025-04-18 14:14:30 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G6 MOPA (ID: 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2)
2025-04-18 14:14:30 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/g6-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44232396144857 (Attempt 1/5)
2025-04-18 14:14:30 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/g6-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44232396144857
2025-04-18 14:14:30 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4199.0 using selector '.price'
2025-04-18 14:14:30 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 0f68270e-ea6a-4538-bfd4-4daa7ed3d0d2: 4199
2025-04-18 14:14:30 | INFO     | services.price_service:batch_update_machines:513 - Processing machine df2e8087-6878-478a-a7ca-31f95ae73197: Laguna SmartShop Laser EX
2025-04-18 14:14:30 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine df2e8087-6878-478a-a7ca-31f95ae73197
2025-04-18 14:14:30 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: df2e8087-6878-478a-a7ca-31f95ae73197
2025-04-18 14:14:31 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Laguna SmartShop Laser EX (ID: df2e8087-6878-478a-a7ca-31f95ae73197)
2025-04-18 14:14:31 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-ex/ (Attempt 1/5)
2025-04-18 14:14:31 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-ex/
2025-04-18 14:14:31 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 12999.0 using selector '.price'
2025-04-18 14:14:31 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for df2e8087-6878-478a-a7ca-31f95ae73197: 12999.0
2025-04-18 14:14:31 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 2dff352f-d660-4210-afda-1d7bbea3611e: Longer Ray5
2025-04-18 14:14:31 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 2dff352f-d660-4210-afda-1d7bbea3611e
2025-04-18 14:14:31 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 2dff352f-d660-4210-afda-1d7bbea3611e
2025-04-18 14:14:31 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Longer Ray5 (ID: 2dff352f-d660-4210-afda-1d7bbea3611e)
2025-04-18 14:14:31 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.longer3d.com/products/longer-ray5-laser-engraver (Attempt 1/5)
2025-04-18 14:14:32 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.longer3d.com/products/longer-ray5-laser-engraver
2025-04-18 14:14:33 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 1159.99 using regex pattern
2025-04-18 14:14:33 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 2dff352f-d660-4210-afda-1d7bbea3611e: 199.99 -> 1159.99
2025-04-18 14:14:33 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d: Longer Nano
2025-04-18 14:14:33 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d
2025-04-18 14:14:33 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d
2025-04-18 14:14:33 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Longer Nano (ID: 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d)
2025-04-18 14:14:33 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.longer3d.com/products/longer-nano-6w-12w-laser-engraving-machine (Attempt 1/5)
2025-04-18 14:14:34 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.longer3d.com/products/longer-nano-6w-12w-laser-engraving-machine
2025-04-18 14:14:34 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 2209.99 using regex pattern
2025-04-18 14:14:34 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 8a90b7a6-c8f6-4a0b-8ed6-c731d007557d: 549.99 -> 2209.99
2025-04-18 14:14:34 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ecd966e7-4b98-4d11-976f-5af6cb56ca7e: Longer B1
2025-04-18 14:14:34 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ecd966e7-4b98-4d11-976f-5af6cb56ca7e
2025-04-18 14:14:34 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ecd966e7-4b98-4d11-976f-5af6cb56ca7e
2025-04-18 14:14:34 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Longer B1 (ID: ecd966e7-4b98-4d11-976f-5af6cb56ca7e)
2025-04-18 14:14:34 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.longer3d.com/products/longer-laser-b1-20w-laser-engraver (Attempt 1/5)
2025-04-18 14:14:35 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.longer3d.com/products/longer-laser-b1-20w-laser-engraver
2025-04-18 14:14:36 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 1849.99 using regex pattern
2025-04-18 14:14:36 | INFO     | services.price_service:batch_update_machines:551 - Price changed for ecd966e7-4b98-4d11-976f-5af6cb56ca7e: 669.99 -> 1849.99
2025-04-18 14:14:36 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 6514b81b-71bf-401c-aa88-21eccb61ac01: Laguna SmartShop Laser MX
2025-04-18 14:14:36 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 6514b81b-71bf-401c-aa88-21eccb61ac01
2025-04-18 14:14:36 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 6514b81b-71bf-401c-aa88-21eccb61ac01
2025-04-18 14:14:36 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Laguna SmartShop Laser MX (ID: 6514b81b-71bf-401c-aa88-21eccb61ac01)
2025-04-18 14:14:36 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-mx/ (Attempt 1/5)
2025-04-18 14:14:36 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-mx/
2025-04-18 14:14:36 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 8999.0 using selector '.price'
2025-04-18 14:14:36 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 6514b81b-71bf-401c-aa88-21eccb61ac01: 8999
2025-04-18 14:14:36 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 5b2ccb74-d042-4832-a22a-c45b5cb62db7: Gweike G6 Split MOPA
2025-04-18 14:14:36 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 5b2ccb74-d042-4832-a22a-c45b5cb62db7
2025-04-18 14:14:36 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 5b2ccb74-d042-4832-a22a-c45b5cb62db7
2025-04-18 14:14:36 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike G6 Split MOPA (ID: 5b2ccb74-d042-4832-a22a-c45b5cb62db7)
2025-04-18 14:14:36 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/g6-split-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44194643378393 (Attempt 1/5)
2025-04-18 14:14:37 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/g6-split-mopa-30w-60w-100w-fiber-laser-marking-engraving-machine?ref=NMV3sU0i&variant=44194643378393
2025-04-18 14:14:37 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4299.0 using selector '.price'
2025-04-18 14:14:37 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 5b2ccb74-d042-4832-a22a-c45b5cb62db7: 4299
2025-04-18 14:14:37 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 42f387de-d022-4a4c-a7a6-2ffe08151bab: Laserpecker 5
2025-04-18 14:14:37 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 42f387de-d022-4a4c-a7a6-2ffe08151bab
2025-04-18 14:14:37 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 42f387de-d022-4a4c-a7a6-2ffe08151bab
2025-04-18 14:14:37 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Laserpecker 5 (ID: 42f387de-d022-4a4c-a7a6-2ffe08151bab)
2025-04-18 14:14:37 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.laserpecker.net/en-us/products/laserpecker-lp5 (Attempt 1/5)
2025-04-18 14:14:38 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.laserpecker.net/en-us/products/laserpecker-lp5
2025-04-18 14:14:38 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 0.0 using selector '.price'
2025-04-18 14:14:38 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 42f387de-d022-4a4c-a7a6-2ffe08151bab: 2969 -> 0.0
2025-04-18 14:14:38 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4748dc3d-ede8-439a-acb0-4d5906afa21e: Monport GA 100W MOPA
2025-04-18 14:14:38 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4748dc3d-ede8-439a-acb0-4d5906afa21e
2025-04-18 14:14:38 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4748dc3d-ede8-439a-acb0-4d5906afa21e
2025-04-18 14:14:38 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport GA 100W MOPA (ID: 4748dc3d-ede8-439a-acb0-4d5906afa21e)
2025-04-18 14:14:38 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/collections/ga-series-mopa-fiber-laser/products/monport-100e2m7-integrated-175af-mopa-fiber-laser-engraver-marking-machine?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:14:40 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/collections/ga-series-mopa-fiber-laser/products/monport-100e2m7-integrated-175af-mopa-fiber-laser-engraver-marking-machine?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:14:40 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 6499.99 using selector '.price'
2025-04-18 14:14:40 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 4748dc3d-ede8-439a-acb0-4d5906afa21e: 6499.99
2025-04-18 14:14:40 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 81106aba-e90c-414d-9545-f89445be045d: Monport GPro 30W Split MOPA
2025-04-18 14:14:40 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 81106aba-e90c-414d-9545-f89445be045d
2025-04-18 14:14:40 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 81106aba-e90c-414d-9545-f89445be045d
2025-04-18 14:14:40 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport GPro 30W Split MOPA (ID: 81106aba-e90c-414d-9545-f89445be045d)
2025-04-18 14:14:40 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/collections/split-fiber-engraving-machine/products/monport-30w-split-mopa-fiber-laser-engraver-marking-machine?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:14:42 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/collections/split-fiber-engraving-machine/products/monport-30w-split-mopa-fiber-laser-engraver-marking-machine?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:14:42 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3499.99 using selector '.price'
2025-04-18 14:14:42 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 81106aba-e90c-414d-9545-f89445be045d: 3499.99
2025-04-18 14:14:42 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 86c12b25-1f23-42f8-a6bc-b8a45c9ac526: Monport Effi16S 150W Laser
2025-04-18 14:14:42 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 86c12b25-1f23-42f8-a6bc-b8a45c9ac526
2025-04-18 14:14:42 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 86c12b25-1f23-42f8-a6bc-b8a45c9ac526
2025-04-18 14:14:42 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport Effi16S 150W Laser (ID: 86c12b25-1f23-42f8-a6bc-b8a45c9ac526)
2025-04-18 14:14:42 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/monport-effi16s-upgraded-150w-co2-laser-engraver-cutter-with-autofocus-and-built-in-water-chiller?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:14:44 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/monport-effi16s-upgraded-150w-co2-laser-engraver-cutter-with-autofocus-and-built-in-water-chiller?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:14:44 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 7199.99 using selector '.price'
2025-04-18 14:14:44 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 86c12b25-1f23-42f8-a6bc-b8a45c9ac526: 7199.99
2025-04-18 14:14:44 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ca98f78c-4f83-4125-b8c6-dfce57b1c789: Monport GP 20
2025-04-18 14:14:44 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ca98f78c-4f83-4125-b8c6-dfce57b1c789
2025-04-18 14:14:44 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ca98f78c-4f83-4125-b8c6-dfce57b1c789
2025-04-18 14:14:45 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport GP 20 (ID: ca98f78c-4f83-4125-b8c6-dfce57b1c789)
2025-04-18 14:14:45 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/monport-gp20-integrated-fiber-laser-engraver-marking-machine-with-electric-lifting (Attempt 1/5)
2025-04-18 14:14:46 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/monport-gp20-integrated-fiber-laser-engraver-marking-machine-with-electric-lifting
2025-04-18 14:14:46 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1399.99 using selector '.price'
2025-04-18 14:14:46 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for ca98f78c-4f83-4125-b8c6-dfce57b1c789: 1399.99
2025-04-18 14:14:46 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 37cb1603-a95a-4785-948d-1946cf8e2133: Monport GA 60W MOPA
2025-04-18 14:14:46 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 37cb1603-a95a-4785-948d-1946cf8e2133
2025-04-18 14:14:46 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 37cb1603-a95a-4785-948d-1946cf8e2133
2025-04-18 14:14:47 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport GA 60W MOPA (ID: 37cb1603-a95a-4785-948d-1946cf8e2133)
2025-04-18 14:14:47 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/monport-60e2m7-integrated-175af-mopa-fiber-laser-engraver-marking-machine (Attempt 1/5)
2025-04-18 14:14:48 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/monport-60e2m7-integrated-175af-mopa-fiber-laser-engraver-marking-machine
2025-04-18 14:14:48 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4599.99 using selector '.price'
2025-04-18 14:14:48 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 37cb1603-a95a-4785-948d-1946cf8e2133: 4599.99
2025-04-18 14:14:48 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 432333d0-5c5b-41f0-82ec-4a13ca619fa5: Monport Onyx 55W Laser
2025-04-18 14:14:48 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 432333d0-5c5b-41f0-82ec-4a13ca619fa5
2025-04-18 14:14:48 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 432333d0-5c5b-41f0-82ec-4a13ca619fa5
2025-04-18 14:14:49 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport Onyx 55W Laser (ID: 432333d0-5c5b-41f0-82ec-4a13ca619fa5)
2025-04-18 14:14:49 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/monport-onyx-55w-desktop-co2-laser-cutter-with-upgraded-rotary-axis?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:14:50 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/monport-onyx-55w-desktop-co2-laser-cutter-with-upgraded-rotary-axis?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:14:50 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1599.99 using selector '.price'
2025-04-18 14:14:50 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 432333d0-5c5b-41f0-82ec-4a13ca619fa5: 1599.99
2025-04-18 14:14:50 | INFO     | services.price_service:batch_update_machines:513 - Processing machine a991a490-c822-4378-a67d-fb3fb7541baf: Monport Reno65 Pro 65W Laser
2025-04-18 14:14:50 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine a991a490-c822-4378-a67d-fb3fb7541baf
2025-04-18 14:14:50 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: a991a490-c822-4378-a67d-fb3fb7541baf
2025-04-18 14:14:50 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport Reno65 Pro 65W Laser (ID: a991a490-c822-4378-a67d-fb3fb7541baf)
2025-04-18 14:14:50 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/reno65-pro?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:14:52 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/reno65-pro?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:14:52 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1999.99 using selector '.price'
2025-04-18 14:14:52 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for a991a490-c822-4378-a67d-fb3fb7541baf: 1999.99
2025-04-18 14:14:52 | INFO     | services.price_service:batch_update_machines:513 - Processing machine e94cc9b6-dc09-4b60-adcd-52b0a3f718e1: OMTech Galvo 20W
2025-04-18 14:14:52 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine e94cc9b6-dc09-4b60-adcd-52b0a3f718e1
2025-04-18 14:14:52 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: e94cc9b6-dc09-4b60-adcd-52b0a3f718e1
2025-04-18 14:14:52 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Galvo 20W (ID: e94cc9b6-dc09-4b60-adcd-52b0a3f718e1)
2025-04-18 14:14:52 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/20w-integrated-fiber-laser-marker-engraving-machine-with-4-3x-4-3-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:14:53 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/20w-integrated-fiber-laser-marker-engraving-machine-with-4-3x-4-3-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:14:53 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1399.0 using selector '.product__price'
2025-04-18 14:14:53 | INFO     | services.price_service:batch_update_machines:551 - Price changed for e94cc9b6-dc09-4b60-adcd-52b0a3f718e1: 1399.99 -> 1399.0
2025-04-18 14:14:53 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c48d2e36-a190-4131-8704-6962fd029e48: OMTech AF2028-60
2025-04-18 14:14:53 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c48d2e36-a190-4131-8704-6962fd029e48
2025-04-18 14:14:53 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c48d2e36-a190-4131-8704-6962fd029e48
2025-04-18 14:14:53 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech AF2028-60 (ID: c48d2e36-a190-4131-8704-6962fd029e48)
2025-04-18 14:14:53 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/collections/mid-range-co2-laser-engravers/products/af2028-60-60w-co2-laser-engraver-cutting-machine-with-20-x-28-working-area (Attempt 1/5)
2025-04-18 14:14:53 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/collections/mid-range-co2-laser-engravers/products/af2028-60-60w-co2-laser-engraver-cutting-machine-with-20-x-28-working-area
2025-04-18 14:14:54 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2899.0 using selector '.product__price'
2025-04-18 14:14:54 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c48d2e36-a190-4131-8704-6962fd029e48: 2899.99 -> 2899.0
2025-04-18 14:14:54 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4c1cda3e-d6c2-418a-963c-4d9beb34f41d: OMTech AF2440-100
2025-04-18 14:14:54 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4c1cda3e-d6c2-418a-963c-4d9beb34f41d
2025-04-18 14:14:54 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4c1cda3e-d6c2-418a-963c-4d9beb34f41d
2025-04-18 14:14:54 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech AF2440-100 (ID: 4c1cda3e-d6c2-418a-963c-4d9beb34f41d)
2025-04-18 14:14:54 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/100w-co2-laser-engraver-cutter-with-20-x-28-working-area (Attempt 1/5)
2025-04-18 14:14:54 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/100w-co2-laser-engraver-cutter-with-20-x-28-working-area
2025-04-18 14:14:54 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2899.0 using selector '.product__price'
2025-04-18 14:14:54 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 4c1cda3e-d6c2-418a-963c-4d9beb34f41d: 2899.99 -> 2899.0
2025-04-18 14:14:54 | INFO     | services.price_service:batch_update_machines:513 - Processing machine e653e08b-a4c3-44dc-86a9-2543f42c647d: Monport Reno45 Pro 45W Laser
2025-04-18 14:14:54 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine e653e08b-a4c3-44dc-86a9-2543f42c647d
2025-04-18 14:14:54 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: e653e08b-a4c3-44dc-86a9-2543f42c647d
2025-04-18 14:14:55 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport Reno45 Pro 45W Laser (ID: e653e08b-a4c3-44dc-86a9-2543f42c647d)
2025-04-18 14:14:55 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/monport-reno-45w-pro-desktop-co2-laser-engraver-cutter-16-x-12-with-brand-new-semi-autofocus?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:14:56 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/monport-reno-45w-pro-desktop-co2-laser-engraver-cutter-16-x-12-with-brand-new-semi-autofocus?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:14:56 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1299.99 using selector '.price'
2025-04-18 14:14:56 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for e653e08b-a4c3-44dc-86a9-2543f42c647d: 1299.99
2025-04-18 14:14:56 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 13b5ba00-cb9b-4fa9-bac5-5208743cd7fe: OMTech MF2028-100
2025-04-18 14:14:56 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 13b5ba00-cb9b-4fa9-bac5-5208743cd7fe
2025-04-18 14:14:56 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 13b5ba00-cb9b-4fa9-bac5-5208743cd7fe
2025-04-18 14:14:56 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech MF2028-100 (ID: 13b5ba00-cb9b-4fa9-bac5-5208743cd7fe)
2025-04-18 14:14:56 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/100w-co2-laser-engraver-cutter-with-20-x-28-working-area?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:14:57 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/100w-co2-laser-engraver-cutter-with-20-x-28-working-area?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:14:57 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2899.0 using selector '.product__price'
2025-04-18 14:14:57 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 13b5ba00-cb9b-4fa9-bac5-5208743cd7fe: 2899.99 -> 2899.0
2025-04-18 14:14:57 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 1dc5bc6d-25f0-4ae8-b727-1662149295b9: OMTech MOPA 20W Split 
2025-04-18 14:14:57 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 1dc5bc6d-25f0-4ae8-b727-1662149295b9
2025-04-18 14:14:57 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 1dc5bc6d-25f0-4ae8-b727-1662149295b9
2025-04-18 14:14:57 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech MOPA 20W Split  (ID: 1dc5bc6d-25f0-4ae8-b727-1662149295b9)
2025-04-18 14:14:57 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/mp6969-20-20w-mopa-fiber-laser-marking-engraving-machine-with-6-9-x-6-9-working-area?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:14:57 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/mp6969-20-20w-mopa-fiber-laser-marking-engraving-machine-with-6-9-x-6-9-working-area?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:14:57 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2699.0 using selector '.product__price'
2025-04-18 14:14:57 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 1dc5bc6d-25f0-4ae8-b727-1662149295b9: 2699.99 -> 2699.0
2025-04-18 14:14:57 | INFO     | services.price_service:batch_update_machines:513 - Processing machine bed60c08-18c7-4e8f-bcc6-8541dfa816a4: OMTech MOPA 60W
2025-04-18 14:14:57 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine bed60c08-18c7-4e8f-bcc6-8541dfa816a4
2025-04-18 14:14:57 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: bed60c08-18c7-4e8f-bcc6-8541dfa816a4
2025-04-18 14:14:58 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech MOPA 60W (ID: bed60c08-18c7-4e8f-bcc6-8541dfa816a4)
2025-04-18 14:14:58 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/mopa-60-60w-integrated-mopa-fiber-laser-marker-engraving-machine-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:14:58 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/mopa-60-60w-integrated-mopa-fiber-laser-marker-engraving-machine-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:14:58 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3999.0 using selector '.product__price'
2025-04-18 14:14:58 | INFO     | services.price_service:batch_update_machines:551 - Price changed for bed60c08-18c7-4e8f-bcc6-8541dfa816a4: 3999.99 -> 3999.0
2025-04-18 14:14:58 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 911787a4-c5c8-454d-9ebe-2a01f1df661e: OMTech MOPA 60W Split
2025-04-18 14:14:58 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 911787a4-c5c8-454d-9ebe-2a01f1df661e
2025-04-18 14:14:58 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 911787a4-c5c8-454d-9ebe-2a01f1df661e
2025-04-18 14:14:59 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech MOPA 60W Split (ID: 911787a4-c5c8-454d-9ebe-2a01f1df661e)
2025-04-18 14:14:59 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/mp6969-60-60w-mopa-fiber-laser-marking-engraving-machine-with-6-9-x-6-9-working-area?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:14:59 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/mp6969-60-60w-mopa-fiber-laser-marking-engraving-machine-with-6-9-x-6-9-working-area?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:14:59 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 5799.0 using selector '.product__price'
2025-04-18 14:14:59 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 911787a4-c5c8-454d-9ebe-2a01f1df661e: 5799.99 -> 5799.0
2025-04-18 14:14:59 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c611e4fd-ee69-4001-82ac-2c2af6c2ac3c: OMTech Polar+
2025-04-18 14:14:59 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c611e4fd-ee69-4001-82ac-2c2af6c2ac3c
2025-04-18 14:14:59 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c611e4fd-ee69-4001-82ac-2c2af6c2ac3c
2025-04-18 14:14:59 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Polar+ (ID: c611e4fd-ee69-4001-82ac-2c2af6c2ac3c)
2025-04-18 14:14:59 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/polar-55w-desktop-laser-cutter-engraver-with-rotary?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:00 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/polar-55w-desktop-laser-cutter-engraver-with-rotary?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:00 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2699.0 using selector '.product__price'
2025-04-18 14:15:00 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c611e4fd-ee69-4001-82ac-2c2af6c2ac3c: 2699.99 -> 2699.0
2025-04-18 14:15:00 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 76c809ba-c24b-4f0e-9916-6a52501ee9a0: OMTech Polar
2025-04-18 14:15:00 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 76c809ba-c24b-4f0e-9916-6a52501ee9a0
2025-04-18 14:15:00 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 76c809ba-c24b-4f0e-9916-6a52501ee9a0
2025-04-18 14:15:00 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Polar (ID: 76c809ba-c24b-4f0e-9916-6a52501ee9a0)
2025-04-18 14:15:00 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/polar-55w-desktop-laser-cutter-engraver-with-rotary (Attempt 1/5)
2025-04-18 14:15:01 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/polar-55w-desktop-laser-cutter-engraver-with-rotary
2025-04-18 14:15:01 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2699.0 using selector '.product__price'
2025-04-18 14:15:01 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 76c809ba-c24b-4f0e-9916-6a52501ee9a0: 2699.99 -> 2699.0
2025-04-18 14:15:01 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 8b8b7e18-ddc2-4e6d-bb0b-0539a6c46ada: OMTech K40+
2025-04-18 14:15:01 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8b8b7e18-ddc2-4e6d-bb0b-0539a6c46ada
2025-04-18 14:15:01 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8b8b7e18-ddc2-4e6d-bb0b-0539a6c46ada
2025-04-18 14:15:01 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech K40+ (ID: 8b8b7e18-ddc2-4e6d-bb0b-0539a6c46ada)
2025-04-18 14:15:01 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/40w-co2-laser-engraver-cutter-usb-032b-us (Attempt 1/5)
2025-04-18 14:15:02 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/40w-co2-laser-engraver-cutter-usb-032b-us
2025-04-18 14:15:02 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 659.0 using selector '.product__price'
2025-04-18 14:15:02 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 8b8b7e18-ddc2-4e6d-bb0b-0539a6c46ada: 659.99 -> 659.0
2025-04-18 14:15:02 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 88571dca-54da-43ac-8caf-ce224dcff02b: OMTech Galvo 50W Split
2025-04-18 14:15:02 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 88571dca-54da-43ac-8caf-ce224dcff02b
2025-04-18 14:15:02 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 88571dca-54da-43ac-8caf-ce224dcff02b
2025-04-18 14:15:02 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Galvo 50W Split (ID: 88571dca-54da-43ac-8caf-ce224dcff02b)
2025-04-18 14:15:02 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/50w-fmm-5rw2-us?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:03 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/50w-fmm-5rw2-us?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:03 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4299.0 using selector '.product__price'
2025-04-18 14:15:03 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 88571dca-54da-43ac-8caf-ce224dcff02b: 4299.99 -> 4299.0
2025-04-18 14:15:03 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c8be5bd7-e7ea-41a1-98be-8f19470a0add: OMTech Pro 3655
2025-04-18 14:15:03 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c8be5bd7-e7ea-41a1-98be-8f19470a0add
2025-04-18 14:15:03 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c8be5bd7-e7ea-41a1-98be-8f19470a0add
2025-04-18 14:15:03 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Pro 3655 (ID: c8be5bd7-e7ea-41a1-98be-8f19470a0add)
2025-04-18 14:15:03 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/omtech-pro3655-150w-hybrid-laser-machine-with-autofocus?sca_ref=2167975.eUaAiFuxut (Attempt 1/5)
2025-04-18 14:15:04 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/omtech-pro3655-150w-hybrid-laser-machine-with-autofocus?sca_ref=2167975.eUaAiFuxut
2025-04-18 14:15:04 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 13299.0 using selector '.product__price'
2025-04-18 14:15:04 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c8be5bd7-e7ea-41a1-98be-8f19470a0add: 13299.99 -> 13299.0
2025-04-18 14:15:04 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 307b6dbd-5b43-4ed9-b79a-89fde527ed99: OMTech Pronto 130W
2025-04-18 14:15:04 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 307b6dbd-5b43-4ed9-b79a-89fde527ed99
2025-04-18 14:15:04 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 307b6dbd-5b43-4ed9-b79a-89fde527ed99
2025-04-18 14:15:04 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Pronto 130W (ID: 307b6dbd-5b43-4ed9-b79a-89fde527ed99)
2025-04-18 14:15:04 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/pronto-60-130w-co2-laser-engraver-and-cutter-upgraded-version?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:04 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/pronto-60-130w-co2-laser-engraver-and-cutter-upgraded-version?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:05 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 6499.0 using selector '.product__price'
2025-04-18 14:15:05 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 307b6dbd-5b43-4ed9-b79a-89fde527ed99: 6499.99 -> 6499.0
2025-04-18 14:15:05 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c72332b2-96b1-472a-ab7d-ba2eb1190dc9: OMTech Pronto 40 80W
2025-04-18 14:15:05 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c72332b2-96b1-472a-ab7d-ba2eb1190dc9
2025-04-18 14:15:05 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c72332b2-96b1-472a-ab7d-ba2eb1190dc9
2025-04-18 14:15:05 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Pronto 40 80W (ID: c72332b2-96b1-472a-ab7d-ba2eb1190dc9)
2025-04-18 14:15:05 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/pronto-40-90w-co2-laser-engraver-and-cutter?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate (Attempt 1/5)
2025-04-18 14:15:05 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/pronto-40-90w-co2-laser-engraver-and-cutter?sca_ref=2167975.eUaAiFuxut&utm_campaign=brandon-cullum&utm_medium=kols&utm_source=affiliate
2025-04-18 14:15:05 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4299.0 using selector '.product__price'
2025-04-18 14:15:05 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c72332b2-96b1-472a-ab7d-ba2eb1190dc9: 4299.99 -> 4299.0
2025-04-18 14:15:05 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4b43a361-d4c3-4708-b64a-a8d2d71114da: OMTech Pronto 45 100W
2025-04-18 14:15:05 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4b43a361-d4c3-4708-b64a-a8d2d71114da
2025-04-18 14:15:05 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4b43a361-d4c3-4708-b64a-a8d2d71114da
2025-04-18 14:15:06 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Pronto 45 100W (ID: 4b43a361-d4c3-4708-b64a-a8d2d71114da)
2025-04-18 14:15:06 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/pronto-45-100w-co2-laser-engraver-and-cutter-upgraded-version?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:06 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/pronto-45-100w-co2-laser-engraver-and-cutter-upgraded-version?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:06 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4999.0 using selector '.product__price'
2025-04-18 14:15:06 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 4b43a361-d4c3-4708-b64a-a8d2d71114da: 4999.99 -> 4999.0
2025-04-18 14:15:06 | INFO     | services.price_service:batch_update_machines:513 - Processing machine bf342168-2b5e-435a-a1df-08099f6200bb: OMTech Pro 2440
2025-04-18 14:15:06 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine bf342168-2b5e-435a-a1df-08099f6200bb
2025-04-18 14:15:06 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: bf342168-2b5e-435a-a1df-08099f6200bb
2025-04-18 14:15:06 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Pro 2440 (ID: bf342168-2b5e-435a-a1df-08099f6200bb)
2025-04-18 14:15:06 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/omtech-pro-2440-80w-and-100w-co2-laser-engraver-cutting-machine-with-autofocus-and-built-in-water-chiller?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:07 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/omtech-pro-2440-80w-and-100w-co2-laser-engraver-cutting-machine-with-autofocus-and-built-in-water-chiller?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:07 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 6649.0 using selector '.product__price'
2025-04-18 14:15:07 | INFO     | services.price_service:batch_update_machines:551 - Price changed for bf342168-2b5e-435a-a1df-08099f6200bb: 6649.99 -> 6649.0
2025-04-18 14:15:07 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 5ec244fc-238b-4014-bc35-17c90449ea03: OneLaser Hydra 7
2025-04-18 14:15:07 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 5ec244fc-238b-4014-bc35-17c90449ea03
2025-04-18 14:15:07 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 5ec244fc-238b-4014-bc35-17c90449ea03
2025-04-18 14:15:07 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OneLaser Hydra 7 (ID: 5ec244fc-238b-4014-bc35-17c90449ea03)
2025-04-18 14:15:07 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.1laser.com/products/onelaser-hydra-7-cabinet-dual-laser-system-with-80-glass-tube-and-38w-rf-metal-tube (Attempt 1/5)
2025-04-18 14:15:08 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.1laser.com/products/onelaser-hydra-7-cabinet-dual-laser-system-with-80-glass-tube-and-38w-rf-metal-tube
2025-04-18 14:15:08 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2000.0 using selector '.price'
2025-04-18 14:15:08 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 5ec244fc-238b-4014-bc35-17c90449ea03: 4995 -> 2000.0
2025-04-18 14:15:08 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 95499f78-dac1-4d6e-95b1-fd7ea5a6de9a: OneLaser Hydra 16
2025-04-18 14:15:08 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 95499f78-dac1-4d6e-95b1-fd7ea5a6de9a
2025-04-18 14:15:08 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 95499f78-dac1-4d6e-95b1-fd7ea5a6de9a
2025-04-18 14:15:08 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OneLaser Hydra 16 (ID: 95499f78-dac1-4d6e-95b1-fd7ea5a6de9a)
2025-04-18 14:15:08 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.1laser.com/products/onelaser-hydra-16-cabinet-dual-laser-system-with150w-glass-tube-and-38w-rf-metal-tube (Attempt 1/5)
2025-04-18 14:15:08 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.1laser.com/products/onelaser-hydra-16-cabinet-dual-laser-system-with150w-glass-tube-and-38w-rf-metal-tube
2025-04-18 14:15:08 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3000.0 using selector '.price'
2025-04-18 14:15:08 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 95499f78-dac1-4d6e-95b1-fd7ea5a6de9a: 10995 -> 3000.0
2025-04-18 14:15:08 | INFO     | services.price_service:batch_update_machines:513 - Processing machine f5a8875a-3baa-41d1-a5d4-865185363c6d: Ortur LM3
2025-04-18 14:15:08 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine f5a8875a-3baa-41d1-a5d4-865185363c6d
2025-04-18 14:15:08 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: f5a8875a-3baa-41d1-a5d4-865185363c6d
2025-04-18 14:15:09 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Ortur LM3 (ID: f5a8875a-3baa-41d1-a5d4-865185363c6d)
2025-04-18 14:15:09 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://ortur.net/products/ortur-laser-master-3-engraver-cutter-machine (Attempt 1/5)
2025-04-18 14:15:10 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://ortur.net/products/ortur-laser-master-3-engraver-cutter-machine
2025-04-18 14:15:10 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 2349.99 using regex pattern
2025-04-18 14:15:10 | INFO     | services.price_service:batch_update_machines:551 - Price changed for f5a8875a-3baa-41d1-a5d4-865185363c6d: 999.99 -> 2349.99
2025-04-18 14:15:10 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c2c84331-166b-4174-abce-e75641fba757: TOOCAA L2 20W
2025-04-18 14:15:10 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c2c84331-166b-4174-abce-e75641fba757
2025-04-18 14:15:10 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c2c84331-166b-4174-abce-e75641fba757
2025-04-18 14:15:10 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: TOOCAA L2 20W (ID: c2c84331-166b-4174-abce-e75641fba757)
2025-04-18 14:15:10 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.toocaa.com/products/toocaa-l2-laser-engraver-cutter (Attempt 1/5)
2025-04-18 14:15:12 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.toocaa.com/products/toocaa-l2-laser-engraver-cutter
2025-04-18 14:15:12 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 2319.0 using regex pattern
2025-04-18 14:15:12 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c2c84331-166b-4174-abce-e75641fba757: 799.0 -> 2319.0
2025-04-18 14:15:12 | INFO     | services.price_service:batch_update_machines:513 - Processing machine bc4031f6-2442-48eb-b06a-c40829e5ef41: Thunder Aurora 8
2025-04-18 14:15:12 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine bc4031f6-2442-48eb-b06a-c40829e5ef41
2025-04-18 14:15:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: bc4031f6-2442-48eb-b06a-c40829e5ef41
2025-04-18 14:15:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Aurora 8 (ID: bc4031f6-2442-48eb-b06a-c40829e5ef41)
2025-04-18 14:15:12 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/aurora-8 (Attempt 1/5)
2025-04-18 14:15:12 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/aurora-8. Status code: 403
2025-04-18 14:15:12 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/aurora-8
2025-04-18 14:15:12 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for bc4031f6-2442-48eb-b06a-c40829e5ef41: Failed to fetch product page
2025-04-18 14:15:12 | INFO     | services.price_service:batch_update_machines:513 - Processing machine af105a48-7aee-4c6a-a16c-b375b602de15: Sculpfun S30 Ultra
2025-04-18 14:15:12 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine af105a48-7aee-4c6a-a16c-b375b602de15
2025-04-18 14:15:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: af105a48-7aee-4c6a-a16c-b375b602de15
2025-04-18 14:15:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Sculpfun S30 Ultra (ID: af105a48-7aee-4c6a-a16c-b375b602de15)
2025-04-18 14:15:12 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.amazon.com/SCULPFUN-S30-Ultra-33W-Engraving/dp/B0C3LZYL64?tag=brancull-20&crid=1XC8XVZTP8VR2&dib=eyJ2IjoiMSJ9.OoesIXoapMWXQNS3Z2umLuCOrsgAsjvxe6QRZbEszXvP0t9Pit7vdRyg20RGhCbbhnJS1hcICOxKlXYMPagMy2eT3F47vPYSAfUNSEmqtewQRs60OLSFwFRmbnWGsynv9NvEvX2xoSCwMhFtJaR5R-2OdKxTdCB97J_4zfGJkqcUFxNg69ABgv5nwuLUErDmFl0FZ_bWswk_uTE8CFzLp0yjPsM7827AJrSK2QGYjFU.Py0FNk93TuffPZ0QApdPqA0Ot6c7k2OVE9ipHiItMxE&dib_tag=se&keywords=sculpfun%20s30%20ultra&qid=1736807276&sprefix=sculpfun%20s30%20ult,aps,137&sr=8-3&th=1&linkId=b9e8e6c1c9cb3a318f74d8960850e7b7&ref_=as_li_ss_tl&geniuslink=true (Attempt 1/5)
2025-04-18 14:15:15 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.amazon.com/SCULPFUN-S30-Ultra-33W-Engraving/dp/B0C3LZYL64?tag=brancull-20&crid=1XC8XVZTP8VR2&dib=eyJ2IjoiMSJ9.OoesIXoapMWXQNS3Z2umLuCOrsgAsjvxe6QRZbEszXvP0t9Pit7vdRyg20RGhCbbhnJS1hcICOxKlXYMPagMy2eT3F47vPYSAfUNSEmqtewQRs60OLSFwFRmbnWGsynv9NvEvX2xoSCwMhFtJaR5R-2OdKxTdCB97J_4zfGJkqcUFxNg69ABgv5nwuLUErDmFl0FZ_bWswk_uTE8CFzLp0yjPsM7827AJrSK2QGYjFU.Py0FNk93TuffPZ0QApdPqA0Ot6c7k2OVE9ipHiItMxE&dib_tag=se&keywords=sculpfun%20s30%20ultra&qid=1736807276&sprefix=sculpfun%20s30%20ult,aps,137&sr=8-3&th=1&linkId=b9e8e6c1c9cb3a318f74d8960850e7b7&ref_=as_li_ss_tl&geniuslink=true
2025-04-18 14:15:15 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 5398.0 using regex pattern
2025-04-18 14:15:15 | INFO     | services.price_service:batch_update_machines:551 - Price changed for af105a48-7aee-4c6a-a16c-b375b602de15: 880 -> 5398.0
2025-04-18 14:15:15 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 44ebc645-893d-4f25-a25a-03e3079a2454: Mr Carve M1 Pro
2025-04-18 14:15:15 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 44ebc645-893d-4f25-a25a-03e3079a2454
2025-04-18 14:15:15 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 44ebc645-893d-4f25-a25a-03e3079a2454
2025-04-18 14:15:16 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Mr Carve M1 Pro (ID: 44ebc645-893d-4f25-a25a-03e3079a2454)
2025-04-18 14:15:16 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.amazon.com/MR-CARVE-M1-Portable-All-Metals-Industrial/dp/B0CB3MQF8N?&linkCode=sl1&tag=make-or-break-shop-20&linkId=557d3c57287622ccb4be49f2a53c1186&language=en_US&ref_=as_li_ss_tl (Attempt 1/5)
2025-04-18 14:15:18 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.amazon.com/MR-CARVE-M1-Portable-All-Metals-Industrial/dp/B0CB3MQF8N?&linkCode=sl1&tag=make-or-break-shop-20&linkId=557d3c57287622ccb4be49f2a53c1186&language=en_US&ref_=as_li_ss_tl
2025-04-18 14:15:18 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 4199.0 using regex pattern
2025-04-18 14:15:18 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 44ebc645-893d-4f25-a25a-03e3079a2454: 799.99 -> 4199.0
2025-04-18 14:15:18 | INFO     | services.price_service:batch_update_machines:513 - Processing machine a6abf51b-351c-4a1e-ac4c-62d83fbe0051: Thunder Bolt Pro 22
2025-04-18 14:15:18 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine a6abf51b-351c-4a1e-ac4c-62d83fbe0051
2025-04-18 14:15:18 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: a6abf51b-351c-4a1e-ac4c-62d83fbe0051
2025-04-18 14:15:18 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Bolt Pro 22 (ID: a6abf51b-351c-4a1e-ac4c-62d83fbe0051)
2025-04-18 14:15:18 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/bolt-pro-22/ (Attempt 1/5)
2025-04-18 14:15:19 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/bolt-pro-22/. Status code: 403
2025-04-18 14:15:19 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/bolt-pro-22/
2025-04-18 14:15:19 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for a6abf51b-351c-4a1e-ac4c-62d83fbe0051: Failed to fetch product page
2025-04-18 14:15:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine fe10192a-c6f1-4263-ad74-16c87d67d5f3: Thunder Laser Plus 51
2025-04-18 14:15:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine fe10192a-c6f1-4263-ad74-16c87d67d5f3
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fe10192a-c6f1-4263-ad74-16c87d67d5f3
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Laser Plus 51 (ID: fe10192a-c6f1-4263-ad74-16c87d67d5f3)
2025-04-18 14:15:19 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/nova-plus-51/ (Attempt 1/5)
2025-04-18 14:15:19 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/nova-plus-51/. Status code: 403
2025-04-18 14:15:19 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/nova-plus-51/
2025-04-18 14:15:19 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for fe10192a-c6f1-4263-ad74-16c87d67d5f3: Failed to fetch product page
2025-04-18 14:15:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 81a38d6c-1813-4d4a-8396-29ee36d5918e: Thunder Nova 24
2025-04-18 14:15:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 81a38d6c-1813-4d4a-8396-29ee36d5918e
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 81a38d6c-1813-4d4a-8396-29ee36d5918e
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Nova 24 (ID: 81a38d6c-1813-4d4a-8396-29ee36d5918e)
2025-04-18 14:15:19 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/nova-24/ (Attempt 1/5)
2025-04-18 14:15:19 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/nova-24/. Status code: 403
2025-04-18 14:15:19 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/nova-24/
2025-04-18 14:15:19 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 81a38d6c-1813-4d4a-8396-29ee36d5918e: Failed to fetch product page
2025-04-18 14:15:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 0993bbcb-b705-4593-9565-4967121d1d79: Thunder Nova 51
2025-04-18 14:15:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 0993bbcb-b705-4593-9565-4967121d1d79
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 0993bbcb-b705-4593-9565-4967121d1d79
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Nova 51 (ID: 0993bbcb-b705-4593-9565-4967121d1d79)
2025-04-18 14:15:19 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/nova-51/ (Attempt 1/5)
2025-04-18 14:15:19 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/nova-51/. Status code: 403
2025-04-18 14:15:19 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/nova-51/
2025-04-18 14:15:19 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 0993bbcb-b705-4593-9565-4967121d1d79: Failed to fetch product page
2025-04-18 14:15:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b6975eb0-1cc5-4ce6-8157-6f2e55e6db2f: Thunder Nova 63
2025-04-18 14:15:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b6975eb0-1cc5-4ce6-8157-6f2e55e6db2f
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b6975eb0-1cc5-4ce6-8157-6f2e55e6db2f
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Nova 63 (ID: b6975eb0-1cc5-4ce6-8157-6f2e55e6db2f)
2025-04-18 14:15:19 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/nova-63/ (Attempt 1/5)
2025-04-18 14:15:19 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/nova-63/. Status code: 403
2025-04-18 14:15:19 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/nova-63/
2025-04-18 14:15:19 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for b6975eb0-1cc5-4ce6-8157-6f2e55e6db2f: Failed to fetch product page
2025-04-18 14:15:19 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 9ba448a6-9027-4851-84b7-c69890de5b4b: Thunder Nova Plus 24
2025-04-18 14:15:19 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 9ba448a6-9027-4851-84b7-c69890de5b4b
2025-04-18 14:15:19 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 9ba448a6-9027-4851-84b7-c69890de5b4b
2025-04-18 14:15:20 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Nova Plus 24 (ID: 9ba448a6-9027-4851-84b7-c69890de5b4b)
2025-04-18 14:15:20 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/nova-plus-24/ (Attempt 1/5)
2025-04-18 14:15:20 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/nova-plus-24/. Status code: 403
2025-04-18 14:15:20 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/nova-plus-24/
2025-04-18 14:15:20 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 9ba448a6-9027-4851-84b7-c69890de5b4b: Failed to fetch product page
2025-04-18 14:15:20 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4860c090-f592-45c3-a557-39a741325f4f: Thunder Nova Plus 35
2025-04-18 14:15:20 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4860c090-f592-45c3-a557-39a741325f4f
2025-04-18 14:15:20 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4860c090-f592-45c3-a557-39a741325f4f
2025-04-18 14:15:20 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Nova Plus 35 (ID: 4860c090-f592-45c3-a557-39a741325f4f)
2025-04-18 14:15:20 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/nova-plus-35/ (Attempt 1/5)
2025-04-18 14:15:20 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/nova-plus-35/. Status code: 403
2025-04-18 14:15:20 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/nova-plus-35/
2025-04-18 14:15:20 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 4860c090-f592-45c3-a557-39a741325f4f: Failed to fetch product page
2025-04-18 14:15:20 | INFO     | services.price_service:batch_update_machines:513 - Processing machine d9fb020a-1ec2-4661-98e3-aa51f6882b2f: Thunder Bolt Plus
2025-04-18 14:15:20 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine d9fb020a-1ec2-4661-98e3-aa51f6882b2f
2025-04-18 14:15:20 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d9fb020a-1ec2-4661-98e3-aa51f6882b2f
2025-04-18 14:15:20 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Bolt Plus (ID: d9fb020a-1ec2-4661-98e3-aa51f6882b2f)
2025-04-18 14:15:20 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/bolt-plus/ (Attempt 1/5)
2025-04-18 14:15:20 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/bolt-plus/. Status code: 403
2025-04-18 14:15:20 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/bolt-plus/
2025-04-18 14:15:20 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for d9fb020a-1ec2-4661-98e3-aa51f6882b2f: Failed to fetch product page
2025-04-18 14:15:20 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 62961076-62c0-40c6-a57b-78010a186945: iKier K1 Pro Max 70W
2025-04-18 14:15:20 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 62961076-62c0-40c6-a57b-78010a186945
2025-04-18 14:15:20 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 62961076-62c0-40c6-a57b-78010a186945
2025-04-18 14:15:20 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: iKier K1 Pro Max 70W (ID: 62961076-62c0-40c6-a57b-78010a186945)
2025-04-18 14:15:20 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/ikier-series/products/ikier-k1-pro-max-70w-power-switching-diode-laser-cutter (Attempt 1/5)
2025-04-18 14:15:21 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/ikier-series/products/ikier-k1-pro-max-70w-power-switching-diode-laser-cutter
2025-04-18 14:15:21 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 179.0 using selector '[data-price]'
2025-04-18 14:15:21 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 62961076-62c0-40c6-a57b-78010a186945: 1859.0 -> 179.0
2025-04-18 14:15:21 | INFO     | services.price_service:batch_update_machines:513 - Processing machine e0d6a69c-69d2-4348-9115-e08437109c6d: WeCreat Vista
2025-04-18 14:15:21 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine e0d6a69c-69d2-4348-9115-e08437109c6d
2025-04-18 14:15:21 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: e0d6a69c-69d2-4348-9115-e08437109c6d
2025-04-18 14:15:21 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: WeCreat Vista (ID: e0d6a69c-69d2-4348-9115-e08437109c6d)
2025-04-18 14:15:21 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://wecreat.com/products/wecreat-vista-the-better-crafter-laser (Attempt 1/5)
2025-04-18 14:15:22 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://wecreat.com/products/wecreat-vista-the-better-crafter-laser
2025-04-18 14:15:22 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 699.99 using selector '.price'
2025-04-18 14:15:22 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for e0d6a69c-69d2-4348-9115-e08437109c6d: 699.99
2025-04-18 14:15:22 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 5d6cb63a-7e4a-4d4d-84f4-47e24d42910e: iKier K1 Pro 20W Fiber
2025-04-18 14:15:22 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 5d6cb63a-7e4a-4d4d-84f4-47e24d42910e
2025-04-18 14:15:22 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 5d6cb63a-7e4a-4d4d-84f4-47e24d42910e
2025-04-18 14:15:23 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: iKier K1 Pro 20W Fiber (ID: 5d6cb63a-7e4a-4d4d-84f4-47e24d42910e)
2025-04-18 14:15:23 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/ikier-series/products/ikier-k1-pro-1064nm-20w-fiber-laser-engraver-for-metal (Attempt 1/5)
2025-04-18 14:15:23 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/ikier-series/products/ikier-k1-pro-1064nm-20w-fiber-laser-engraver-for-metal
2025-04-18 14:15:23 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 137.0 using selector '[data-price]'
2025-04-18 14:15:23 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 5d6cb63a-7e4a-4d4d-84f4-47e24d42910e: 1399.0 -> 137.0
2025-04-18 14:15:23 | INFO     | services.price_service:batch_update_machines:513 - Processing machine a4c0fd86-5122-41a8-ae4c-b4db6cb4e92a: iKier K1 Pro Max 48W
2025-04-18 14:15:23 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine a4c0fd86-5122-41a8-ae4c-b4db6cb4e92a
2025-04-18 14:15:23 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: a4c0fd86-5122-41a8-ae4c-b4db6cb4e92a
2025-04-18 14:15:23 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: iKier K1 Pro Max 48W (ID: a4c0fd86-5122-41a8-ae4c-b4db6cb4e92a)
2025-04-18 14:15:23 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/ikier-series/products/ikier-k1-pro-max-48w-24w-power-switching-laser-engraving-and-cutting-machine (Attempt 1/5)
2025-04-18 14:15:23 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/ikier-series/products/ikier-k1-pro-max-48w-24w-power-switching-laser-engraving-and-cutting-machine
2025-04-18 14:15:23 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 999.0 using selector '[data-price]'
2025-04-18 14:15:23 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for a4c0fd86-5122-41a8-ae4c-b4db6cb4e92a: 999
2025-04-18 14:15:23 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 0f5f7679-e975-4286-b655-9799e24931b9: xTool S1
2025-04-18 14:15:23 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 0f5f7679-e975-4286-b655-9799e24931b9
2025-04-18 14:15:23 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 0f5f7679-e975-4286-b655-9799e24931b9
2025-04-18 14:15:24 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: xTool S1 (ID: 0f5f7679-e975-4286-b655-9799e24931b9)
2025-04-18 14:15:24 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.xtool.com/products/xtool-s1-laser-cutter (Attempt 1/5)
2025-04-18 14:15:25 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.xtool.com/products/xtool-s1-laser-cutter
2025-04-18 14:15:25 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 999.0 using selector '.price'
2025-04-18 14:15:25 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 0f5f7679-e975-4286-b655-9799e24931b9: 999.0
2025-04-18 14:15:25 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 265d2255-eb1b-4fa1-9a32-6f2bc2f0a4d8: xTool P2
2025-04-18 14:15:25 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 265d2255-eb1b-4fa1-9a32-6f2bc2f0a4d8
2025-04-18 14:15:25 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 265d2255-eb1b-4fa1-9a32-6f2bc2f0a4d8
2025-04-18 14:15:25 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: xTool P2 (ID: 265d2255-eb1b-4fa1-9a32-6f2bc2f0a4d8)
2025-04-18 14:15:25 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.xtool.com/products/xtool-p2-55w-co2-laser-cutter?variant=45865569452271 (Attempt 1/5)
2025-04-18 14:15:26 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.xtool.com/products/xtool-p2-55w-co2-laser-cutter?variant=45865569452271
2025-04-18 14:15:26 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3999.0 using selector '.price'
2025-04-18 14:15:26 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 265d2255-eb1b-4fa1-9a32-6f2bc2f0a4d8: 3999.0
2025-04-18 14:15:26 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 2503760f-cff8-435f-9cf4-9b7094d055c8: Atomstack M4 Pro
2025-04-18 14:15:26 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 2503760f-cff8-435f-9cf4-9b7094d055c8
2025-04-18 14:15:26 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 2503760f-cff8-435f-9cf4-9b7094d055c8
2025-04-18 14:15:26 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Atomstack M4 Pro (ID: 2503760f-cff8-435f-9cf4-9b7094d055c8)
2025-04-18 14:15:26 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-pro?variant=47067182989562 (Attempt 1/5)
2025-04-18 14:15:27 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-pro?variant=47067182989562
2025-04-18 14:15:27 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 300.99 using selector '[data-product-price]'
2025-04-18 14:15:27 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 2503760f-cff8-435f-9cf4-9b7094d055c8: 1599.0 -> 300.99
2025-04-18 14:15:27 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b07a6e54-26be-4e42-ab35-275dbf7afd85: Ortur H20
2025-04-18 14:15:27 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b07a6e54-26be-4e42-ab35-275dbf7afd85
2025-04-18 14:15:27 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b07a6e54-26be-4e42-ab35-275dbf7afd85
2025-04-18 14:15:27 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Ortur H20 (ID: b07a6e54-26be-4e42-ab35-275dbf7afd85)
2025-04-18 14:15:27 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://ortur.net/products/ortur-h20-laser-engraver-cutter-machine (Attempt 1/5)
2025-04-18 14:15:28 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://ortur.net/products/ortur-h20-laser-engraver-cutter-machine
2025-04-18 14:15:28 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 2718.0 using regex pattern
2025-04-18 14:15:28 | INFO     | services.price_service:batch_update_machines:551 - Price changed for b07a6e54-26be-4e42-ab35-275dbf7afd85: 1199.0 -> 2718.0
2025-04-18 14:15:28 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 275e4234-8bd2-4c96-90e3-b04c27949520: Mr Carve M4
2025-04-18 14:15:28 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 275e4234-8bd2-4c96-90e3-b04c27949520
2025-04-18 14:15:28 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 275e4234-8bd2-4c96-90e3-b04c27949520
2025-04-18 14:15:28 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Mr Carve M4 (ID: 275e4234-8bd2-4c96-90e3-b04c27949520)
2025-04-18 14:15:28 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://mr-carve.com/products/mr-carve-m4-dual-laser-fiber-marking-machine-all-material-engraver (Attempt 1/5)
2025-04-18 14:15:29 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://mr-carve.com/products/mr-carve-m4-dual-laser-fiber-marking-machine-all-material-engraver
2025-04-18 14:15:29 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1349.0 using selector '.price'
2025-04-18 14:15:29 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 275e4234-8bd2-4c96-90e3-b04c27949520: 1349.0
2025-04-18 14:15:29 | INFO     | services.price_service:batch_update_machines:513 - Processing machine ae3a0960-6da6-4d0f-ba07-6a9dc03f4195: Flux Beamo
2025-04-18 14:15:29 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine ae3a0960-6da6-4d0f-ba07-6a9dc03f4195
2025-04-18 14:15:29 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ae3a0960-6da6-4d0f-ba07-6a9dc03f4195
2025-04-18 14:15:29 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Flux Beamo (ID: ae3a0960-6da6-4d0f-ba07-6a9dc03f4195)
2025-04-18 14:15:29 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://shop.flux3dp.com/products/beamo (Attempt 1/5)
2025-04-18 14:15:30 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://shop.flux3dp.com/products/beamo
2025-04-18 14:15:30 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1995.0 using selector '.price'
2025-04-18 14:15:30 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for ae3a0960-6da6-4d0f-ba07-6a9dc03f4195: 1995
2025-04-18 14:15:30 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 011044ee-ab5e-448d-9787-d58948dec748: Rendyr Optic
2025-04-18 14:15:30 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 011044ee-ab5e-448d-9787-d58948dec748
2025-04-18 14:15:30 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 011044ee-ab5e-448d-9787-d58948dec748
2025-04-18 14:15:30 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Rendyr Optic (ID: 011044ee-ab5e-448d-9787-d58948dec748)
2025-04-18 14:15:30 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://rendyr.com/products/optic-the-portable-laser-cutter (Attempt 1/5)
2025-04-18 14:15:31 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://rendyr.com/products/optic-the-portable-laser-cutter
2025-04-18 14:15:31 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2495.0 using selector '.product__price'
2025-04-18 14:15:31 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 011044ee-ab5e-448d-9787-d58948dec748: 2495
2025-04-18 14:15:31 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 12e84cde-ea66-414f-82d3-8a289fd3cd46: Thunder Aurora Lite
2025-04-18 14:15:31 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 12e84cde-ea66-414f-82d3-8a289fd3cd46
2025-04-18 14:15:31 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 12e84cde-ea66-414f-82d3-8a289fd3cd46
2025-04-18 14:15:31 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Aurora Lite (ID: 12e84cde-ea66-414f-82d3-8a289fd3cd46)
2025-04-18 14:15:31 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/aurora-lite/ (Attempt 1/5)
2025-04-18 14:15:31 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/aurora-lite/. Status code: 403
2025-04-18 14:15:31 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/aurora-lite/
2025-04-18 14:15:31 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 12e84cde-ea66-414f-82d3-8a289fd3cd46: Failed to fetch product page
2025-04-18 14:15:31 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 774f6e0c-67f6-4ba4-a5a6-b451db0779e2: Flux Beambox II
2025-04-18 14:15:31 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 774f6e0c-67f6-4ba4-a5a6-b451db0779e2
2025-04-18 14:15:31 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 774f6e0c-67f6-4ba4-a5a6-b451db0779e2
2025-04-18 14:15:31 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Flux Beambox II (ID: 774f6e0c-67f6-4ba4-a5a6-b451db0779e2)
2025-04-18 14:15:31 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://shop.flux3dp.com/products/beambox-ii (Attempt 1/5)
2025-04-18 14:15:31 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://shop.flux3dp.com/products/beambox-ii
2025-04-18 14:15:31 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 300.0 using selector '.price'
2025-04-18 14:15:31 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 774f6e0c-67f6-4ba4-a5a6-b451db0779e2: 2990 -> 300.0
2025-04-18 14:15:31 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 8054eeb8-504f-4791-9f48-a99fe0669664: Acmer P3
2025-04-18 14:15:31 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 14:15:31 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 14:15:32 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 14:15:32 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver (Attempt 1/5)
2025-04-18 14:15:33 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 14:15:33 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 1999.0 using regex pattern
2025-04-18 14:15:33 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 8054eeb8-504f-4791-9f48-a99fe0669664: 1199.0 -> 1999.0
2025-04-18 14:15:33 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c6ca468e-50dd-42d4-aa52-1c85a78c72e2: EM Smart Dual Desktop
2025-04-18 14:15:33 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c6ca468e-50dd-42d4-aa52-1c85a78c72e2
2025-04-18 14:15:33 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c6ca468e-50dd-42d4-aa52-1c85a78c72e2
2025-04-18 14:15:33 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EM Smart Dual Desktop (ID: c6ca468e-50dd-42d4-aa52-1c85a78c72e2)
2025-04-18 14:15:33 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://em-smart.com/products/em-smart-dual-laser-engraver-final-payment (Attempt 1/5)
2025-04-18 14:15:34 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://em-smart.com/products/em-smart-dual-laser-engraver-final-payment
2025-04-18 14:15:34 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3499.0 using selector '.price'
2025-04-18 14:15:34 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for c6ca468e-50dd-42d4-aa52-1c85a78c72e2: 3499.0
2025-04-18 14:15:34 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4a59d933-86b3-474e-a05c-2445653455ac: OneLaser Hydra 9
2025-04-18 14:15:34 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4a59d933-86b3-474e-a05c-2445653455ac
2025-04-18 14:15:34 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4a59d933-86b3-474e-a05c-2445653455ac
2025-04-18 14:15:34 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OneLaser Hydra 9 (ID: 4a59d933-86b3-474e-a05c-2445653455ac)
2025-04-18 14:15:34 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.1laser.com/products/onelaser-hydra-9-laser-engraving-machine (Attempt 1/5)
2025-04-18 14:15:35 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.1laser.com/products/onelaser-hydra-9-laser-engraving-machine
2025-04-18 14:15:35 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2000.0 using selector '.price'
2025-04-18 14:15:35 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 4a59d933-86b3-474e-a05c-2445653455ac: 6995 -> 2000.0
2025-04-18 14:15:35 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 0bf9db37-3c5c-4539-8103-95ce1b4fdc8c: Snapmaker Ray 40
2025-04-18 14:15:35 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 0bf9db37-3c5c-4539-8103-95ce1b4fdc8c
2025-04-18 14:15:35 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 0bf9db37-3c5c-4539-8103-95ce1b4fdc8c
2025-04-18 14:15:35 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Snapmaker Ray 40 (ID: 0bf9db37-3c5c-4539-8103-95ce1b4fdc8c)
2025-04-18 14:15:35 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://us.snapmaker.com/products/snapmaker-ray-20w-40w-laser-engraver-and-cutter-with-air-assist?variant=44816482140347&irclickid=30iWUixpGxycTYFRwTxJUy5eUksU3IQuDTOfUM0&irgwc=1 (Attempt 1/5)
2025-04-18 14:15:36 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://us.snapmaker.com/products/snapmaker-ray-20w-40w-laser-engraver-and-cutter-with-air-assist?variant=44816482140347&irclickid=30iWUixpGxycTYFRwTxJUy5eUksU3IQuDTOfUM0&irgwc=1
2025-04-18 14:15:36 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2199.0 using selector '.price'
2025-04-18 14:15:36 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 0bf9db37-3c5c-4539-8103-95ce1b4fdc8c: 2199.0
2025-04-18 14:15:36 | INFO     | services.price_service:batch_update_machines:513 - Processing machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e: Atomstack M4
2025-04-18 14:15:36 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-18 14:15:36 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e
2025-04-18 14:15:36 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Atomstack M4 (ID: d5d84154-0b5a-47a3-ab58-e6c0d87fc69e)
2025-04-18 14:15:36 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine (Attempt 1/5)
2025-04-18 14:15:36 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/m4-infrared-laser/products/atomstack-m4-fiber-laser-marking-machine
2025-04-18 14:15:36 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 280.0 using selector '[data-product-price]'
2025-04-18 14:15:36 | INFO     | services.price_service:batch_update_machines:551 - Price changed for d5d84154-0b5a-47a3-ab58-e6c0d87fc69e: 1219.0 -> 280.0
2025-04-18 14:15:36 | INFO     | services.price_service:batch_update_machines:513 - Processing machine d188bce0-e1a4-4fe0-847a-b8bd2c6c7f44: Creality Falcon2 Pro
2025-04-18 14:15:36 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine d188bce0-e1a4-4fe0-847a-b8bd2c6c7f44
2025-04-18 14:15:36 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d188bce0-e1a4-4fe0-847a-b8bd2c6c7f44
2025-04-18 14:15:36 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Creality Falcon2 Pro (ID: d188bce0-e1a4-4fe0-847a-b8bd2c6c7f44)
2025-04-18 14:15:36 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.amazon.com/dp/B0CTBVX57K?tag=brancull-20&th=1&psc=1&geniuslink=true (Attempt 1/5)
2025-04-18 14:15:37 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.amazon.com/dp/B0CTBVX57K?tag=brancull-20&th=1&psc=1&geniuslink=true. Status code: 404
2025-04-18 14:15:37 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.amazon.com/dp/B0CTBVX57K?tag=brancull-20&th=1&psc=1&geniuslink=true
2025-04-18 14:15:37 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for d188bce0-e1a4-4fe0-847a-b8bd2c6c7f44: Failed to fetch product page
2025-04-18 14:15:37 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 41f4573f-e998-4f7b-a899-d0ecfcc7fb90: ComMarker Titan 1
2025-04-18 14:15:37 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 41f4573f-e998-4f7b-a899-d0ecfcc7fb90
2025-04-18 14:15:37 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 41f4573f-e998-4f7b-a899-d0ecfcc7fb90
2025-04-18 14:15:37 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker Titan 1 (ID: 41f4573f-e998-4f7b-a899-d0ecfcc7fb90)
2025-04-18 14:15:37 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/commarker-titan-jpt-mopa-fiber-laser-engraver (Attempt 1/5)
2025-04-18 14:15:38 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/commarker-titan-jpt-mopa-fiber-laser-engraver
2025-04-18 14:15:38 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 96.0 using selector '.price'
2025-04-18 14:15:38 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 41f4573f-e998-4f7b-a899-d0ecfcc7fb90: 384.0 -> 96.0
2025-04-18 14:15:38 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 32f53f00-446f-4ea1-b638-ce4ab9d0b49b: ComMarker Omni 1 UV laser
2025-04-18 14:15:38 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 32f53f00-446f-4ea1-b638-ce4ab9d0b49b
2025-04-18 14:15:38 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 32f53f00-446f-4ea1-b638-ce4ab9d0b49b
2025-04-18 14:15:39 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker Omni 1 UV laser (ID: 32f53f00-446f-4ea1-b638-ce4ab9d0b49b)
2025-04-18 14:15:39 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://commarker.com/product/commarker-omni1-laser-engraver (Attempt 1/5)
2025-04-18 14:15:40 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://commarker.com/product/commarker-omni1-laser-engraver
2025-04-18 14:15:40 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 8.0 using selector '.price'
2025-04-18 14:15:40 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 32f53f00-446f-4ea1-b638-ce4ab9d0b49b: 3999 -> 8.0
2025-04-18 14:15:40 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 9e3f3869-c7bf-468f-b981-92efaf91da79: Thunder Bolt
2025-04-18 14:15:40 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 9e3f3869-c7bf-468f-b981-92efaf91da79
2025-04-18 14:15:40 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 9e3f3869-c7bf-468f-b981-92efaf91da79
2025-04-18 14:15:40 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Bolt (ID: 9e3f3869-c7bf-468f-b981-92efaf91da79)
2025-04-18 14:15:40 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/bolt/ (Attempt 1/5)
2025-04-18 14:15:40 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/bolt/. Status code: 403
2025-04-18 14:15:40 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/bolt/
2025-04-18 14:15:40 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 9e3f3869-c7bf-468f-b981-92efaf91da79: Failed to fetch product page
2025-04-18 14:15:40 | INFO     | services.price_service:batch_update_machines:513 - Processing machine fa68aaa3-8c8f-44ff-b67f-5ec2f7822499: Aeon MIRA 9 Pro S
2025-04-18 14:15:40 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine fa68aaa3-8c8f-44ff-b67f-5ec2f7822499
2025-04-18 14:15:40 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fa68aaa3-8c8f-44ff-b67f-5ec2f7822499
2025-04-18 14:15:40 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon MIRA 9 Pro S (ID: fa68aaa3-8c8f-44ff-b67f-5ec2f7822499)
2025-04-18 14:15:40 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/mira-s (Attempt 1/5)
2025-04-18 14:15:41 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/mira-s
2025-04-18 14:15:41 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 699.0 using selector '.price'
2025-04-18 14:15:41 | INFO     | services.price_service:batch_update_machines:551 - Price changed for fa68aaa3-8c8f-44ff-b67f-5ec2f7822499: 6995.0 -> 699.0
2025-04-18 14:15:41 | INFO     | services.price_service:batch_update_machines:513 - Processing machine b0e22cea-c826-4707-8643-e42ef6c3b90a: Cloudray MP 60 LiteMarker Pro
2025-04-18 14:15:41 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine b0e22cea-c826-4707-8643-e42ef6c3b90a
2025-04-18 14:15:41 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: b0e22cea-c826-4707-8643-e42ef6c3b90a
2025-04-18 14:15:41 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Cloudray MP 60 LiteMarker Pro (ID: b0e22cea-c826-4707-8643-e42ef6c3b90a)
2025-04-18 14:15:41 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/mp-60-litemarker-60w-split-laser-engraver-fiber-marking-machine-with-11-8-x-11-8-working-area (Attempt 1/5)
2025-04-18 14:15:41 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.cloudraylaser.com/collections/cloudray-engraver-machine/products/mp-60-litemarker-60w-split-laser-engraver-fiber-marking-machine-with-11-8-x-11-8-working-area
2025-04-18 14:15:42 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 599.0 using selector '[data-price]'
2025-04-18 14:15:42 | INFO     | services.price_service:batch_update_machines:551 - Price changed for b0e22cea-c826-4707-8643-e42ef6c3b90a: 5999 -> 599.0
2025-04-18 14:15:42 | INFO     | services.price_service:batch_update_machines:513 - Processing machine a4491187-412c-474d-85b3-8d298616f688: EM Smart One
2025-04-18 14:15:42 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine a4491187-412c-474d-85b3-8d298616f688
2025-04-18 14:15:42 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: a4491187-412c-474d-85b3-8d298616f688
2025-04-18 14:15:42 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EM Smart One (ID: a4491187-412c-474d-85b3-8d298616f688)
2025-04-18 14:15:42 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://em-smart.com/collections/nova-one/products/em-smart-nova-1-1r-20w-fiber-laser-engraving-marking-machine-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01 (Attempt 1/5)
2025-04-18 14:15:43 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://em-smart.com/collections/nova-one/products/em-smart-nova-1-1r-20w-fiber-laser-engraving-marking-machine-with-rotary?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01
2025-04-18 14:15:43 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1699.0 using selector '.price'
2025-04-18 14:15:43 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for a4491187-412c-474d-85b3-8d298616f688: 1699.0
2025-04-18 14:15:43 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 5b54e7e0-dbb7-435f-bfa3-da675f2f3642: EM Smart MOPA
2025-04-18 14:15:43 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 5b54e7e0-dbb7-435f-bfa3-da675f2f3642
2025-04-18 14:15:43 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 5b54e7e0-dbb7-435f-bfa3-da675f2f3642
2025-04-18 14:15:43 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EM Smart MOPA (ID: 5b54e7e0-dbb7-435f-bfa3-da675f2f3642)
2025-04-18 14:15:43 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://em-smart.com/products/em-smart-laser-em-smart-mp20?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01 (Attempt 1/5)
2025-04-18 14:15:43 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://em-smart.com/products/em-smart-laser-em-smart-mp20?utm_source=ytb_brandon&utm_medium=referral&utm_campaign=brandon_em01
2025-04-18 14:15:43 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4699.0 using selector '.price'
2025-04-18 14:15:43 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 5b54e7e0-dbb7-435f-bfa3-da675f2f3642: 4699.0
2025-04-18 14:15:43 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 69c389c5-5e86-4299-935b-4ed0296abe59: Mr Carve S4-20W
2025-04-18 14:15:43 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 69c389c5-5e86-4299-935b-4ed0296abe59
2025-04-18 14:15:43 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 69c389c5-5e86-4299-935b-4ed0296abe59
2025-04-18 14:15:43 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Mr Carve S4-20W (ID: 69c389c5-5e86-4299-935b-4ed0296abe59)
2025-04-18 14:15:43 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.amazon.com/Mr-Carve-Plastics-engraver-Lightburn-compatibility/dp/B0DK599YHR?mcid=3a68e176c1623b9a885ed634cc7f7ce3&hvadid=717639004286&hvpos=&hvnetw=g&hvrand=9751160372433359808&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=1015253&hvtargid=pla-2379966064000&psc=1&linkCode=sl1&tag=make-or-break-shop-20&linkId=b217d1435b9c4140c7de70bac97e4f41&language=en_US&ref_=as_li_ss_tl (Attempt 1/5)
2025-04-18 14:15:46 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.amazon.com/Mr-Carve-Plastics-engraver-Lightburn-compatibility/dp/B0DK599YHR?mcid=3a68e176c1623b9a885ed634cc7f7ce3&hvadid=717639004286&hvpos=&hvnetw=g&hvrand=9751160372433359808&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=1015253&hvtargid=pla-2379966064000&psc=1&linkCode=sl1&tag=make-or-break-shop-20&linkId=b217d1435b9c4140c7de70bac97e4f41&language=en_US&ref_=as_li_ss_tl
2025-04-18 14:15:46 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 6999.0 using regex pattern
2025-04-18 14:15:46 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 69c389c5-5e86-4299-935b-4ed0296abe59: 1399 -> 6999.0
2025-04-18 14:15:46 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 24eecfc8-e606-497f-a948-7f2815e67820: Gweike Cloud 50W Pro
2025-04-18 14:15:46 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 24eecfc8-e606-497f-a948-7f2815e67820
2025-04-18 14:15:46 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 24eecfc8-e606-497f-a948-7f2815e67820
2025-04-18 14:15:46 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike Cloud 50W Pro (ID: 24eecfc8-e606-497f-a948-7f2815e67820)
2025-04-18 14:15:46 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/nox?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:15:47 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/nox?ref=NMV3sU0i
2025-04-18 14:15:47 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1939.0 using selector '.price'
2025-04-18 14:15:47 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 24eecfc8-e606-497f-a948-7f2815e67820: 1939
2025-04-18 14:15:47 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 16b18bb6-7440-4fba-9302-a1c8afd90bc4: Gweike Cloud 55W Pro
2025-04-18 14:15:47 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 16b18bb6-7440-4fba-9302-a1c8afd90bc4
2025-04-18 14:15:47 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 16b18bb6-7440-4fba-9302-a1c8afd90bc4
2025-04-18 14:15:47 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Gweike Cloud 55W Pro (ID: 16b18bb6-7440-4fba-9302-a1c8afd90bc4)
2025-04-18 14:15:47 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.gweikecloud.com/products/gweike-cloud-55w-co2-laser-cutter-engraver-with-rotary?ref=NMV3sU0i (Attempt 1/5)
2025-04-18 14:15:47 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.gweikecloud.com/products/gweike-cloud-55w-co2-laser-cutter-engraver-with-rotary?ref=NMV3sU0i
2025-04-18 14:15:47 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2139.0 using selector '.price'
2025-04-18 14:15:47 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 16b18bb6-7440-4fba-9302-a1c8afd90bc4: 2139
2025-04-18 14:15:47 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 2d679131-1151-4d52-a892-63ff85823eb2: Laguna Smartshop Laser EX-C
2025-04-18 14:15:47 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 2d679131-1151-4d52-a892-63ff85823eb2
2025-04-18 14:15:47 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 2d679131-1151-4d52-a892-63ff85823eb2
2025-04-18 14:15:47 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Laguna Smartshop Laser EX-C (ID: 2d679131-1151-4d52-a892-63ff85823eb2)
2025-04-18 14:15:47 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-exc/ (Attempt 1/5)
2025-04-18 14:15:48 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://lagunatools.com/cnc/co2-lasers/smartshop-laser-exc/
2025-04-18 14:15:48 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 19500.0 using selector '.price'
2025-04-18 14:15:48 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 2d679131-1151-4d52-a892-63ff85823eb2: 19500
2025-04-18 14:15:48 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c33dad86-6722-49df-b28a-ea8d9ff1242c: Monport Effi10S 100W Laser
2025-04-18 14:15:48 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c33dad86-6722-49df-b28a-ea8d9ff1242c
2025-04-18 14:15:48 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c33dad86-6722-49df-b28a-ea8d9ff1242c
2025-04-18 14:15:48 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport Effi10S 100W Laser (ID: c33dad86-6722-49df-b28a-ea8d9ff1242c)
2025-04-18 14:15:48 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/monport-effi10s-upgraded-100w-co2-laser-engraver-cutter-with-autofocus-and-built-in-water-chiller?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:15:50 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/monport-effi10s-upgraded-100w-co2-laser-engraver-cutter-with-autofocus-and-built-in-water-chiller?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:15:50 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4999.99 using selector '.price'
2025-04-18 14:15:50 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for c33dad86-6722-49df-b28a-ea8d9ff1242c: 4999.99
2025-04-18 14:15:50 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 947531b4-1593-4f4c-aee7-6ad6e9bec999: Monport Mega
2025-04-18 14:15:50 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 947531b4-1593-4f4c-aee7-6ad6e9bec999
2025-04-18 14:15:50 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 947531b4-1593-4f4c-aee7-6ad6e9bec999
2025-04-18 14:15:50 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport Mega (ID: 947531b4-1593-4f4c-aee7-6ad6e9bec999)
2025-04-18 14:15:50 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/products/monport-mega-the-worlds-premier-70w-intelligent-desktop-engraving-machine?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:15:52 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/products/monport-mega-the-worlds-premier-70w-intelligent-desktop-engraving-machine?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:15:52 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3199.0 using selector '.price'
2025-04-18 14:15:52 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 947531b4-1593-4f4c-aee7-6ad6e9bec999: 3199.0
2025-04-18 14:15:52 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 34f89ae7-bfd6-4197-a8f7-1ba37c5a2343: OMTech Galvo 20W Split
2025-04-18 14:15:52 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 34f89ae7-bfd6-4197-a8f7-1ba37c5a2343
2025-04-18 14:15:52 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 34f89ae7-bfd6-4197-a8f7-1ba37c5a2343
2025-04-18 14:15:52 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Galvo 20W Split (ID: 34f89ae7-bfd6-4197-a8f7-1ba37c5a2343)
2025-04-18 14:15:52 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/20w-fiber-laser-engraver-cutter-usb-20w2-us?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:53 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/20w-fiber-laser-engraver-cutter-usb-20w2-us?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:53 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2099.0 using selector '.product__price'
2025-04-18 14:15:53 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 34f89ae7-bfd6-4197-a8f7-1ba37c5a2343: 2099.99 -> 2099.0
2025-04-18 14:15:53 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 100cf295-f7f4-4fe9-9bd3-5bca95699a24: OMTech Galvo 50W
2025-04-18 14:15:53 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 100cf295-f7f4-4fe9-9bd3-5bca95699a24
2025-04-18 14:15:53 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 100cf295-f7f4-4fe9-9bd3-5bca95699a24
2025-04-18 14:15:53 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech Galvo 50W (ID: 100cf295-f7f4-4fe9-9bd3-5bca95699a24)
2025-04-18 14:15:53 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/galvo-fiber-50-50w-integrated-fiber-laser-marker-engraving-machine-with-5-9x5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:53 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/galvo-fiber-50-50w-integrated-fiber-laser-marker-engraving-machine-with-5-9x5-9-working-area-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:54 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2729.0 using selector '.product__price'
2025-04-18 14:15:54 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 100cf295-f7f4-4fe9-9bd3-5bca95699a24: 2729.99 -> 2729.0
2025-04-18 14:15:54 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 023fd0f0-6063-4568-9229-a19678b5b06c: OMTech MOPA 20W
2025-04-18 14:15:54 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 023fd0f0-6063-4568-9229-a19678b5b06c
2025-04-18 14:15:54 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 023fd0f0-6063-4568-9229-a19678b5b06c
2025-04-18 14:15:54 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OMTech MOPA 20W (ID: 023fd0f0-6063-4568-9229-a19678b5b06c)
2025-04-18 14:15:54 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://omtechlaser.com/products/mopa-20-20w-integrated-mopa-fiber-laser-marker-engraving-machine-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum (Attempt 1/5)
2025-04-18 14:15:54 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://omtechlaser.com/products/mopa-20-20w-integrated-mopa-fiber-laser-marker-engraving-machine-for-metal?sca_ref=2167975.eUaAiFuxut&utm_source=affiliate&utm_medium=kols&utm_campaign=brandon-cullum
2025-04-18 14:15:54 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1999.0 using selector '.product__price'
2025-04-18 14:15:54 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 023fd0f0-6063-4568-9229-a19678b5b06c: 1999.99 -> 1999.0
2025-04-18 14:15:54 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 5ffa07fc-279f-4a2d-ad86-f935203df15e: Monport GA 30W MOPA
2025-04-18 14:15:54 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 5ffa07fc-279f-4a2d-ad86-f935203df15e
2025-04-18 14:15:54 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 5ffa07fc-279f-4a2d-ad86-f935203df15e
2025-04-18 14:15:55 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Monport GA 30W MOPA (ID: 5ffa07fc-279f-4a2d-ad86-f935203df15e)
2025-04-18 14:15:55 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://monportlaser.com/collections/ga-series-mopa-fiber-laser/products/monport-30m7-integrated-175af-mopa-fiber-laser-engraver-marking-machine-1?sca_ref=4770620.meSplPc0Pq (Attempt 1/5)
2025-04-18 14:15:56 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://monportlaser.com/collections/ga-series-mopa-fiber-laser/products/monport-30m7-integrated-175af-mopa-fiber-laser-engraver-marking-machine-1?sca_ref=4770620.meSplPc0Pq
2025-04-18 14:15:56 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3499.99 using selector '.price'
2025-04-18 14:15:56 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 5ffa07fc-279f-4a2d-ad86-f935203df15e: 3499.99
2025-04-18 14:15:56 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 0b5f958f-5b8b-4881-96d3-15924ea095e8: xTool F1 Lite
2025-04-18 14:15:56 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 0b5f958f-5b8b-4881-96d3-15924ea095e8
2025-04-18 14:15:56 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 0b5f958f-5b8b-4881-96d3-15924ea095e8
2025-04-18 14:15:57 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: xTool F1 Lite (ID: 0b5f958f-5b8b-4881-96d3-15924ea095e8)
2025-04-18 14:15:57 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.xtool.com/products/xtool-f1 (Attempt 1/5)
2025-04-18 14:15:58 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.xtool.com/products/xtool-f1
2025-04-18 14:15:58 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1499.0 using selector '.price'
2025-04-18 14:15:58 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 0b5f958f-5b8b-4881-96d3-15924ea095e8: 1499.0
2025-04-18 14:15:58 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 7d17ce1d-dde5-4b88-bb84-4d372bb0a5b0: Aeon NOVA 10 S
2025-04-18 14:15:58 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 7d17ce1d-dde5-4b88-bb84-4d372bb0a5b0
2025-04-18 14:15:58 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 7d17ce1d-dde5-4b88-bb84-4d372bb0a5b0
2025-04-18 14:15:58 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon NOVA 10 S (ID: 7d17ce1d-dde5-4b88-bb84-4d372bb0a5b0)
2025-04-18 14:15:58 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://aeonlaser.us/nova-s (Attempt 1/5)
2025-04-18 14:15:58 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://aeonlaser.us/nova-s
2025-04-18 14:15:58 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 17995.0 using selector '.price'
2025-04-18 14:15:58 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 7d17ce1d-dde5-4b88-bb84-4d372bb0a5b0: 17995
2025-04-18 14:15:58 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 045f6d76-a4fa-46cd-aa20-e049dda512f6: Thunder Nova 35
2025-04-18 14:15:58 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 045f6d76-a4fa-46cd-aa20-e049dda512f6
2025-04-18 14:15:58 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 045f6d76-a4fa-46cd-aa20-e049dda512f6
2025-04-18 14:15:58 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Thunder Nova 35 (ID: 045f6d76-a4fa-46cd-aa20-e049dda512f6)
2025-04-18 14:15:58 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.thunderlaserusa.com/nova-35/ (Attempt 1/5)
2025-04-18 14:15:59 | ERROR    | scrapers.web_scraper:get_page_content:95 - Failed to fetch content from https://www.thunderlaserusa.com/nova-35/. Status code: 403
2025-04-18 14:15:59 | ERROR    | services.price_service:extract_machine_price:59 - Failed to fetch content from https://www.thunderlaserusa.com/nova-35/
2025-04-18 14:15:59 | ERROR    | services.price_service:batch_update_machines:519 - Failed to extract price for 045f6d76-a4fa-46cd-aa20-e049dda512f6: Failed to fetch product page
2025-04-18 14:15:59 | INFO     | services.price_service:batch_update_machines:513 - Processing machine dc3d6571-4732-41c5-b61c-9cb9ba01cf49: Flux Ador
2025-04-18 14:15:59 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine dc3d6571-4732-41c5-b61c-9cb9ba01cf49
2025-04-18 14:15:59 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: dc3d6571-4732-41c5-b61c-9cb9ba01cf49
2025-04-18 14:15:59 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Flux Ador (ID: dc3d6571-4732-41c5-b61c-9cb9ba01cf49)
2025-04-18 14:15:59 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu (Attempt 1/5)
2025-04-18 14:15:59 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://shop.flux3dp.com/?sca_ref=3371875.vRA6wd3Afu
2025-04-18 14:15:59 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2990.0 using selector '.price'
2025-04-18 14:15:59 | INFO     | services.price_service:batch_update_machines:551 - Price changed for dc3d6571-4732-41c5-b61c-9cb9ba01cf49: 1799 -> 2990.0
2025-04-18 14:15:59 | INFO     | services.price_service:batch_update_machines:513 - Processing machine c7e21cf2-3cd3-4463-8a9b-117085faf25a: Atomstack Hurricane
2025-04-18 14:15:59 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine c7e21cf2-3cd3-4463-8a9b-117085faf25a
2025-04-18 14:15:59 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: c7e21cf2-3cd3-4463-8a9b-117085faf25a
2025-04-18 14:15:59 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Atomstack Hurricane (ID: c7e21cf2-3cd3-4463-8a9b-117085faf25a)
2025-04-18 14:15:59 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://atomstack.com/products/atomstack-hurricane (Attempt 1/5)
2025-04-18 14:16:00 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://atomstack.com/products/atomstack-hurricane
2025-04-18 14:16:00 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 279.0 using selector '.price'
2025-04-18 14:16:00 | INFO     | services.price_service:batch_update_machines:551 - Price changed for c7e21cf2-3cd3-4463-8a9b-117085faf25a: 2799 -> 279.0
2025-04-18 14:16:00 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 355edc0d-3b10-497a-9043-23ee72d9a900: OneLaser Hydra 13
2025-04-18 14:16:00 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 355edc0d-3b10-497a-9043-23ee72d9a900
2025-04-18 14:16:00 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 355edc0d-3b10-497a-9043-23ee72d9a900
2025-04-18 14:16:00 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OneLaser Hydra 13 (ID: 355edc0d-3b10-497a-9043-23ee72d9a900)
2025-04-18 14:16:00 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.1laser.com/products/onelaser-hydra-9-laser-engraving-machine (Attempt 1/5)
2025-04-18 14:16:01 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.1laser.com/products/onelaser-hydra-9-laser-engraving-machine
2025-04-18 14:16:01 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2000.0 using selector '.price'
2025-04-18 14:16:01 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 355edc0d-3b10-497a-9043-23ee72d9a900: 6995.0 -> 2000.0
2025-04-18 14:16:01 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 4ad1f50d-6248-40cb-a1b2-800691706d76: OneLaser XRF
2025-04-18 14:16:01 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 4ad1f50d-6248-40cb-a1b2-800691706d76
2025-04-18 14:16:01 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 4ad1f50d-6248-40cb-a1b2-800691706d76
2025-04-18 14:16:01 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: OneLaser XRF (ID: 4ad1f50d-6248-40cb-a1b2-800691706d76)
2025-04-18 14:16:01 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.1laser.com/products/onelaser-xrf-desktop-laser-machine (Attempt 1/5)
2025-04-18 14:16:01 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.1laser.com/products/onelaser-xrf-desktop-laser-machine
2025-04-18 14:16:01 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1004.0 using selector '.price'
2025-04-18 14:16:01 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 4ad1f50d-6248-40cb-a1b2-800691706d76: 4195.0 -> 1004.0
2025-04-18 14:16:01 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 294a7080-34bb-444c-bb37-d25b2a6fc30d: Atomstack X30 Pro
2025-04-18 14:16:01 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 294a7080-34bb-444c-bb37-d25b2a6fc30d
2025-04-18 14:16:01 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 294a7080-34bb-444c-bb37-d25b2a6fc30d
2025-04-18 14:16:01 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Atomstack X30 Pro (ID: 294a7080-34bb-444c-bb37-d25b2a6fc30d)
2025-04-18 14:16:01 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/x-series/products/atomstack-x30-pro-160w-6-core-laser-engraving-and-cutting-machine (Attempt 1/5)
2025-04-18 14:16:02 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/x-series/products/atomstack-x30-pro-160w-6-core-laser-engraving-and-cutting-machine
2025-04-18 14:16:02 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 759.0 using selector '[data-price]'
2025-04-18 14:16:02 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 294a7080-34bb-444c-bb37-d25b2a6fc30d: 759.0
2025-04-18 14:16:02 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 20064f02-1e62-4880-8e96-12b637bba1ca: Atomstack X40 Max
2025-04-18 14:16:02 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 20064f02-1e62-4880-8e96-12b637bba1ca
2025-04-18 14:16:02 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 20064f02-1e62-4880-8e96-12b637bba1ca
2025-04-18 14:16:02 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Atomstack X40 Max (ID: 20064f02-1e62-4880-8e96-12b637bba1ca)
2025-04-18 14:16:02 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.atomstack.net/collections/x-series/products/atomstack-x40-max-210w-professional-grade-laser-engraving-and-cutting-machine (Attempt 1/5)
2025-04-18 14:16:03 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.atomstack.net/collections/x-series/products/atomstack-x40-max-210w-professional-grade-laser-engraving-and-cutting-machine
2025-04-18 14:16:03 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 999.0 using selector '[data-price]'
2025-04-18 14:16:03 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 20064f02-1e62-4880-8e96-12b637bba1ca: 999.0
2025-04-18 14:16:03 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 9bca2c89-b816-4763-8444-7e113afa5db3: EM Smart Basic 2
2025-04-18 14:16:03 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 9bca2c89-b816-4763-8444-7e113afa5db3
2025-04-18 14:16:03 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 9bca2c89-b816-4763-8444-7e113afa5db3
2025-04-18 14:16:03 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: EM Smart Basic 2 (ID: 9bca2c89-b816-4763-8444-7e113afa5db3)
2025-04-18 14:16:03 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://em-smart.com/products/em-smart-basic-2-2r-25w-fiber-laser-engraving-marking-machine-with-rotary (Attempt 1/5)
2025-04-18 14:16:04 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://em-smart.com/products/em-smart-basic-2-2r-25w-fiber-laser-engraving-marking-machine-with-rotary
2025-04-18 14:16:04 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 2599.0 using selector '.price'
2025-04-18 14:16:04 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 9bca2c89-b816-4763-8444-7e113afa5db3: 2599.0
2025-04-18 14:16:04 | INFO     | services.price_service:batch_update_machines:513 - Processing machine a34f9e91-791e-45a8-b26c-6d4149e5b9f5: WeCreat Vision 20W
2025-04-18 14:16:04 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine a34f9e91-791e-45a8-b26c-6d4149e5b9f5
2025-04-18 14:16:04 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: a34f9e91-791e-45a8-b26c-6d4149e5b9f5
2025-04-18 14:16:04 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: WeCreat Vision 20W (ID: a34f9e91-791e-45a8-b26c-6d4149e5b9f5)
2025-04-18 14:16:04 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://wecreat.com/products/wecreat-vision (Attempt 1/5)
2025-04-18 14:16:05 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://wecreat.com/products/wecreat-vision
2025-04-18 14:16:05 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1399.99 using selector '.price'
2025-04-18 14:16:05 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for a34f9e91-791e-45a8-b26c-6d4149e5b9f5: 1399.99
2025-04-18 14:16:05 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 9a5e6b94-09b5-4601-9da2-bf808fb1dcb8: Glowforge Plus
2025-04-18 14:16:05 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 9a5e6b94-09b5-4601-9da2-bf808fb1dcb8
2025-04-18 14:16:05 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 9a5e6b94-09b5-4601-9da2-bf808fb1dcb8
2025-04-18 14:16:05 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Plus (ID: 9a5e6b94-09b5-4601-9da2-bf808fb1dcb8)
2025-04-18 14:16:05 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://glowforge.com/b/pro (Attempt 1/5)
2025-04-18 14:16:06 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://glowforge.com/b/pro
2025-04-18 14:16:06 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 6999.0 using regex pattern
2025-04-18 14:16:06 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 9a5e6b94-09b5-4601-9da2-bf808fb1dcb8: 4499 -> 6999.0
2025-04-18 14:16:06 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 1868ea18-4e44-4955-891f-acf1499e0381: xTool F1
2025-04-18 14:16:06 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 1868ea18-4e44-4955-891f-acf1499e0381
2025-04-18 14:16:06 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 1868ea18-4e44-4955-891f-acf1499e0381
2025-04-18 14:16:06 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: xTool F1 (ID: 1868ea18-4e44-4955-891f-acf1499e0381)
2025-04-18 14:16:06 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.xtool.com/products/xtool-f1 (Attempt 1/5)
2025-04-18 14:16:07 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.xtool.com/products/xtool-f1
2025-04-18 14:16:07 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1499.0 using selector '.price'
2025-04-18 14:16:07 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 1868ea18-4e44-4955-891f-acf1499e0381: 1499.0
2025-04-18 14:16:07 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 0b403bc0-bd67-403d-811a-0b6e60a47a70: Creality Falcon2 Pro 60W
2025-04-18 14:16:07 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 0b403bc0-bd67-403d-811a-0b6e60a47a70
2025-04-18 14:16:07 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 0b403bc0-bd67-403d-811a-0b6e60a47a70
2025-04-18 14:16:07 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Creality Falcon2 Pro 60W (ID: 0b403bc0-bd67-403d-811a-0b6e60a47a70)
2025-04-18 14:16:07 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.amazon.com/dp/B0D3LBFSY3?tag=brancull-20&th=1&psc=1&geniuslink=true (Attempt 1/5)
2025-04-18 14:16:10 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.amazon.com/dp/B0D3LBFSY3?tag=brancull-20&th=1&psc=1&geniuslink=true
2025-04-18 14:16:10 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 5398.0 using regex pattern
2025-04-18 14:16:10 | INFO     | services.price_service:batch_update_machines:551 - Price changed for 0b403bc0-bd67-403d-811a-0b6e60a47a70: 2537 -> 5398.0
2025-04-18 14:16:10 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 20788bba-05b8-4cbb-9ad4-040e563669a3: WeCreat Vision 40W
2025-04-18 14:16:10 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 20788bba-05b8-4cbb-9ad4-040e563669a3
2025-04-18 14:16:10 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 20788bba-05b8-4cbb-9ad4-040e563669a3
2025-04-18 14:16:11 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: WeCreat Vision 40W (ID: 20788bba-05b8-4cbb-9ad4-040e563669a3)
2025-04-18 14:16:11 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://wecreat.com/products/wecreat-vision?variant=48335286108457 (Attempt 1/5)
2025-04-18 14:16:11 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://wecreat.com/products/wecreat-vision?variant=48335286108457
2025-04-18 14:16:11 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1399.99 using selector '.price'
2025-04-18 14:16:11 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 20788bba-05b8-4cbb-9ad4-040e563669a3: 1399.99
2025-04-18 14:16:11 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 10647614-ac13-4ff1-ac1e-ac4760f9f7a0: xTool F1 Ultra
2025-04-18 14:16:11 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 10647614-ac13-4ff1-ac1e-ac4760f9f7a0
2025-04-18 14:16:11 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 10647614-ac13-4ff1-ac1e-ac4760f9f7a0
2025-04-18 14:16:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: xTool F1 Ultra (ID: 10647614-ac13-4ff1-ac1e-ac4760f9f7a0)
2025-04-18 14:16:12 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.xtool.com/products/xtool-f1-ultra-20w-fiber-diode-dual-laser-engraver (Attempt 1/5)
2025-04-18 14:16:13 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.xtool.com/products/xtool-f1-ultra-20w-fiber-diode-dual-laser-engraver
2025-04-18 14:16:13 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 3999.0 using selector '.price'
2025-04-18 14:16:13 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 10647614-ac13-4ff1-ac1e-ac4760f9f7a0: 3999.0
2025-04-18 14:16:13 | INFO     | services.price_service:batch_update_machines:513 - Processing machine db51e085-d6a7-4c6a-a3cd-bc5dc10b5907: Glowforge Pro
2025-04-18 14:16:13 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine db51e085-d6a7-4c6a-a3cd-bc5dc10b5907
2025-04-18 14:16:13 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: db51e085-d6a7-4c6a-a3cd-bc5dc10b5907
2025-04-18 14:16:13 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Glowforge Pro (ID: db51e085-d6a7-4c6a-a3cd-bc5dc10b5907)
2025-04-18 14:16:13 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://glowforge.com/b/pro (Attempt 1/5)
2025-04-18 14:16:13 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://glowforge.com/b/pro
2025-04-18 14:16:13 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:765 - Extracted price 6999.0 using regex pattern
2025-04-18 14:16:13 | INFO     | services.price_service:batch_update_machines:551 - Price changed for db51e085-d6a7-4c6a-a3cd-bc5dc10b5907: 5999 -> 6999.0
2025-04-18 14:16:13 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 7ea60e49-3d56-403d-af5b-b9d6bf84faa3: xTool M1 Ultra
2025-04-18 14:16:13 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 7ea60e49-3d56-403d-af5b-b9d6bf84faa3
2025-04-18 14:16:13 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 7ea60e49-3d56-403d-af5b-b9d6bf84faa3
2025-04-18 14:16:14 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: xTool M1 Ultra (ID: 7ea60e49-3d56-403d-af5b-b9d6bf84faa3)
2025-04-18 14:16:14 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.xtool.com/products/xtool-m1-ultra-the-worlds-first-4-in-1-craft-machine?ref=rw0h_cdiytm5&utm_medium=5306&utm_source=influencer (Attempt 1/5)
2025-04-18 14:16:15 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.xtool.com/products/xtool-m1-ultra-the-worlds-first-4-in-1-craft-machine?ref=rw0h_cdiytm5&utm_medium=5306&utm_source=influencer
2025-04-18 14:16:15 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 1099.0 using selector '.price'
2025-04-18 14:16:15 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 7ea60e49-3d56-403d-af5b-b9d6bf84faa3: 1099.0
2025-04-18 14:16:15 | INFO     | services.price_service:batch_update_machines:513 - Processing machine 0fd2df78-fba8-4d27-a2df-9b7b487b8d94: xTool P2S
2025-04-18 14:16:15 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 0fd2df78-fba8-4d27-a2df-9b7b487b8d94
2025-04-18 14:16:15 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 0fd2df78-fba8-4d27-a2df-9b7b487b8d94
2025-04-18 14:16:15 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: xTool P2S (ID: 0fd2df78-fba8-4d27-a2df-9b7b487b8d94)
2025-04-18 14:16:15 | INFO     | scrapers.web_scraper:get_page_content:75 - Fetching content from https://www.xtool.com/products/xtool-p2-55w-co2-laser-cutter?variant=45865559359727 (Attempt 1/5)
2025-04-18 14:16:16 | SUCCESS  | scrapers.web_scraper:get_page_content:79 - Successfully fetched content from https://www.xtool.com/products/xtool-p2-55w-co2-laser-cutter?variant=45865559359727
2025-04-18 14:16:17 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:676 - Extracted price 4499.0 using selector '.price'
2025-04-18 14:16:17 | INFO     | services.price_service:batch_update_machines:548 - Price unchanged for 0fd2df78-fba8-4d27-a2df-9b7b487b8d94: 4499.0
2025-04-18 14:16:17 | INFO     | services.price_service:batch_update_machines:599 - DRY RUN completed. 134 successful, 14 failed.
2025-04-18 14:16:17 | WARNING  | scrapers.web_scraper:__del__:167 - WebScraper deleted, client session might need explicit cleanup
2025-04-18 14:54:04 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:54:04 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:54:04 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:54:04 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 14:54:04 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:54:04 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:54:04 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:54:04 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 14:58:01 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:58:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:58:01 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:58:01 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 14:58:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:58:01 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:58:01 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 14:58:01 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 14:59:55 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 14:59:55 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:59:55 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 14:59:55 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 14:59:55 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 14:59:55 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 14:59:55 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 14:59:55 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:00:07 | INFO     | api.routes:get_batches:394 - Fetching list of batch jobs
2025-04-18 15:00:08 | INFO     | api.routes:get_batches:411 - Found 1 batch jobs
2025-04-18 15:00:08 | INFO     | api.routes:get_batches:415 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:00:08 | INFO     | api.routes:configure_batch_update:357 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:00:08 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:00:17 | INFO     | api.routes:debug_extraction:1429 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:00:17 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:00:17 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:00:17 | INFO     | api.routes:debug_extraction:1451 - Machine found for debug: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:00:17 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:00:17 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:00:18 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:00:18 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver (Attempt 1/5)
2025-04-18 15:00:19 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:00:19 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:871 - Extracted price 1999.0 using regex pattern
2025-04-18 15:00:19 | INFO     | scrapers.price_extractor:_verify_and_correct_price:1395 - Large price change detected: 1199.0 -> 1999.0 (66.72%)
2025-04-18 15:00:19 | WARNING  | scrapers.price_extractor:_verify_and_correct_price:1447 - Suspicious price change (66.72%) couldn't be automatically corrected: 1199.0 -> 1999.0
2025-04-18 15:04:03 | INFO     | api.routes:get_batches:394 - Fetching list of batch jobs
2025-04-18 15:04:03 | INFO     | api.routes:get_batches:411 - Found 1 batch jobs
2025-04-18 15:04:03 | INFO     | api.routes:get_batches:415 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:09:22 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:09:22 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:09:22 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:09:22 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:09:22 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:09:22 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:09:22 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:09:22 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:09:26 | INFO     | api.routes:configure_batch_update:357 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:09:27 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:09:27 | INFO     | api.routes:get_batches:394 - Fetching list of batch jobs
2025-04-18 15:09:27 | INFO     | api.routes:get_batches:411 - Found 1 batch jobs
2025-04-18 15:09:27 | INFO     | api.routes:get_batches:415 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:09:29 | INFO     | api.routes:debug_extraction:1429 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:09:29 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:09:30 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:09:30 | INFO     | api.routes:debug_extraction:1451 - Machine found for debug: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:09:30 | ERROR    | api.routes:debug_extraction:1491 - Error in debug extraction for machine 8054eeb8-504f-4791-9f48-a99fe0669664: cannot import name 'JsParser' from 'services.js_parser' (/Users/brandoncullum/machines-for-makers/price-extractor-python/services/js_parser.py)
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x11990c2c0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1036832e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x1036e0540>
    └ <uvicorn.server.Server object at 0x118d2a090>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1036e05e0>
           │       │   └ <uvicorn.server.Server object at 0x118d2a090>
           │       └ <function run at 0x102fbce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1190d3e20>
           │      └ <function Runner.run at 0x103404720>
           └ <asyncio.runners.Runner object at 0x11990bb50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x118a79970>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x11990bb50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x119952e10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1199c5750>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x119952e10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x119190ad0>
          └ <fastapi.applications.FastAPI object at 0x1199c5750>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1199df2e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x118d78450>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x119190ad0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1199df2e0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x105195760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x118d78450>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x118d78450>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1199fbe50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x118d78450>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x118d78450>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x119173190>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1199c5c90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1199fbe50>
          └ <function wrap_app_handling_exceptions at 0x1050e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1199df420>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1199c5c90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1199df420>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1199c5c90>>
          └ <fastapi.routing.APIRouter object at 0x1199c5c90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1199df420>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1050e1da0>
          └ APIRoute(path='/api/v1/debug-extraction', name='debug_extraction', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1199df420>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x1199de700>
          └ APIRoute(path='/api/v1/debug-extraction', name='debug_extraction', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1199df420>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x119184290>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1199df4c0>
          └ <function wrap_app_handling_exceptions at 0x1050e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1199dfc40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x119190d...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1199df4c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x119184290>
                     └ <function get_request_handler.<locals>.app at 0x1199de7a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1050e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': MachineUpdateRequest(machine_id='8054eeb8-504f-4791-9f48-a99fe0669664', confirm=False, new_price=None)}
                 │         └ <function debug_extraction at 0x1191c4860>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 1454, in debug_extraction
    from services.extraction_service import ExtractionService

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/extraction_service.py", line 14, in <module>
    from services.js_parser import JsParser

ImportError: cannot import name 'JsParser' from 'services.js_parser' (/Users/brandoncullum/machines-for-makers/price-extractor-python/services/js_parser.py)
2025-04-18 15:13:46 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:13:46 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:13:46 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:13:46 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:13:46 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:13:46 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:13:46 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:13:46 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:14:08 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:14:08 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:14:08 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:14:08 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:14:08 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:14:08 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:14:08 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:14:08 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:14:57 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:14:57 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:14:57 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:14:57 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:14:57 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:14:57 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:14:57 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:14:57 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:15:04 | INFO     | api.routes:get_batches:394 - Fetching list of batch jobs
2025-04-18 15:15:04 | INFO     | api.routes:get_batches:411 - Found 1 batch jobs
2025-04-18 15:15:04 | INFO     | api.routes:get_batches:415 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:15:04 | INFO     | api.routes:configure_batch_update:357 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:15:04 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:15:07 | INFO     | api.routes:debug_extraction:1429 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:15:07 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:15:07 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:15:07 | INFO     | api.routes:debug_extraction:1451 - Machine found for debug: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:15:07 | INFO     | services.price_service:extract_machine_price:34 - Processing price extraction for machine 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:15:07 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:15:07 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:15:07 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver (Attempt 1/5)
2025-04-18 15:15:08 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:15:08 | INFO     | scrapers.price_extractor:_extract_from_regex_patterns:871 - Extracted price 1999.0 using regex pattern
2025-04-18 15:15:08 | INFO     | scrapers.price_extractor:_verify_and_correct_price:1395 - Large price change detected: 1199.0 -> 1999.0 (66.72%)
2025-04-18 15:15:08 | WARNING  | scrapers.price_extractor:_verify_and_correct_price:1447 - Suspicious price change (66.72%) couldn't be automatically corrected: 1199.0 -> 1999.0
2025-04-18 15:20:39 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:20:39 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:20:39 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:20:39 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:20:39 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:20:39 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:20:39 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:21:01 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:21:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:21:01 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:21:01 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:21:01 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:21:01 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:21:01 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:22:00 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:22:00 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:22:00 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:22:00 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:22:00 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:22:00 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:22:01 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:22:01 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:22:01 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:22:01 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:22:18 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:22:18 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:22:18 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:22:18 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:22:18 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:22:18 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:22:18 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:22:18 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:22:18 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:22:18 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:22:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:22:18 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:22:18 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:22:18 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:23:23 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:23:23 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:23:23 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:23:23 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:23:23 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:23:23 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:23:23 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:23:23 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:23:23 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:23:23 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:23:23 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:23:23 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:23:23 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:23:23 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:23:46 | INFO     | api.routes:configure_batch_update:359 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:23:47 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:23:47 | INFO     | api.routes:get_batches:396 - Fetching list of batch jobs
2025-04-18 15:23:47 | INFO     | api.routes:get_batches:413 - Found 1 batch jobs
2025-04-18 15:23:47 | INFO     | api.routes:get_batches:417 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:23:49 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664, variant DEFAULT
2025-04-18 15:23:49 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:23:49 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:23:49 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:23:49 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for 8054eeb8-504f-4791-9f48-a99fe0669664/DEFAULT
2025-04-18 15:23:50 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:23:50 | ERROR    | services.extraction_service:_get_latest_price:582 - Error getting latest price: {'code': 'PGRST202', 'details': 'Searched for the function public.select_from_machines_latest with parameters machine_id_param, variant_attribute_param or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.', 'hint': 'Perhaps you meant to call the function public.get_batch_stats', 'message': 'Could not find the function public.select_from_machines_latest(machine_id_param, variant_attribute_param) in the schema cache'}
2025-04-18 15:23:50 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver (Attempt 1/5)
2025-04-18 15:23:51 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:23:51 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:23:51 | ERROR    | services.extraction_service:_extract_static:480 - Error in STATIC tier extraction: 'StaticParser' object has no attribute 'structured_data_paths'
2025-04-18 15:23:51 | INFO     | services.extraction_service:_extract_slice_fast:485 - Attempting SLICE_FAST tier extraction for https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:23:53 | INFO     | services.extraction_service:_extract_slice_fast:491 - SLICE_FAST tier extracted price: 1199.0 using SLICE_FAST:20240307 with confidence 1.0
2025-04-18 15:23:53 | ERROR    | services.extraction_service:extract_price:447 - Error in price extraction pipeline for 8054eeb8-504f-4791-9f48-a99fe0669664/DEFAULT: PriceValidator.validate_price() got an unexpected keyword argument 'current_price'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x10bcb8540>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x103f1f2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x103f7c540>
    └ <uvicorn.server.Server object at 0x10bcc4290>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x103f7c5e0>
           │       │   └ <uvicorn.server.Server object at 0x10bcc4290>
           │       └ <function run at 0x10376ce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10a2aa5c0>
           │      └ <function Runner.run at 0x1037d4720>
           └ <asyncio.runners.Runner object at 0x10bc13d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x10bcfc930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10bc13d10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10bc30350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb2590>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10bc33dd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10bc30350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb2590>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb2590>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10bc75b90>
          └ <fastapi.applications.FastAPI object at 0x10bc33dd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10bd831a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10bd0c1d0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10bc75b90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10bd831a0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x105995760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10bd0c1d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10bd0c1d0>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10bc1d5d0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10bd0c1d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10bd0c1d0>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10bdb2610>
          │                            │    └ <fastapi.routing.APIRouter object at 0x10bd61690>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10bc1d5d0>
          └ <function wrap_app_handling_exceptions at 0x1053e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bd832e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x10bd61690>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bd832e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10bd61690>>
          └ <fastapi.routing.APIRouter object at 0x10bd61690>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bd832e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1053e1da0>
          └ APIRoute(path='/api/v1/debug-extraction', name='debug_extraction', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bd832e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10bd825c0>
          └ APIRoute(path='/api/v1/debug-extraction', name='debug_extraction', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bd832e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10bdb1b10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10bd83380>
          └ <function wrap_app_handling_exceptions at 0x1053e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bd83ce0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bdb25...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10bd83380>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10bdb1b10>
                     └ <function get_request_handler.<locals>.app at 0x10bd82660>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1053e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'machine_id': '8054eeb8-504f-4791-9f48-a99fe0669664'}}
                 │         └ <function debug_extraction at 0x10bc58ae0>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 1465, in debug_extraction
    result = await extraction_service.extract_price(
                   │                  └ <function ExtractionService.extract_price at 0x108d73740>
                   └ <services.extraction_service.ExtractionService object at 0x10a2eba90>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/extraction_service.py", line 328, in extract_price
    validation_result = await self._perform_validation(
                              │    └ <function ExtractionService._perform_validation at 0x10a2dae80>
                              └ <services.extraction_service.ExtractionService object at 0x10a2eba90>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/extraction_service.py", line 624, in _perform_validation
    is_valid, validation_confidence, needs_manual_review, validation_reason = self.price_validator.validate_price(
                                                                              │    │               └ <function PriceValidator.validate_price at 0x1077163e0>
                                                                              │    └ <services.price_validator.PriceValidator object at 0x108b94f50>
                                                                              └ <services.extraction_service.ExtractionService object at 0x10a2eba90>

TypeError: PriceValidator.validate_price() got an unexpected keyword argument 'current_price'
2025-04-18 15:27:47 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:27:47 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:27:47 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:27:47 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:27:47 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:27:47 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:27:47 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:27:47 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:27:47 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:27:47 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:27:47 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:27:47 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:27:47 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:27:47 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:27:56 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:27:56 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:27:56 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:27:56 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:27:56 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:27:56 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:27:56 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:27:56 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:27:56 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:27:56 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:27:56 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:27:56 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:27:56 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:27:56 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:29:35 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:29:35 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:29:35 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:29:35 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:29:35 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:29:35 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:29:35 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:29:35 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:29:35 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:29:35 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:29:35 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:29:35 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:29:35 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:29:35 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:29:43 | INFO     | api.routes:get_batches:396 - Fetching list of batch jobs
2025-04-18 15:29:43 | INFO     | api.routes:get_batches:413 - Found 1 batch jobs
2025-04-18 15:29:43 | INFO     | api.routes:get_batches:417 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:29:43 | INFO     | api.routes:configure_batch_update:359 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:29:43 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:29:47 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664, variant DEFAULT
2025-04-18 15:29:47 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:29:48 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:29:48 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:29:48 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for 8054eeb8-504f-4791-9f48-a99fe0669664/DEFAULT
2025-04-18 15:29:48 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:29:48 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for 8054eeb8-504f-4791-9f48-a99fe0669664/DEFAULT
2025-04-18 15:29:48 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver (Attempt 1/5)
2025-04-18 15:29:49 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:29:49 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:29:49 | INFO     | services.extraction_service:_extract_static:474 - STATIC tier extracted price: 1199.0 using STATIC_STRUCTURED_DATA:$.offers.price with confidence 0.95
2025-04-18 15:29:49 | ERROR    | services.extraction_service:extract_price:447 - Error in price extraction pipeline for 8054eeb8-504f-4791-9f48-a99fe0669664/DEFAULT: PriceValidator.validate_price() got an unexpected keyword argument 'price'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x1113b85e0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1028a32e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x102900540>
    └ <uvicorn.server.Server object at 0x1113c42d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1029005e0>
           │       │   └ <uvicorn.server.Server object at 0x1113c42d0>
           │       └ <function run at 0x101828e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x107baa5c0>
           │      └ <function Runner.run at 0x101890720>
           └ <asyncio.runners.Runner object at 0x1113c4350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1113fc930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1113c4350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11131c350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1115611d0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x11131c350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111561bd0>
          └ <fastapi.applications.FastAPI object at 0x1115611d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111582fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x11131ee90>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x111561bd0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '53', 'sec-ch-ua-platform': '"macOS"', 'user...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x111582fc0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x103b95760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11131ee90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x11131ee90>>, sen...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11134a490>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x11131ee90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x11131ee90>>, sen...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1115d2bd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x111561790>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11134a490>
          └ <function wrap_app_handling_exceptions at 0x103ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111583380>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x111561790>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111583380>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x111561790>>
          └ <fastapi.routing.APIRouter object at 0x111561790>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111583380>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x103ae1da0>
          └ APIRoute(path='/api/v1/debug-extraction', name='debug_extraction', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111583380>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x111582660>
          └ APIRoute(path='/api/v1/debug-extraction', name='debug_extraction', methods=['POST'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111583380>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1115d0e90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x111583420>
          └ <function wrap_app_handling_exceptions at 0x103ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x111583600>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1115d2c...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x111583420>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1115d0e90>
                     └ <function get_request_handler.<locals>.app at 0x111582700>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x103ae18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'request': {'machine_id': '8054eeb8-504f-4791-9f48-a99fe0669664'}}
                 │         └ <function debug_extraction at 0x11135cb80>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 1465, in debug_extraction
    result = await extraction_service.extract_price(
                   │                  └ <function ExtractionService.extract_price at 0x106e737e0>
                   └ <services.extraction_service.ExtractionService object at 0x107befc90>

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/extraction_service.py", line 328, in extract_price
    validation_result = await self._perform_validation(
                              │    └ <function ExtractionService._perform_validation at 0x107bdaf20>
                              └ <services.extraction_service.ExtractionService object at 0x107befc90>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/services/extraction_service.py", line 620, in _perform_validation
    validation_results = self.price_validator.validate_price(
                         │    │               └ <function PriceValidator.validate_price at 0x1059163e0>
                         │    └ <services.price_validator.PriceValidator object at 0x107bf3790>
                         └ <services.extraction_service.ExtractionService object at 0x107befc90>

TypeError: PriceValidator.validate_price() got an unexpected keyword argument 'price'
2025-04-18 15:31:17 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:31:17 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:31:17 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:31:17 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:31:17 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:31:17 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:31:17 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:31:18 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:31:18 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:31:18 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:31:18 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:31:18 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:31:18 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:31:18 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:33:02 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:33:02 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:33:02 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:33:02 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:33:02 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:33:02 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:33:02 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:33:02 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:33:02 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:33:02 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:33:02 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:33:02 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:33:02 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:33:02 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:33:55 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:33:55 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:33:55 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:33:55 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:33:55 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:33:55 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:33:55 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:33:55 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:33:55 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:33:55 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:33:55 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:33:55 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:33:55 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:33:55 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:33:59 | INFO     | api.routes:configure_batch_update:359 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:33:59 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:33:59 | INFO     | api.routes:get_batches:396 - Fetching list of batch jobs
2025-04-18 15:34:00 | INFO     | api.routes:get_batches:413 - Found 1 batch jobs
2025-04-18 15:34:00 | INFO     | api.routes:get_batches:417 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:34:02 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664, variant DEFAULT
2025-04-18 15:34:02 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:34:02 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:34:02 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Acmer P3 (ID: 8054eeb8-504f-4791-9f48-a99fe0669664)
2025-04-18 15:34:02 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for 8054eeb8-504f-4791-9f48-a99fe0669664/DEFAULT
2025-04-18 15:34:02 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 15:34:03 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for 8054eeb8-504f-4791-9f48-a99fe0669664/DEFAULT
2025-04-18 15:34:03 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver (Attempt 1/5)
2025-04-18 15:34:03 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:34:03 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://acmerlaser.com/products/acmer-p3-ir-diode-laser-engraver
2025-04-18 15:34:03 | INFO     | services.extraction_service:_extract_static:474 - STATIC tier extracted price: 1199.0 using STATIC_STRUCTURED_DATA:$.offers.price with confidence 0.95
2025-04-18 15:34:03 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=0.95, needs_review=False
2025-04-18 15:34:03 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 0.95, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': True, 'validation_passed': True}
2025-04-18 15:35:27 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine fad976a4-4bb9-4c91-92c3-ff774f02ec16, variant DEFAULT
2025-04-18 15:35:27 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-18 15:35:28 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Algolaser Alpha MK2 (ID: fad976a4-4bb9-4c91-92c3-ff774f02ec16)
2025-04-18 15:35:28 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Algolaser Alpha MK2 (ID: fad976a4-4bb9-4c91-92c3-ff774f02ec16)
2025-04-18 15:35:28 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for fad976a4-4bb9-4c91-92c3-ff774f02ec16/DEFAULT
2025-04-18 15:35:28 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for fad976a4-4bb9-4c91-92c3-ff774f02ec16
2025-04-18 15:35:28 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for fad976a4-4bb9-4c91-92c3-ff774f02ec16/DEFAULT
2025-04-18 15:35:28 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser (Attempt 1/5)
2025-04-18 15:35:29 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-18 15:35:29 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://algolaser.com/products/algolaser-alpha-mk2-diode-laser-engraver-algolaser
2025-04-18 15:35:29 | INFO     | services.extraction_service:_extract_static:474 - STATIC tier extracted price: 619.0 using STATIC_STRUCTURED_DATA:$.offers.price with confidence 0.95
2025-04-18 15:35:29 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=0.95, needs_review=False
2025-04-18 15:35:29 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 0.95, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': False, 'validation_passed': True}
2025-04-18 15:35:58 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine 103db02f-7852-41f8-b297-162d479eaa39, variant DEFAULT
2025-04-18 15:35:58 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 103db02f-7852-41f8-b297-162d479eaa39
2025-04-18 15:35:58 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B4 20W (ID: 103db02f-7852-41f8-b297-162d479eaa39)
2025-04-18 15:35:58 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: ComMarker B4 20W (ID: 103db02f-7852-41f8-b297-162d479eaa39)
2025-04-18 15:35:58 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for 103db02f-7852-41f8-b297-162d479eaa39/DEFAULT
2025-04-18 15:35:58 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for 103db02f-7852-41f8-b297-162d479eaa39
2025-04-18 15:35:59 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for 103db02f-7852-41f8-b297-162d479eaa39/DEFAULT
2025-04-18 15:35:59 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc (Attempt 1/5)
2025-04-18 15:35:59 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc
2025-04-18 15:35:59 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc
2025-04-18 15:35:59 | ERROR    | services.extraction_service:_extract_static:480 - Error in STATIC tier extraction: [<class 'decimal.ConversionSyntax'>]
2025-04-18 15:35:59 | INFO     | services.extraction_service:_extract_slice_fast:485 - Attempting SLICE_FAST tier extraction for https://commarker.com/product/b4-laser-engraver/?ref=snlyaljc
2025-04-18 15:36:01 | INFO     | services.extraction_service:_extract_slice_fast:491 - SLICE_FAST tier extracted price: 1999.0 using SLICE_FAST:20240307 with confidence 0.9
2025-04-18 15:36:01 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=0.9, needs_review=False
2025-04-18 15:36:01 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 0.9, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': False, 'validation_passed': True}
2025-04-18 15:41:59 | INFO     | api.routes:update_machine_price:110 - Received price update request for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:41:59 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:41:59 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 15:41:59 | INFO     | api.routes:update_machine_price:132 - Machine found: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 15:41:59 | INFO     | api.routes:update_machine_price:140 - Non-confirmed price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:41:59 | INFO     | services.price_service:update_machine_price:212 - Processing price update for machine d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:41:59 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:41:59 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 15:41:59 | INFO     | services.price_service:update_machine_price:249 - Found machine: Cloudray GM-100 LiteMarker (Current price: $9499)
2025-04-18 15:41:59 | INFO     | services.price_service:update_machine_price:262 - Fetching product page: https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-18 15:41:59 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area (Attempt 1/5)
2025-04-18 15:42:00 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-18 15:42:00 | INFO     | services.price_service:update_machine_price:282 - Successfully fetched page (850508 bytes)
2025-04-18 15:42:00 | INFO     | scrapers.price_extractor:_extract_from_common_selectors:782 - Extracted price 949900.0 using selector '[data-price]'
2025-04-18 15:42:00 | INFO     | scrapers.price_extractor:_verify_and_correct_price:1395 - Large price change detected: 9499 -> 949900.0 (9900.00%)
2025-04-18 15:42:00 | WARNING  | scrapers.price_extractor:_verify_and_correct_price:1447 - Suspicious price change (9900.00%) couldn't be automatically corrected: 9499 -> 949900.0
2025-04-18 15:42:00 | INFO     | services.price_service:update_machine_price:315 - Successfully extracted price $949900.0 using method: CSS Selector '[data-price]'
2025-04-18 15:42:00 | INFO     | services.database:update_machine_price:185 - 🔄 Attempting to update price for machine d3707433-2475-4b6c-8007-1e7126afd86c to $949900.0
2025-04-18 15:42:00 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:42:00 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 15:42:00 | INFO     | services.database:update_machine_price:201 - ✅ Found machine 'Cloudray GM-100 LiteMarker' with DB ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:42:00 | INFO     | services.database:update_machine_price:241 - ℹ️ Main update failed, but still adding price history record
2025-04-18 15:42:00 | ERROR    | services.database:add_price_history:338 - Error adding price history for machine d3707433-2475-4b6c-8007-1e7126afd86c: name 'PRICE_HISTORY_TABLE' is not defined
2025-04-18 15:42:00 | INFO     | services.price_service:update_machine_price:388 - Price updated successfully for Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 15:42:00 | INFO     | api.routes:update_machine_price:173 - Price update successful for Cloudray GM-100 LiteMarker
2025-04-18 15:42:24 | INFO     | api.routes:get_batches:396 - Fetching list of batch jobs
2025-04-18 15:42:24 | INFO     | api.routes:get_batches:413 - Found 1 batch jobs
2025-04-18 15:42:24 | INFO     | api.routes:get_batches:417 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:42:24 | INFO     | api.routes:configure_batch_update:359 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:42:24 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:42:35 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 15:42:35 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:42:35 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:42:35 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 15:42:35 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 15:42:35 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 15:42:35 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 15:42:35 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 15:42:35 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 15:42:35 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 15:42:35 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 15:42:35 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 15:42:35 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 15:42:35 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 15:42:43 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine d3707433-2475-4b6c-8007-1e7126afd86c, variant DEFAULT
2025-04-18 15:42:43 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:42:44 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 15:42:44 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Cloudray GM-100 LiteMarker (ID: d3707433-2475-4b6c-8007-1e7126afd86c)
2025-04-18 15:42:44 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for d3707433-2475-4b6c-8007-1e7126afd86c/DEFAULT
2025-04-18 15:42:44 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for d3707433-2475-4b6c-8007-1e7126afd86c
2025-04-18 15:42:44 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for d3707433-2475-4b6c-8007-1e7126afd86c/DEFAULT
2025-04-18 15:42:44 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area (Attempt 1/5)
2025-04-18 15:42:44 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-18 15:42:44 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-18 15:42:45 | INFO     | services.extraction_service:_extract_static:474 - STATIC tier extracted price: 219 using STATIC_REGEX:(?:price|cost):?\s*\$?\s*([\d,.]+) with confidence 0.8
2025-04-18 15:42:45 | INFO     | services.extraction_service:_extract_slice_fast:485 - Attempting SLICE_FAST tier extraction for https://www.cloudraylaser.com/products/cloudray-gm-100-litemarker-100w-fiber-laser-marking-engraver-with-4-3-x-4-3-scan-area
2025-04-18 15:42:47 | INFO     | services.extraction_service:_extract_slice_fast:491 - SLICE_FAST tier extracted price: 9499.0 using SLICE_FAST:20240307 with confidence 1.0
2025-04-18 15:42:47 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=1.0, needs_review=False
2025-04-18 15:42:47 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 1.0, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': True, 'validation_passed': True}
2025-04-18 15:43:12 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine 8a0ad4b4-b616-4e5d-85a3-5631ab388836, variant DEFAULT
2025-04-18 15:43:12 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-18 15:43:12 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon MIRA 5 S (ID: 8a0ad4b4-b616-4e5d-85a3-5631ab388836)
2025-04-18 15:43:12 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Aeon MIRA 5 S (ID: 8a0ad4b4-b616-4e5d-85a3-5631ab388836)
2025-04-18 15:43:12 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for 8a0ad4b4-b616-4e5d-85a3-5631ab388836/DEFAULT
2025-04-18 15:43:12 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for 8a0ad4b4-b616-4e5d-85a3-5631ab388836
2025-04-18 15:43:13 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for 8a0ad4b4-b616-4e5d-85a3-5631ab388836/DEFAULT
2025-04-18 15:43:13 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://aeonlaser.us/mira-s (Attempt 1/5)
2025-04-18 15:43:13 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://aeonlaser.us/mira-s
2025-04-18 15:43:13 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://aeonlaser.us/mira-s
2025-04-18 15:43:13 | INFO     | services.extraction_service:_extract_static:474 - STATIC tier extracted price: 6995.00 using STATIC_STRUCTURED_DATA:$.offers.price with confidence 0.95
2025-04-18 15:43:13 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=0.95, needs_review=False
2025-04-18 15:43:13 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 0.95, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': True, 'validation_passed': True}
2025-04-18 15:43:22 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine ff1f2676-9e67-47bf-9bb0-7152bace66b5, variant DEFAULT
2025-04-18 15:43:22 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-18 15:43:22 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon MIRA 7 Pro S (ID: ff1f2676-9e67-47bf-9bb0-7152bace66b5)
2025-04-18 15:43:22 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Aeon MIRA 7 Pro S (ID: ff1f2676-9e67-47bf-9bb0-7152bace66b5)
2025-04-18 15:43:22 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for ff1f2676-9e67-47bf-9bb0-7152bace66b5/DEFAULT
2025-04-18 15:43:22 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for ff1f2676-9e67-47bf-9bb0-7152bace66b5
2025-04-18 15:43:23 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for ff1f2676-9e67-47bf-9bb0-7152bace66b5/DEFAULT
2025-04-18 15:43:23 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://aeonlaser.us/mira-s (Attempt 1/5)
2025-04-18 15:43:23 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://aeonlaser.us/mira-s
2025-04-18 15:43:23 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://aeonlaser.us/mira-s
2025-04-18 15:43:23 | INFO     | services.extraction_service:_extract_static:474 - STATIC tier extracted price: 6995.00 using STATIC_STRUCTURED_DATA:$.offers.price with confidence 0.95
2025-04-18 15:43:23 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=0.95, needs_review=False
2025-04-18 15:43:23 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 0.95, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': True, 'validation_passed': True}
2025-04-18 15:46:14 | INFO     | api.routes:configure_batch_update:359 - Configuring batch update with days_threshold=7, limit=10
2025-04-18 15:46:14 | INFO     | services.database:get_machines_needing_update:402 - Found 57 machines for price update
2025-04-18 15:46:14 | INFO     | api.routes:get_batches:396 - Fetching list of batch jobs
2025-04-18 15:46:14 | INFO     | api.routes:get_batches:413 - Found 1 batch jobs
2025-04-18 15:46:14 | INFO     | api.routes:get_batches:417 - Most recent batch: {'id': '2e001700-5ff3-4f7f-a8da-59e2dd133d43', 'status': 'completed', 'start_time': '2025-04-16T15:44:08.309528+00:00', 'end_time': '2025-04-16T15:45:15.526586+00:00', 'total_machines': 50, 'days_threshold': 0}
2025-04-18 15:46:22 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine fa68aaa3-8c8f-44ff-b67f-5ec2f7822499, variant DEFAULT
2025-04-18 15:46:22 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: fa68aaa3-8c8f-44ff-b67f-5ec2f7822499
2025-04-18 15:46:22 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: Aeon MIRA 9 Pro S (ID: fa68aaa3-8c8f-44ff-b67f-5ec2f7822499)
2025-04-18 15:46:22 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: Aeon MIRA 9 Pro S (ID: fa68aaa3-8c8f-44ff-b67f-5ec2f7822499)
2025-04-18 15:46:22 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for fa68aaa3-8c8f-44ff-b67f-5ec2f7822499/DEFAULT
2025-04-18 15:46:22 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for fa68aaa3-8c8f-44ff-b67f-5ec2f7822499
2025-04-18 15:46:23 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for fa68aaa3-8c8f-44ff-b67f-5ec2f7822499/DEFAULT
2025-04-18 15:46:23 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://aeonlaser.us/mira-pro-s (Attempt 1/5)
2025-04-18 15:46:23 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://aeonlaser.us/mira-pro-s
2025-04-18 15:46:23 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://aeonlaser.us/mira-pro-s
2025-04-18 15:46:23 | INFO     | services.extraction_service:_extract_static:474 - STATIC tier extracted price: 10995.00 using STATIC_STRUCTURED_DATA:$.offers.price with confidence 0.95
2025-04-18 15:46:23 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=0.95, needs_review=False
2025-04-18 15:46:23 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 0.95, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': False, 'validation_passed': True}
2025-04-18 15:47:36 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c, variant DEFAULT
2025-04-18 15:47:36 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-18 15:47:36 | INFO     | services.database:get_machine_by_id:78 - ✅ Found machine: ComMarker B6 MOPA 30W (ID: 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c)
2025-04-18 15:47:36 | INFO     | api.routes:debug_extraction:1458 - Machine found for debug: ComMarker B6 MOPA 30W (ID: 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c)
2025-04-18 15:47:36 | INFO     | services.extraction_service:extract_price:85 - Starting price extraction for 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c/DEFAULT
2025-04-18 15:47:36 | INFO     | services.database_service:get_machine_by_id:58 - Retrieved machine data for 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-18 15:47:37 | INFO     | services.extraction_service:_get_latest_price:575 - No latest price found for 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c/DEFAULT
2025-04-18 15:47:37 | INFO     | scrapers.web_scraper:get_page_content:195 - Fetching content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc (Attempt 1/5)
2025-04-18 15:47:37 | SUCCESS  | scrapers.web_scraper:get_page_content:199 - Successfully fetched content from https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-18 15:47:37 | INFO     | services.extraction_service:_extract_static:459 - Attempting STATIC tier extraction for https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-18 15:47:37 | ERROR    | services.extraction_service:_extract_static:480 - Error in STATIC tier extraction: [<class 'decimal.ConversionSyntax'>]
2025-04-18 15:47:37 | INFO     | services.extraction_service:_extract_slice_fast:485 - Attempting SLICE_FAST tier extraction for https://commarker.com/product/commarker-b6-jpt-mopa/?ref=snlyaljc
2025-04-18 15:47:39 | INFO     | services.extraction_service:_extract_slice_fast:491 - SLICE_FAST tier extracted price: 2999.0 using SLICE_FAST:20240307 with confidence 0.9
2025-04-18 15:47:39 | INFO     | services.extraction_service:_perform_validation:653 - Price validation results: valid=True, confidence=0.9, needs_review=False
2025-04-18 15:47:39 | INFO     | services.extraction_service:extract_price:340 - Price validation results: {'is_valid': True, 'validation_confidence': 0.9, 'needs_manual_review': False, 'validation_reason': None, 'price_unchanged': False, 'validation_passed': True}
2025-04-18 15:56:45 | INFO     | api.routes:get_machine_details:796 - Fetching details for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-18 15:56:45 | ERROR    | api.routes:get_machine_details:819 - Error fetching machine details for 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c: 'DatabaseService' object has no attribute 'get_machine_with_variants'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x10b3b8540>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1041632e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x1041c0540>
    └ <uvicorn.server.Server object at 0x10b3bc890>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1041c05e0>
           │       │   └ <uvicorn.server.Server object at 0x10b3bc890>
           │       └ <function run at 0x1039b0e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10abaa5c0>
           │      └ <function Runner.run at 0x103a18720>
           └ <asyncio.runners.Runner object at 0x10b330d90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x10b700930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10b330d90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10b31c350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168ad0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10b7616d0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10b31c350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168ad0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168ad0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10b369c90>
          └ <fastapi.applications.FastAPI object at 0x10b7616d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cab77e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10b761550>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10b369c90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cab77e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10b762f10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10b761550>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cab77e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10c168810>
          │                            │    └ <fastapi.routing.APIRouter object at 0x10b761c50>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10b762f10>
          └ <function wrap_app_handling_exceptions at 0x1050e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x10b761c50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7920>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b761c50>>
          └ <fastapi.routing.APIRouter object at 0x10b761c50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7920>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1050e1da0>
          └ APIRoute(path='/api/v1/machines/{machine_id}', name='get_machine_details', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10b780ea0>
          └ APIRoute(path='/api/v1/machines/{machine_id}', name='get_machine_details', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7920>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10c168610>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10cab7b00>
          └ <function wrap_app_handling_exceptions at 0x1050e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab79c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10c168a...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10cab7b00>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10c168610>
                     └ <function get_request_handler.<locals>.app at 0x10b780fe0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1050e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'machine_id': '7520f7f7-8ba9-4b77-b5ae-f5480f943b6c'}
                 │         └ <function get_machine_details at 0x10abfac00>
                 └ Dependant(path_params=[ModelField(field_info=Path(PydanticUndefined), name='machine_id', mode='validation')], query_params=[]...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 799, in get_machine_details
    # Get machine with variant information

AttributeError: 'DatabaseService' object has no attribute 'get_machine_with_variants'
2025-04-18 16:02:57 | INFO     | api.routes:get_machine_details:796 - Fetching details for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-18 16:02:57 | ERROR    | api.routes:get_machine_details:819 - Error fetching machine details for 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c: 'DatabaseService' object has no attribute 'get_machine_with_variants'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x10b3b8540>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x1041632e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x1041c0540>
    └ <uvicorn.server.Server object at 0x10b3bc890>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1041c05e0>
           │       │   └ <uvicorn.server.Server object at 0x10b3bc890>
           │       └ <function run at 0x1039b0e00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10abaa5c0>
           │      └ <function Runner.run at 0x103a18720>
           └ <asyncio.runners.Runner object at 0x10b330d90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x10b700930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10b330d90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10b31c350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10b7616d0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10b31c350>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10b369c90>
          └ <fastapi.applications.FastAPI object at 0x10b7616d0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cab6b60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10b761550>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10b369c90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cab6b60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10b762f10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10b761550>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cab6b60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10c168e90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x10b761c50>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10b762f10>
          └ <function wrap_app_handling_exceptions at 0x1050e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7240>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x10b761c50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7240>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10b761c50>>
          └ <fastapi.routing.APIRouter object at 0x10b761c50>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1050e1da0>
          └ APIRoute(path='/api/v1/machines/{machine_id}', name='get_machine_details', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10b780ea0>
          └ APIRoute(path='/api/v1/machines/{machine_id}', name='get_machine_details', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7240>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10c168290>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10cab7920>
          └ <function wrap_app_handling_exceptions at 0x1050e07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cab7ba0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc28e...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10cab7920>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10c168290>
                     └ <function get_request_handler.<locals>.app at 0x10b780fe0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x1050e18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'machine_id': '7520f7f7-8ba9-4b77-b5ae-f5480f943b6c'}
                 │         └ <function get_machine_details at 0x10abfac00>
                 └ Dependant(path_params=[ModelField(field_info=Path(PydanticUndefined), name='machine_id', mode='validation')], query_params=[]...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 799, in get_machine_details
    # Get machine with variant information

AttributeError: 'DatabaseService' object has no attribute 'get_machine_with_variants'
2025-04-18 16:04:27 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:04:27 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:04:27 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:04:27 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 16:04:27 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:04:27 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 16:04:27 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:04:27 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 16:04:27 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 16:04:27 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 16:04:27 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 16:04:27 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 16:04:27 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 16:04:27 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 16:04:41 | INFO     | api.routes:get_machine_details:797 - Fetching details for machine 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c
2025-04-18 16:04:41 | ERROR    | api.routes:get_machine_details:820 - Error fetching machine details for 7520f7f7-8ba9-4b77-b5ae-f5480f943b6c: 'DatabaseService' object has no attribute 'get_machine_with_variants'
Traceback (most recent call last):

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 64, in <module>
    start()
    └ <function start at 0x1188ac5e0>

  File "/Users/brandoncullum/machines-for-makers/price-extractor-python/main.py", line 55, in start
    uvicorn.run(
    │       └ <function run at 0x10208f2e0>
    └ <module 'uvicorn' from '/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x1020ec540>
    └ <uvicorn.server.Server object at 0x102081e10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x1020ec5e0>
           │       │   └ <uvicorn.server.Server object at 0x102081e10>
           │       └ <function run at 0x1018dce00>
           └ <module 'asyncio' from '/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/__init__.py'>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1097a66b0>
           │      └ <function Runner.run at 0x101944720>
           └ <asyncio.runners.Runner object at 0x1188b0890>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvic...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1188fc930>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1188b0890>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x1188f7310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2dd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x118961a10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x1188f7310>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2dd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2dd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x118961910>
          └ <fastapi.applications.FastAPI object at 0x118961a10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x118987100>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x118908a10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x118961910>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x118987100>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11881e090>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x118908a10>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x118987100>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x1189b2fd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x118961f90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x11881e090>
          └ <function wrap_app_handling_exceptions at 0x103ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x118987240>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x118961f90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x118987240>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x118961f90>>
          └ <fastapi.routing.APIRouter object at 0x118961f90>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x118987240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x103ae1da0>
          └ APIRoute(path='/api/v1/machines/{machine_id}', name='get_machine_details', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x118987240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x118984f40>
          └ APIRoute(path='/api/v1/machines/{machine_id}', name='get_machine_details', methods=['GET'])
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x118987240>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x1189b3010>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1189872e0>
          └ <function wrap_app_handling_exceptions at 0x103ae07c0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x118987420>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x1189b2d...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x1189872e0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1189b3010>
                     └ <function get_request_handler.<locals>.app at 0x118985080>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x103ae18a0>
  File "/Users/brandoncullum/miniconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'machine_id': '7520f7f7-8ba9-4b77-b5ae-f5480f943b6c'}
                 │         └ <function get_machine_details at 0x1097f6ca0>
                 └ Dependant(path_params=[ModelField(field_info=Path(PydanticUndefined), name='machine_id', mode='validation')], query_params=[]...

> File "/Users/brandoncullum/machines-for-makers/price-extractor-python/api/routes.py", line 800, in get_machine_details
    machine = await price_service.db_service.get_machine_with_variants(machine_id)
                    │             │                                    └ '7520f7f7-8ba9-4b77-b5ae-f5480f943b6c'
                    │             └ <services.database.DatabaseService object at 0x10743b290>
                    └ <services.price_service.PriceService object at 0x103bff050>

AttributeError: 'DatabaseService' object has no attribute 'get_machine_with_variants'
2025-04-18 16:08:19 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:08:19 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:08:19 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:08:19 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 16:08:19 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:08:19 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 16:08:19 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:08:19 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 16:08:19 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 16:08:19 | WARNING  | services.full_html_parser:__init__:36 - OpenAI API key not found in environment variables
2025-04-18 16:08:19 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: False
2025-04-18 16:08:19 | WARNING  | services.price_validator:__init__:42 - Anthropic API key not configured. Advanced price validation will not be available.
2025-04-18 16:08:19 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 16:08:19 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 16:08:19 | WARNING  | config:validate_config:97 - OpenAI API key not found - Full HTML tier with GPT-4o will not be available
2025-04-18 16:08:19 | ERROR    | config:validate_config:102 - Missing required environment variables: ANTHROPIC_API_KEY
2025-04-18 16:08:19 | ERROR    | __main__:start:50 - Configuration validation failed. Exiting.
2025-04-18 16:13:12 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:13:12 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:13:12 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:13:12 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 16:13:12 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:13:12 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 16:13:12 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:13:12 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 16:13:12 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 16:13:12 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 16:13:12 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 16:13:12 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 16:13:12 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 16:13:12 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 16:13:27 | INFO     | api.routes:debug_extraction:1437 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664, variant None
2025-04-18 16:13:27 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 16:13:27 | ERROR    | services.database:get_machine_by_id:169 - Error retrieving machine 8054eeb8-504f-4791-9f48-a99fe0669664: [Errno 8] nodename nor servname provided, or not known
2025-04-18 16:13:27 | ERROR    | api.routes:debug_extraction:1448 - Machine ID not found in database: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 16:14:00 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:14:00 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:14:00 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:14:00 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 16:14:00 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:14:00 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 16:14:00 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:14:00 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 16:14:00 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 16:14:00 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 16:14:00 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 16:14:00 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 16:14:00 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 16:14:00 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 16:14:03 | INFO     | api.routes:debug_extraction:1436 - Received debug extraction request for machine 8054eeb8-504f-4791-9f48-a99fe0669664, variant DEFAULT
2025-04-18 16:14:03 | INFO     | services.database:get_machine_by_id:66 - 🔍 Looking up machine with ID: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 16:14:03 | ERROR    | services.database:get_machine_by_id:169 - Error retrieving machine 8054eeb8-504f-4791-9f48-a99fe0669664: [Errno 8] nodename nor servname provided, or not known
2025-04-18 16:14:03 | ERROR    | api.routes:debug_extraction:1447 - Machine ID not found in database: 8054eeb8-504f-4791-9f48-a99fe0669664
2025-04-18 16:15:30 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:15:30 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:15:30 | ERROR    | services.database_service:__init__:38 - Failed to initialize database service: Missing Supabase credentials in environment variables
2025-04-18 16:16:04 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:16:04 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:16:04 | ERROR    | services.database_service:__init__:38 - Failed to initialize database service: Missing Supabase credentials in environment variables
2025-04-18 16:16:45 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:16:45 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:16:45 | ERROR    | services.database_service:__init__:38 - Failed to initialize database service: Missing Supabase credentials in environment variables
2025-04-18 16:17:39 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:17:39 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:17:39 | ERROR    | services.database_service:__init__:38 - Failed to initialize database service: Missing Supabase credentials in environment variables
2025-04-18 16:17:50 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:17:50 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:17:50 | ERROR    | services.database_service:__init__:38 - Failed to initialize database service: Missing Supabase credentials in environment variables
2025-04-18 16:20:07 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:20:07 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:20:07 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:20:07 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 16:20:07 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:20:07 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 16:20:07 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:20:07 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 16:20:07 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 16:20:07 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 16:20:07 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 16:20:07 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 16:20:07 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 16:20:07 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
2025-04-18 16:20:29 | INFO     | services.database:__init__:48 - Database service initialized (PRODUCTION MODE)
2025-04-18 16:20:29 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:20:29 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:20:29 | INFO     | scrapers.price_extractor:__init__:199 - Price extractor initialized with enhanced merchant-specific settings
2025-04-18 16:20:29 | INFO     | utils.price_validator:__init__:53 - Price validator initialized with default validation rules
2025-04-18 16:20:29 | INFO     | services.price_service:__init__:21 - Price service initialized
2025-04-18 16:20:29 | INFO     | services.database_service:__init__:36 - Database service initialized successfully
2025-04-18 16:20:29 | INFO     | services.slice_parser:__init__:64 - Slice parser initialized
2025-04-18 16:20:29 | INFO     | services.js_parser:__init__:60 - JS Parser initialized
2025-04-18 16:20:29 | INFO     | services.full_html_parser:__init__:70 - Full HTML parser initialized. Available: True
2025-04-18 16:20:29 | INFO     | services.price_validator:__init__:52 - Price validator initialized
2025-04-18 16:20:29 | INFO     | services.extraction_service:__init__:68 - Extraction service initialized with all parsers
2025-04-18 16:20:29 | INFO     | config:validate_config:95 - OpenAI API key found - Full HTML tier with GPT-4o will be available
2025-04-18 16:20:29 | INFO     | __main__:start:54 - Starting Price Extractor API on 0.0.0.0:8000
